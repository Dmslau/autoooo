window.__require=function t(e,o,n){function r(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return r(e[s][1][t]||t)},u,u.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({AfunRiskSDKController:[function(t,e,o){"use strict";cc._RF.push(e,"ae221gJFuJHv4T8EWCrP/4X","AfunRiskSDKController"),Object.defineProperty(o,"__esModule",{value:!0}),o.AfunRiskSDKType=void 0;var n=function(){function t(){this._sdk=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){if(!window.AfunRiskSDK)return null;this._sdk=window.AfunRiskSDK},t.prototype.report=function(t,e,o){if(void 0===e&&(e=""),void 0===o&&(o="LIANLIANKAN"),!this._sdk)return console.error("NO SDK AfunRiskSDK"),void this.init();console.log("AfunRiskSDK----------",t,e),this._sdk.call({scope:"risk",method:t,payload:{gameOperateName:o,gameTaskId:e}})},t}();o.default=n,function(t){t.enterGame="enterGame",t.enterLevel="enterLevel",t.completeLevel="completeLevel",t.completeAll="completeAll",t.showTask="showTask",t.getAward="getAward",t.getCoin="getCoin"}(o.AfunRiskSDKType||(o.AfunRiskSDKType={})),cc._RF.pop()},{}],AlgorithmSystem:[function(t,e,o){"use strict";cc._RF.push(e,"f359drNi/JLwpwAnQwPlE0x","AlgorithmSystem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s};Object.defineProperty(o,"__esModule",{value:!0}),o.AlgorithmSystem=void 0;var a=t("../Common/Constant"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,e.canBeRemoved=function(t,e,o){if(this.routes=[],this.routes.push(t),this.isSamePoint(t,e))return!1;if(o[t.x][t.y]!==o[e.x][e.y])return!1;if(this.isHorizon(t,e,o))return this.routes.push(e),!0;if(this.isVertical(t,e,o))return this.routes.push(e),!0;var n=s(this.isTurnOnce(t,e,o),2),r=n[0],i=n[1];return r?(this.routes.push(i),this.routes.push(e),!0):!!this.isTurnTwice(t,e,o)&&(this.routes.push(e),!0)},e.isHorizon=function(t,e,o){if(t.y!==e.y)return!1;for(var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=n+1;i<r;++i)if(this.isBlocked(cc.v2(i,t.y),o))return!1;return!0},e.isVertical=function(t,e,o){if(t.x!==e.x)return!1;for(var n=Math.min(t.y,e.y),r=Math.max(t.y,e.y),i=n+1;i<r;++i)if(this.isBlocked(cc.v2(t.x,i),o))return!1;return!0},e.isTurnOnce=function(t,e,o){var n=cc.v2(t.x,e.y),r=cc.v2(e.x,t.y);return!this.isBlocked(n,o)&&(this.isHorizon(n,e,o)&&this.isVertical(n,t,o)||this.isVertical(n,e,o)&&this.isHorizon(n,t,o))?[!0,n]:!this.isBlocked(r,o)&&(this.isHorizon(r,e,o)&&this.isVertical(r,t,o)||this.isVertical(r,e,o)&&this.isHorizon(r,t,o))?[!0,r]:[!1,null]},e.isTurnTwice=function(t,e,o){var n;if(t.y===e.y)for(var r=o[0].length-1;r>=0;--r)if(n=cc.v2(t.x,r),!this.isBlocked(n,o)){var i=s(this.isTurnOnce(n,e,o),2),a=i[0],c=i[1];if(this.isVertical(n,t,o)&&a)return this.routes.push(n),this.routes.push(c),!0}if(t.x===e.x)for(var l=0;l<o.length;++l)if(n=cc.v2(l,t.y),!this.isBlocked(n,o)){var u=s(this.isTurnOnce(n,e,o),2);if(a=u[0],c=u[1],this.isHorizon(n,t,o)&&a)return this.routes.push(n),this.routes.push(c),!0}for(var p=o.length-1;p>=0;--p)if(n=cc.v2(p,t.y),!this.isBlocked(n,o)){var f=s(this.isTurnOnce(n,e,o),2);if(a=f[0],c=f[1],this.isHorizon(n,t,o)&&a)return this.routes.push(n),this.routes.push(c),!0}for(r=o[0].length-1;r>=0;--r)if(n=cc.v2(t.x,r),!this.isBlocked(n,o)){var h=s(this.isTurnOnce(n,e,o),2);if(a=h[0],c=h[1],this.isVertical(n,t,o)&&a)return this.routes.push(n),this.routes.push(c),!0}return!1},e.isBlocked=function(t,e){var o=e[t.x][t.y];return 0!=o&&o!=a.LINK_GAME_EMPTY_ID},e.isSamePoint=function(t,e){return t.x===e.x&&t.y===e.y},e.createNodes=function(){},e.removeNodes=function(){},e.isVaildId=function(t){return t!=a.LINK_GAME_OBSTACLE_ID&&t!=a.LINK_GAME_EMPTY_ID},e.isImpasse=function(t){this._findCnt=0;for(var e=t.length,o=t[0].length,n=1;n<e-1;++n)for(var r=1;r<o-1;++r){var i=t[n][r];if(i&&this.isVaildId(i)&&!this._subCheckImpasse(n,r,e,o,t))return!1}return!0},e._subCheckImpasse=function(t,e,n,r,i){for(var s=t;s<n-1;++s)for(var a=1;a<r-1;++a){var c=i[s][a];if(!(t==s&&e>=a)&&c&&this.isVaildId(c)&&(this._findCnt++,o.canBeRemoved(new cc.Vec2(t,e),new cc.Vec2(s,a),i)))return!1}return!0},e.routes=[],e._findCnt=0,o=i([l],e)}(cc.Component));o.AlgorithmSystem=u,cc._RF.pop()},{"../Common/Constant":"Constant"}],AntiAddictionController:[function(t,e,o){"use strict";cc._RF.push(e,"e3770hiNdhClYtXPVE6I/jw","AntiAddictionController");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CroResType=o.Status=void 0;var i=t("../Define/EventId"),s=t("../Define/UIDefs"),a=t("../Framework/Event/EventMgr"),c=t("../Framework/Net/HttpRequest"),l=t("../Framework/UI/UIFacade"),u=t("../Framework/UI/UIMgr"),p=t("./MtopMgr");(function(t){t.ADULT="Adult",t.juvenile="juvenile"})(o.Status||(o.Status={})),function(t){t[t.fail=0]="fail",t[t.suc=1]="suc",t[t.unkown=2]="unkown"}(o.CroResType||(o.CroResType={}));var f=function(){function t(){this._isOpenAnti=!1}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.getUserInfo=function(){return n(this,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return c.HttpRequest.isWeb?(a.EVENT.emit(i.EventId.ON_ANTI_ADDICTION_SUC),[2]):[4,p.default.inst.authentication()];case 1:return t=e.sent(),console.log(t,"\u8eab\u4efd\u4fe1\u606f"),t?t.data.authentication||this._isOpenAnti?(this._isOpenAnti&&u.default.inst.close(s.UIType.AntiAddiction),t.data.adult?(a.EVENT.emit(i.EventId.ON_ANTI_ADDICTION_SUC),[2]):(u.default.inst.open(s.UIType.Unable),[2])):(this._isOpenAnti=!0,u.default.inst.open(s.UIType.AntiAddiction),[2]):(l.UIFacade.showToast("\u670d\u52a1\u5fd9\u788c \u8bf7\u91cd\u65b0\u8fdb\u5165\u6e38\u620f"),[2])}})})},t.prototype.cardCheck=function(t){return/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(t)},t}();o.default=f,cc._RF.pop()},{"../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/Net/HttpRequest":"HttpRequest","../Framework/UI/UIFacade":"UIFacade","../Framework/UI/UIMgr":"UIMgr","./MtopMgr":"MtopMgr"}],AntiAddiction:[function(t,e,o){"use strict";cc._RF.push(e,"5c78dJZgHZKpZb6T5a9fLRG","AntiAddiction");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Controller/AntiAddictionController"),l=t("../../../Controller/LTrackerMgr"),u=t("../../../Controller/MtopMgr"),p=t("../../../Controller/WindVaneMgr"),f=t("../../../Framework/UI/UIFacade"),h=t("../../../Framework/UIBase"),d=cc._decorator,_=d.ccclass,y=d.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labName=null,e.labIdCrad=null,e}return r(e,t),e.prototype.onLoad=function(){l.default.inst.expo("cx156051",{})},e.prototype.onCloseGame=function(){l.default.inst.click("cx156051.dx204659",{}),p.default.inst.closeWindow()},e.prototype.onSubmit=function(){return s(this,void 0,void 0,function(){var t,e,o,n;return a(this,function(r){switch(r.label){case 0:return t=this.labIdCrad.string.trim(),e=this.labName.string.trim(),o=c.default.inst.cardCheck(t),e?o?(console.log(this.labName.string,this.labIdCrad.string),[4,u.default.inst.checkByCro(e,t)]):(f.UIFacade.showToast("\u683c\u5f0f\u4e0d\u6b63\u786e"),l.default.inst.click("cx156051.dx204651",{stype:2}),[2]):(f.UIFacade.showToast("\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"),l.default.inst.click("cx156051.dx204651",{stype:2}),[2]);case 1:return n=r.sent(),console.log(n,"croInfo"),n?(n.status==c.CroResType.suc?(c.default.inst.getUserInfo(),l.default.inst.click("cx156051.dx204651",{stype:1})):(f.UIFacade.showToast("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8eab\u4efd\u4fe1\u606f"),l.default.inst.click("cx156051.dx204651",{stype:2})),[2]):(f.UIFacade.showToast("\u670d\u52a1\u5fd9\u788c \u8bf7\u91cd\u65b0\u8fdb\u5165\u6e38\u620f"),l.default.inst.click("cx156051.dx204651",{stype:2}),[2])}})})},i([y(cc.Label)],e.prototype,"labName",void 0),i([y(cc.Label)],e.prototype,"labIdCrad",void 0),i([_],e)}(h.default);o.default=v,cc._RF.pop()},{"../../../Controller/AntiAddictionController":"AntiAddictionController","../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/MtopMgr":"MtopMgr","../../../Controller/WindVaneMgr":"WindVaneMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase"}],ArchiveSystem:[function(t,e,o){"use strict";cc._RF.push(e,"f54edTeoHxLhKdvU7oI8WGF","ArchiveSystem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/Archive"),s=t("../Framework/Platform/Platform"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.initialize=function(){var t=this;this._userID=s.Platform.getGameId(),this._localData=i.default.createLocalData(this._userID),this.__saveLocalData(),this.localData=new Proxy(this._localData,{get:function(t,e){return t[e]},set:function(e,o,n){return e[o]=n,t.__saveLocalData(),!0}})},e.prototype.switchMusic=function(){this.localData.music=!this.localData.music},e.prototype.switchSound=function(){this.localData.sound=!this.localData.sound},e.prototype.__saveLocalData=function(){i.default.saveLocalData(this._userID,this._localData)},e}(cc.Component);o.default=new a,cc._RF.pop()},{"../Common/Archive":"Archive","../Framework/Platform/Platform":"Platform"}],Archive:[function(t,e,o){"use strict";cc._RF.push(e,"92263jpZiJM2IvgvwLP0vMZ","Archive"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Framework/Platform/Platform"),r=t("../Model/PlayerModel"),i={music:!0,sound:!0},s=function(){function t(){}return t.prototype.createLocalData=function(t){var e=cc.sys.localStorage.getItem(t+"_localData");return e?Object.assign(Object.assign({},i),JSON.parse(e)):i},t.prototype.saveLocalData=function(t,e){cc.sys.localStorage.setItem(t+"_localData",JSON.stringify(e))},t.prototype.saveLocalGameReport=function(t){var e=n.Platform.getGameId();cc.sys.localStorage.setItem(e+"_report",JSON.stringify(t))},t.prototype.cleanLoaclGameReport=function(){var t=n.Platform.getGameId();cc.sys.localStorage.removeItem(t+"_report")},t.prototype.getLocalGameReport=function(){var t=n.Platform.getGameId()+"_report",e=cc.sys.localStorage.getItem(t),o=JSON.parse(e);if(this.checkReportValid(o))return o},t.prototype.checkReportValid=function(t){return!!t&&(r.default.inst.getGameCode(),!0)},t}();o.default=new s,cc._RF.pop()},{"../Framework/Platform/Platform":"Platform","../Model/PlayerModel":"PlayerModel"}],AudioConfig:[function(t,e,o){"use strict";cc._RF.push(e,"2529dRNEIBFz7vH6WZdtNPk","AudioConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.AUDIOS_ENUM=o.AUDIOS_PATH=void 0,o.AUDIOS_PATH={block_click:"block_click",common_click:"common_click",bg_music:"bg_music",fail:"fail",flash:"flash",get_reward:"get_reward"},o.AUDIOS_ENUM=cc.Enum({common_click:0,block_click:1,bg_music:2,fail:3,flash:4,get_reward:5}),cc._RF.pop()},{}],AudioSystem:[function(t,e,o){"use strict";cc._RF.push(e,"6844blYuNBN8qXoQDMwYDkg","AudioSystem");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Common/AudioConfig"),a=t("./ArchiveSystem"),c=function(){function t(){this.audios={},this.audiosID={},this._musicID=null}return t.prototype.initialize=function(){return n(this,void 0,Promise,function(){var t,e,o,n,a,c,l,u,p;return r(this,function(f){switch(f.label){case 0:return[4,new Promise(function(t,e){cc.assetManager.loadBundle("bundle_audios",function(o,n){o?e(o):t(n)})})];case 1:t=f.sent(),e=function(e){var n,i;return r(this,function(r){switch(r.label){case 0:return n=o.audios,i=e,[4,new Promise(function(o,n){t.load(e,cc.AudioClip,function(t,e){t?n(t):o(e)})})];case 1:return n[i]=r.sent(),[2]}})},o=this,f.label=2;case 2:f.trys.push([2,7,8,9]),n=i(Object.values(s.AUDIOS_PATH)),a=n.next(),f.label=3;case 3:return a.done?[3,6]:(c=a.value,[5,e(c)]);case 4:f.sent(),f.label=5;case 5:return a=n.next(),[3,3];case 6:return[3,9];case 7:return l=f.sent(),u={error:l},[3,9];case 8:try{a&&!a.done&&(p=n.return)&&p.call(n)}finally{if(u)throw u.error}return[7];case 9:return this.playMusic(),[2]}})})},t.prototype.play=function(t,e,o){if(void 0===e&&(e=!1),void 0===o&&(o=1),a.default.localData.sound&&t in this.audios){var n=cc.audioEngine.play(this.audios[t],e,o);e&&(this.audiosID[t]=n)}},t.prototype.stop=function(t){t in this.audiosID&&(cc.audioEngine.stop(this.audiosID[t]),delete this.audiosID[t])},t.prototype.playMusic=function(){null===this._musicID&&a.default.localData.music&&this.audios.hasOwnProperty(s.AUDIOS_PATH.bg_music)&&(this.checkPlay(),this._musicID=cc.audioEngine.playMusic(this.audios[s.AUDIOS_PATH.bg_music],!0))},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic(),this._musicID=null},t.prototype.checkPlay=function(){cc.sys.__audioSupport&&cc.sys.__audioSupport.WEB_AUDIO&&(cc.sys.__audioSupport.context?"suspended"==cc.sys.__audioSupport.context.state&&cc.sys.__audioSupport.context.resume():cc.sys.__audioSupport.context=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext))},t}();o.default=new c,cc._RF.pop()},{"../Common/AudioConfig":"AudioConfig","./ArchiveSystem":"ArchiveSystem"}],BaseInfo:[function(t,e,o){"use strict";cc._RF.push(e,"5778cqIUwhK468XZKS4fhxj","BaseInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.ENTRY_TASK_ID="9082001",t.BIZ_SCENE="LIANLIANKAN",t.ACTID="20221109110333363185784428",t.COLLECTIONID=["20221109110333382980175806"],t.ENV="Test",t.TASK_PANNEL_ID="532",t.ENTRY_TASK_KEY="gameSource",t.ENTRY_TASK_VALUE="extVisit",t.SHOP_URL="https://tb.ele.me/wow/alsc/mod/1ac2d023148529a61680d995",t.RULE_URL="https://tb.ele.me/wow/alsc/mod/55a9bb35c50c86cbc2beb857",t.DETAIN_TASK="T001",t.ADULT_SCENE="ELEME_ELMYLY",t.GAME_NAME="linkgame",t.TASK_GAME_PROP="682",t.RANK_COPY_ID="20230322110239030345029714",t.RANK_ACT_ID="20230322104235680173870646",t}();o.default=n,cc._RF.pop()},{}],Bootstrap:[function(t,e,o){"use strict";cc._RF.push(e,"8cd6alGYuhCLKFZeKRcKhd1","Bootstrap");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},s=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=t("../../Controller/AntiAddictionController"),u=t("../../Controller/ExLogCtr"),p=t("../../Controller/PlatMgr"),f=t("../../Controller/TableMgr"),h=t("../../Define/Define"),d=t("../../Define/EventId"),_=t("../../Framework/Event/EventMgr"),y=t("../../Framework/Platform/Platform"),v=t("../../Framework/Res/ResUtil"),m=t("../../Framework/Scene/SceneBase"),g=t("../../Framework/Scene/SceneMgr"),b=t("../../Framework/Utils/Utils"),I=t("../../Model/PlayerModel"),w=t("../../System/ArchiveSystem"),T=cc._decorator,S=T.ccclass,E=T.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiRoot=null,e._isLogin=!1,e._isAdult=!1,e}return r(e,t),e.prototype.onLoad=function(){cc.sys.isBrowser&&(window.onerror=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=i({},t);u.default.inst.logJsError(o[4],!0)})},e.prototype.onEnable=function(){_.EVENT.on(d.EventId.ON_LOGIN_RET,this.onLoginRet,this),_.EVENT.on(d.EventId.ON_ANTI_ADDICTION_SUC,this.onAntiAddiction,this)},e.prototype.onDisable=function(){_.EVENT.off(d.EventId.ON_LOGIN_RET,this.onLoginRet,this),_.EVENT.off(d.EventId.ON_ANTI_ADDICTION_SUC,this.onAntiAddiction,this)},e.prototype.start=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return window.setExitBtn&&window.setExitBtn(),w.default.initialize(),[4,p.default.inst.init()];case 1:return t.sent(),l.default.inst.getUserInfo(),[4,this.initGame()];case 2:return t.sent(),[4,this.platformInit()];case 3:return t.sent(),[2]}})})},e.prototype.initFramework=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return t=v.ResUtil.instantiate(this.uiRoot),console.log("initFrameWork ...................",t),cc.director.getScene().addChild(t),cc.game.addPersistRootNode(t),[4,f.TABLE.loadTableRes()];case 1:return e.sent(),[2]}})})},e.prototype.initGame=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.initFramework()];case 1:return t.sent(),w.default.initialize(),[2]}})})},e.prototype.__dailyCheck=function(){},e.prototype.__debugInit=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:case cc.sys.ANDROID:}},e.prototype.platformInit=function(){return a(this,void 0,void 0,function(){var t,e;return c(this,function(o){switch(o.label){case 0:return t=b.default.getUrlParams("gameId"),e=b.default.getUrlParams("inviterId"),[4,y.Platform.init(t,e)];case 1:return o.sent(),[2]}})})},e.prototype.onLoginRet=function(t){return a(this,void 0,void 0,function(){return c(this,function(){return I.default.inst.initData(t),this._isLogin=!0,this._goMain(),[2]})})},e.prototype.onAntiAddiction=function(){this._isAdult=!0,this._goMain()},e.prototype._goMain=function(){console.warn("789///"),this._isLogin&&this._isAdult&&(u.default.inst.logCustomPerformance(),g.SCENE.loadScene(h.SceneType.Main))},s([E(cc.Prefab)],e.prototype,"uiRoot",void 0),s([S],e)}(m.default);o.default=P,cc._RF.pop()},{"../../Controller/AntiAddictionController":"AntiAddictionController","../../Controller/ExLogCtr":"ExLogCtr","../../Controller/PlatMgr":"PlatMgr","../../Controller/TableMgr":"TableMgr","../../Define/Define":"Define","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Platform/Platform":"Platform","../../Framework/Res/ResUtil":"ResUtil","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/Scene/SceneMgr":"SceneMgr","../../Framework/Utils/Utils":"Utils","../../Model/PlayerModel":"PlayerModel","../../System/ArchiveSystem":"ArchiveSystem"}],ButtonAudio:[function(t,e,o){"use strict";cc._RF.push(e,"f276cH0XyxLEbwHx5IVtttF","ButtonAudio");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Common/AudioConfig"),a=t("./AudioSystem"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickAudioType=s.AUDIOS_ENUM.common_click,e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.node.getComponent(cc.Button)&&this.node.on(cc.Node.EventType.TOUCH_END,function(){a.default.play(s.AUDIOS_PATH[s.AUDIOS_ENUM[t.clickAudioType]])})},i([u({type:s.AUDIOS_ENUM})],e.prototype,"clickAudioType",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Common/AudioConfig":"AudioConfig","./AudioSystem":"AudioSystem"}],ButtonClickLimiter:[function(t,e,o){"use strict";cc._RF.push(e,"eb6fcOMRKVIRq2ZVI1TloAM","ButtonClickLimiter");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickCD=.5,e}return r(e,t),e.prototype.onLoad=function(){var t=this,e=this.getComponent(cc.Button);e&&(this.clickEvents=e.clickEvents,this.node.on("click",function(){e.clickEvents=[],t.scheduleOnce(function(){e.clickEvents=t.clickEvents},t.clickCD)},this))},i([c],e.prototype,"clickCD",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],CommonDialog:[function(t,e,o){"use strict";cc._RF.push(e,"641a8EEFyhOWaUm/7UZkTLk","CommonDialog");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Framework/UIBase"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTittle=null,e.lblDes=null,e.lblCancelText=null,e.lblAffirmText=null,e._dialogData=null,e}return r(e,t),e.prototype.start=function(){var t=this._para;this._dialogData=t,this.lblTittle.string=t.title,this.lblDes.string=t.describe,this.lblCancelText.string=t.cancelText||"\u53d6\u6d88",this.lblAffirmText.string=t.affirmText||"\u786e\u8ba4"},e.prototype.onClickCancelBtn=function(){this._dialogData&&this._dialogData.cancelHandle&&this._dialogData.cancelHandle(),this.close()},e.prototype.onClickAffirmBtn=function(){this._dialogData&&this._dialogData.affirmHandle&&this._dialogData.affirmHandle(),t.prototype.close.call(this)},e.prototype.onClickCloseBtn=function(){this._dialogData&&this._dialogData.closeToCanel&&this._dialogData.cancelHandle&&this._dialogData.cancelHandle(),this.close()},i([l(cc.Label)],e.prototype,"lblTittle",void 0),i([l(cc.Label)],e.prototype,"lblDes",void 0),i([l(cc.Label)],e.prototype,"lblCancelText",void 0),i([l(cc.Label)],e.prototype,"lblAffirmText",void 0),i([c],e)}(s.default);o.default=u,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase"}],CommonToast:[function(t,e,o){"use strict";cc._RF.push(e,"c2ba2y6ZDtG7ZP9ddIgV9aw","CommonToast");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Controller/ExLogCtr"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e._isOpening=!1,e._runTime=0,e._tipList=[],e.openTime=0,e.minOpenTime=3,e.maxOpenTime=17,e.isOpeningCount=!1,e.showingNext=!1,e.nowItem=null,e.lastItem=null,e.label=null,e}return r(e,t),Object.defineProperty(e.prototype,"isOpening",{get:function(){return this._isOpening},enumerable:!1,configurable:!0}),e.prototype.showTips=function(t){try{if(this.freshWidth(t),this._tipList.push(t),1==this._tipList.length&&0==this._isOpening)this.showingNext=!0,this.item.width=40*t.length+20,this._showNext();else{if(this._tipList.length>2)for(var e={},o=0;o<this._tipList.length;o++)if(e[this._tipList[o]]||this.label&&this._tipList[o]==this.label.string){if(this._tipList.splice(o,1),this._tipList.length<=2)break;o--}else e[this._tipList[o]]=1;this._tipList.length>0&&0==this._isOpening&&0==this.isOpeningCount&&0==this.showingNext&&(this.showingNext=!0,this._showNext())}}catch(n){this.node&&(this.node.active=!1),cc.log("ShowTips",n),s.default.inst.logJsError(n)}},e.prototype.freshWidth=function(t){this.item.width=40*t.length+20},e.prototype._showNext=function(){this.nowItem?(cc.log("tip\u5b58\u5728"),this.showingNext=!1):(this.nowItem=cc.instantiate(this.item),this.nowItem.parent=this.node,this.nowItem.active=!0,this._showOneTip(this._tipList[0])&&(this._tipList.shift(),this.openTime=0),this.showingNext=!1)},e.prototype._showOneTip=function(t){if(cc.log("ShowOneTip"),this._isOpening)return cc.log("\u4e0d\u80fd\u540c\u65f6\u6253\u5f00\u591a\u4e2a\u63d0\u793a"),!1;if(!this.nowItem)return cc.log("\u5f53\u524dtip\u5df2\u9500\u6bc1"),!1;this.isOpeningCount=!0,this._isOpening=!0;var e=this.nowItem.getChildByName("Label");if(e){var o=e.getComponent(cc.Label);o?(this.label=o,o.string=t):cc.log("tip   \u627e\u4e0d\u5230label")}else cc.log("tip   \u627e\u4e0d\u5230 node   label");return this.nowItem.opacity=0,this.nowItem.runAction(cc.spawn(cc.moveBy(.15,cc.v2(0,60)),cc.fadeIn(.2))),!0},e.prototype._removeTips=function(){this.lastItem&&(this.lastItem.stopAllActions(),this.lastItem.removeFromParent()),this.lastItem=this.nowItem,this.nowItem=null,this.lastItem&&(this._tipList.length>0?this.lastItem.runAction(cc.sequence(cc.spawn(cc.moveBy(.25,cc.v2(0,80)),cc.sequence(cc.delayTime(.1),cc.fadeOut(.15).easing(cc.easeQuadraticActionIn()))),cc.removeSelf(!0))):this.lastItem.runAction(cc.sequence(cc.spawn(cc.moveBy(.25,cc.v2(0,80)),cc.fadeOut(.25)),cc.removeSelf(!0)))),this._isOpening=!1,this._tipList.length>0&&(this.showingNext=!0,this._showNext())},e.prototype.update=function(t){if(this._runTime+=t,!(this._runTime<.1)){this._runTime=0;try{if(this._isOpening&&this.isOpeningCount){if(this.openTime++,this.openTime>this.maxOpenTime)return this.isOpeningCount=!1,void this._removeTips();if(this._tipList.length>0&&this.openTime>this.minOpenTime)return this.isOpeningCount=!1,void this._removeTips()}}catch(e){this.node&&(this.node.active=!1),cc.log("ShowTips",e),s.default.inst.logJsError(e)}}},i([l(cc.Node)],e.prototype,"item",void 0),i([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../Controller/ExLogCtr":"ExLogCtr"}],ComponetBase:[function(t,e,o){"use strict";cc._RF.push(e,"e96cebPc8BMbrFONsvMjb/z","ComponetBase");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.isLive=function(){return!!(this&&this.node&&this.node.isValid&&this.isValid)},e.prototype.getName=function(){return this.isLive()?this.name:"destroy"},i([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],ConfirmView:[function(t,e,o){"use strict";cc._RF.push(e,"4bd0cWxOm5HY4Z53vlUCbph","ConfirmView");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../UIBase"),a=t("../Event/EventMgr"),c=t("../../Define/EventId"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblContent=null,e.confirmTxt=null,e.cancelTxt=null,e}return r(e,t),e.prototype.start=function(){this.renderView(this._para.content,this._para.confirmBtnTxt,this._para.cancelBtnTxt)},e.prototype.renderView=function(t){this.lblContent.string=t},e.prototype.onBtnCloseClick=function(){this.close(),a.default.inst.emit(c.EventId.EVENT_CONFIRM,!1)},e.prototype.onClickButton1=function(){this.close(),a.default.inst.emit(c.EventId.EVENT_CONFIRM,!1)},e.prototype.onClickButton2=function(){this.close(),a.default.inst.emit(c.EventId.EVENT_CONFIRM,!0)},i([p(cc.Label)],e.prototype,"lblContent",void 0),i([p(cc.Label)],e.prototype,"confirmTxt",void 0),i([p(cc.Label)],e.prototype,"cancelTxt",void 0),i([u],e)}(s.default);o.default=f,cc._RF.pop()},{"../../Define/EventId":"EventId","../Event/EventMgr":"EventMgr","../UIBase":"UIBase"}],Constant:[function(t,e,o){"use strict";cc._RF.push(e,"b951bSvkUpP276XkUYAFM33","Constant"),Object.defineProperty(o,"__esModule",{value:!0}),o.FailType=o.GAME_ITEM_STATE=o.PROP_ID=o.SCENES_NAME=o.GAME_TIPS_SHOW_TIME=o.LINK_GAME_COLMN=o.LINK_GAME_ROW=o.LINK_GAME_EMPTY_ID=o.LINK_GAME_OBSTACLE_ID=o.LINK_GAME_PIC_DROP_COUNT=o.LINK_GAME_PIC_DROP_CD=o.LINK_GAME_PIC_KIND_COUNT=o.LINK_GAME_PIC_TOTAL_COUNT=void 0,o.LINK_GAME_PIC_TOTAL_COUNT=100,o.LINK_GAME_PIC_KIND_COUNT=12,o.LINK_GAME_PIC_DROP_CD=10,o.LINK_GAME_PIC_DROP_COUNT=20,o.LINK_GAME_OBSTACLE_ID=999,o.LINK_GAME_EMPTY_ID=9999,o.LINK_GAME_ROW=6,o.LINK_GAME_COLMN=8,o.GAME_TIPS_SHOW_TIME=1,o.SCENES_NAME={MainScen:"Scenes/MainScene",GameScene:"Scenes/GameScene"},function(t){t.Hint="D003",t.RemoveObstacle="D004"}(o.PROP_ID||(o.PROP_ID={})),function(t){t[t.UnGet=0]="UnGet",t[t.UnUse=1]="UnUse",t[t.Used=2]="Used"}(o.GAME_ITEM_STATE||(o.GAME_ITEM_STATE={})),function(t){t[t.Impasse=0]="Impasse",t[t.Time=1]="Time"}(o.FailType||(o.FailType={})),cc._RF.pop()},{}],Define:[function(t,e,o){"use strict";cc._RF.push(e,"9d4e4ZPBHxBDr1UOayG7XXC","Define"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneType=void 0,function(t){t[t.$Start=0]="$Start",t[t.NONE=1]="NONE",t[t.Bootstrap=2]="Bootstrap",t[t.Main=3]="Main",t[t.Game=4]="Game",t[t.$End=5]="$End"}(o.SceneType||(o.SceneType={})),cc._RF.pop()},{}],Detain:[function(t,e,o){"use strict";cc._RF.push(e,"9346c+dApNMrYY6O9Supgzc","Detain");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Controller/AfunRiskSDKController"),l=t("../../../Controller/LTrackerMgr"),u=t("../../../Controller/ShareMgr"),p=t("../../../Controller/TableMgr"),f=t("../../../Define/UIDefs"),h=t("../../../Framework/Tools/BaseInfo"),d=t("../../../Framework/UI/UIFacade"),_=t("../../../Framework/UI/UIMgr"),y=t("../../../Framework/UIBase"),v=t("../../../Network/Net"),m=cc._decorator,g=m.ccclass,b=m.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labAwardNum=null,e.sprAward=null,e.labTaskDesc=null,e}return r(e,t),e.prototype.onLoad=function(){var t=p.TABLE.getTaskInfo(h.default.DETAIN_TASK).asTaskReward[0].split(",");this.labAwardNum.string="X"+t[1],l.default.inst.expo("cx155915",{})},e.prototype.onClickShare=function(){return s(this,void 0,void 0,function(){var t=this;return a(this,function(){return u.default.inst.share(u.ShareContent.TONGYONG,function(){return s(t,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return l.default.inst.expo("cx156035",{stype:1,spage:1}),c.default.inst.report(c.AfunRiskSDKType.getCoin),[4,v.Net.updateTask(h.default.DETAIN_TASK)];case 1:return t=o.sent(),(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.rewardItems.length)>0?_.default.inst.open(f.UIType.GetItemLayer,t.data.rewardItems):d.UIFacade.showToast("\u4e50\u56ed\u5e01\u53d1\u653e\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d\u5904\u7406"),this.close(),[2]}})})},function(){d.UIFacade.showToast("\u5206\u4eab\u5931\u8d25"),l.default.inst.expo("cx156035",{stype:2,spage:1})}),l.default.inst.click("cx155915.dx204419",{}),[2]})})},e.prototype.onClickClose=function(){l.default.inst.click("cx155915.dx204427",{}),this.close()},e.prototype.onDestroy=function(){u.default.inst.clear()},i([b(cc.Label)],e.prototype,"labAwardNum",void 0),i([b(cc.Sprite)],e.prototype,"sprAward",void 0),i([b(cc.Label)],e.prototype,"labTaskDesc",void 0),i([g],e)}(y.default);o.default=I,cc._RF.pop()},{"../../../Controller/AfunRiskSDKController":"AfunRiskSDKController","../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/ShareMgr":"ShareMgr","../../../Controller/TableMgr":"TableMgr","../../../Define/UIDefs":"UIDefs","../../../Framework/Tools/BaseInfo":"BaseInfo","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Network/Net":"Net"}],DoubleAwardController:[function(t,e,o){"use strict";cc._RF.push(e,"3b98c+eJ8dEFYsZUjUOQrUJ","DoubleAwardController");var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Define/EventId"),a=t("../Framework/Event/EventMgr"),c=t("../Model/PlayerModel"),l=t("../Model/TaskModel"),u=t("./TaskController"),p=t("./TurnTaskController"),f=t("./WindVaneMgr"),h=function(){function t(){this._sucCallback=null,this._failCallback=null,this._taskID=null,this._taskInfo=null,this._isDoing=!1,this._extInfo=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){a.EVENT.on(s.EventId.ON_SHOW,this._onShow,this)},t.prototype.getNewAction=function(t,e,o,r){void 0===e&&(e=null),void 0===o&&(o=null),void 0===r&&(r={}),p.default.inst.changeIdx(),this._sucCallback=null,this._failCallback=null,this._taskID=t,this._sucCallback=e,this._failCallback=o,this._extInfo=n({type:"GameProp",token:c.default.inst.getToken(),sceneId:t.sID,gameCode:c.default.inst.getGameCode()},r),this._toFinishTask()},t.prototype._toFinishTask=function(t){var e,o,n,s,a,c,p,h;return void 0===t&&(t=!1),r(this,void 0,void 0,function(){var r,d,_,y,v;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,u.default.inst.queryTaskItem(this._taskID.sMissionCollectionID,this._taskID.sMissionID)];case 1:return(r=i.sent()).status=u.default.inst.changeTaskStatus(r),this._taskInfo=r,console.log("\u5224\u5b9a\u4efb\u52a1\u9886\u53d6\u72b6\u6001",r.receiveType,l.MissionReceiveType.RECEIVE," &&",r.receiveStatus,l.ReceiveStatus.TORECEIVE),r.receiveType!=l.MissionReceiveType.RECEIVE||r.receiveStatus!=l.ReceiveStatus.TORECEIVE?[3,3]:[4,u.default.inst.getTask(this._taskID.sMissionCollectionID,this._taskID.sMissionID)];case 2:i.sent(),this._taskInfo.receiveStatus=l.ReceiveStatus.HAVERECEIVED,i.label=3;case 3:return d=(null===(e=r.stage)||void 0===e?void 0:e.count)?null===(o=r.stage)||void 0===o?void 0:o.count:1,_=null===(n=r.missionStageDTOS[d-1])||void 0===n?void 0:n.rewardStatus,console.log("\u5224\u5b9a\u4efb\u52a1\u5956\u52b1\u72b6\u6001",r.status,l.MissionStatusType.FINISH,"\u9886\u5956\u72b6\u6001",_),r.status!=l.MissionStatusType.FINISH||_==l.TaskRewardStatus.SUCCESS?[3,5]:[4,u.default.inst.getAward(r,this._extInfo)];case 4:return y=i.sent(),console.log(y.data,"\u9886\u5956\u4fe1\u606f"),v={},y.data.rlist.forEach(function(t){var e;t.type&&t.value&&(t.type,Number(t.value)),(null===(e=null==t?void 0:t.ext)||void 0===e?void 0:e.rewardDesc)&&(v=JSON.parse(t.ext.rewardDesc))}),this._sucCallback&&this._sucCallback(v),[2];case 5:return t||r.status!=l.MissionStatusType.RUNNING?this._failCallback&&this._failCallback():((null===(a=null===(s=r.actionConfig)||void 0===s?void 0:s.actionValue)||void 0===a?void 0:a.executeOpportunity)?f.default.inst.openBrowser(null===(h=null===(p=r.ext)||void 0===p?void 0:p.extValue)||void 0===h?void 0:h.missionActionUrl):f.default.inst.openTaskBrowser(null===(c=r.ext.extValue)||void 0===c?void 0:c.missionActionUrl,r),this._isDoing=!0),[3,7];case 6:return i.sent(),this._failCallback&&this._failCallback(),[3,7];case 7:return[2]}})})},t.prototype._onShow=function(){return r(this,void 0,void 0,function(){var t=this;return i(this,function(){return this._isDoing?(this._isDoing=!1,u.default.inst.refreshTaskInfo(this._taskInfo,function(){t._toFinishTask(!0)}),[2]):[2]})})},t}();o.default=h,cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Model/PlayerModel":"PlayerModel","../Model/TaskModel":"TaskModel","./TaskController":"TaskController","./TurnTaskController":"TurnTaskController","./WindVaneMgr":"WindVaneMgr"}],DropSystem:[function(t,e,o){"use strict";cc._RF.push(e,"6665fx6jXpIJpCsFq63oGWX","DropSystem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Common/Constant"),r=t("../Framework/Utils/Utils"),i=t("./GamingSystem"),s=t("./PicSystem"),a=function(){function t(){}return t.prototype.getPicDropPools=function(){var t=n.LINK_GAME_PIC_KIND_COUNT,e=n.LINK_GAME_PIC_TOTAL_COUNT;if(e%2==0){for(var o=s.default.getRandomPic(t),r=new Array,i=0;i<e/2;i++){var a=Math.floor(Math.random()*o.length);r.push(o[a]),r.push(o[a])}return r.sort(function(){return Math.random()>.5?-1:1}),r}console.error("\u6389\u843d\u683c\u5b50\u603b\u6570\u4e3a\u5947\u6570\uff0c\u914d\u7f6e\u9519\u8bef")},t.prototype.getLevelDropPools=function(){var t=i.default.getCurMapConfig();return t?0!=t.asDefaultPools.length?r.default.clone(t.asDefaultPools):this.getCustomDropPools(t):console.error("\u914d\u7f6e\u9519\u8bef-------------------")},t.prototype.getCustomDropPools=function(t){var e=t.aiDropPoolsA,o=t.aiDropPoolsB,r=t.aiDropPoolsC,i=new Array,a=t.aiRandomPoolKind[0],c=t.aiRandomPoolKind[1],l=s.default.getRandomPic(a+c),u=l.splice(0,a),p=l.splice(0,c),f=this._getDropPicPool(u,e[0]),h=this._getDropPicPool(p,o[0]),d=this._getSameAarry(n.LINK_GAME_OBSTACLE_ID.toString(),r[0]);i=i.concat(f,h,d);var _={};i.forEach(function(t){_[t]||(_[t]=0),_[t]++});for(var y=this._getDropotalCount(e),v=this._getDropotalCount(o),m=this._getDropotalCount(r),g=this._getDropPicPool(u,y),b=this._getDropPicPool(p,v),I=this._getSameAarry(n.LINK_GAME_OBSTACLE_ID.toString(),m),w=t.aiDropPoolsA.length,T=1;T<w;T++){var S=g.splice(0,e[T]),E=b.splice(0,o[T]),P=I.splice(0,r[T]),O=(new Array).concat(S,E,P);O.sort(function(){return Math.random()>.5?-1:1}),i=i.concat(O)}var C={};return i.forEach(function(t){C[t]||(C[t]=0),C[t]++}),i},t.prototype._getDropPicPool=function(t,e){if(e%2==0){for(var o=new Array,n=0,r=0;r<e/2;r++){var i=t[n];o.push(i),o.push(i),++n>=t.length&&(n=0)}return o.sort(function(){return Math.random()>.5?-1:1}),o}console.error("\u6389\u843d\u683c\u5b50\u603b\u6570\u4e3a\u5947\u6570\uff0c\u914d\u7f6e\u9519\u8bef")},t.prototype._getSameAarry=function(t,e){for(var o=new Array,n=0;n<e;n++)o.push(t);return o},t.prototype._getRandomTotalCount=function(t){var e=0;return t.forEach(function(t){e+=t}),e},t.prototype._getDropotalCount=function(t){for(var e=0,o=1;o<t.length;o++)e+=t[o];return e},t.prototype.getNextDropPlan=function(t){var e=i.default.getCurMapConfig().aiDropCompound;if(e)for(var o=0;o<e.length;o++){var n=e[o];if(t<n)return n;t-=n}},t}();o.default=new a,cc._RF.pop()},{"../Common/Constant":"Constant","../Framework/Utils/Utils":"Utils","./GamingSystem":"GamingSystem","./PicSystem":"PicSystem"}],EffectLayerController:[function(t,e,o){"use strict";cc._RF.push(e,"87089uMeeZEwIHekHgafxEG","EffectLayerController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Common/Constant"),a=t("../../../Define/EventId"),c=t("../../../Framework/Event/EventMgr"),l=cc._decorator,u=l.ccclass,p=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.faillParticle=null,e.hammerAni=null,e.propSprite=null,e.propSpriteFrames=[],e._particleNode=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_NEW_PROP_DROP_ACTION,this.playGetPropItem,this)},e.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_UPDATE_LOADING_PROGRESS,this.playGetPropItem,this)},e.prototype.playFallAni=function(){this._particleNode&&(this._particleNode.destroy(),this._particleNode=null);var t=cc.instantiate(this.faillParticle);this.node.addChild(t),this._particleNode=t},e.prototype.playHammerAction=function(t){this.hammerAni.node.active=!0,this.hammerAni.node.position=new cc.Vec3(t.x,t.y),this.hammerAni.play()},e.prototype.playGetPropItem=function(t){var e=this;this.propSprite.spriteFrame=t==s.PROP_ID.Hint?this.propSpriteFrames[0]:this.propSpriteFrames[1],this.propSprite.node.active=!0,this.propSprite.node.position=new cc.Vec3(0,-100),cc.tween(this.propSprite.node).to(.05,{angle:-15}).to(.1,{angle:15}).to(.1,{angle:-15}).to(.1,{angle:15}).to(.4,{y:-460}).call(function(){e.propSprite.node.active=!1}).start()},i([p(cc.Prefab)],e.prototype,"faillParticle",void 0),i([p(cc.Animation)],e.prototype,"hammerAni",void 0),i([p(cc.Sprite)],e.prototype,"propSprite",void 0),i([p([cc.SpriteFrame])],e.prototype,"propSpriteFrames",void 0),i([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Common/Constant":"Constant","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr"}],EventId:[function(t,e,o){"use strict";cc._RF.push(e,"11b6fpZP7FGr7WF79E8hZzj","EventId"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventId=void 0,o.EventId={ON_UI_OPEN_FAIL:"EventId.ON_UI_OPEN_FAIL",CHANGE_SCENE:"EventId.CHANGE_SCENE",EVENT_CONFIRM:"EventId.EVENT_CONFIRM",ON_UI_OPEN:"EventId.EVENT_ON_UI_OPEN",ON_UI_CLOSE:"EventId.EVENT_ON_UI_CLOSE",ON_UPDATE_LOADING_PROGRESS:"EventId.ON_UPDATE_LOADING_PROGRESS",ON_UPDATE_LOADING_TTP:"EventId.ON_UPDATE_LOADING_TTP",ON_LOGIN_RET:"EventId.ON_LOGIN_RET",ON_ANTI_ADDICTION_SUC:"EventId.ON_ANTI_ADDICTION_SUC",ON_SHOW:"ON_SHOW",ON_SETTING_END:"ON_SETTING_END",ON_HIDE:"ON_HIDE",ON_INIT_MAP:"EventId.ON_INIT_MAP",ON_CLICK_LINK_GAME_PIC:"EventId.ON_CLICK_LINK_GAME_PIC",ON_CLICK_LINK_GAME_OBSTACLE:"EventId.ON_CLICK_LINK_GAME_OBSTACLE",ON_UPDATE_PROP_STATE:"EventId.ON_UPDATE_PROP_STATE",ON_USE_ITEM:"EventId.ON_USE_ITEM",ON_GAME_REVIVE_SUCC:"EventId.ON_GAME_REVIVE_SUCC",ON_CANCEL_GAME_REVIVE:"EventId.ON_CANCEL_GAME_REVIVE",ON_USING_REMOVE_OBSTACLE:"EventId.ON_USING_REMOVE_OBSTACLE",ON_NEW_PROP_DROP_ACTION:"EventId.ON_NEW_PROP_DROP_ACTION",ON_PLAY_RESOURCE_FLY_ANI:"ON_PLAY_RESOURCE_FLY_ANI",ON_DROP_NEW_PIC:"EventId.ON_DROP_NEW_PIC",ON_GAME_TIME_OVER:"EventId.ON_GAME_TIME_OVER",ON_CLEAN_GAME_DIRTY_DATA:"EventId.ON_CLEAN_GAME_DIRTY_DATA",ON_ITEM_CHANGE:"EventId.ON_ITEM_CHANGE",ON_REFRESH_COIN:"EventId.ON_REFRESH_COIN",ON_REFRESH_TASK:"EventId.ON_REFRESH_TASK",ON_UPDATE_STAMINA:"ON_UPDATE_STAMINA",ON_FLY:"ON_FLY"},cc._RF.pop()},{}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0b580U6y3NDDoFSQ+d5eIuN","EventMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT=void 0;var i=function(t){function e(){return t.call(this)||this}return r(e,t),Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e)},enumerable:!1,configurable:!0}),e}(t("./EventObject").EventObject);o.EVENT=i.inst,cc._RF.pop()},{"./EventObject":"EventObject"}],EventObject:[function(t,e,o){"use strict";cc._RF.push(e,"14ee7hO/SlNf5Mlf/0SarrA","EventObject");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.EventObject=void 0;var c=t("../Utils/Utils"),l=function(){this.name=""},u=function(){function t(){this._callbackInfoList=[]}return t.prototype.getInfo=function(){return this._callbackInfoList.length>0?this._callbackInfoList.pop():new l},t.prototype.recovery=function(t){this._callbackInfoList.push(t)},t}(),p=function(t){function e(){var e=t.call(this)||this;return e._eventList={},e._callbackInfoPool=new u,e}return r(e,t),e.prototype.on=function(e,o,n,r){for(var i=[],a=4;a<arguments.length;a++)i[a-4]=arguments[a];if(-1!=this.findEvent(e,o,n))return o;void 0===this._eventList[e]&&(this._eventList[e]=[]);var l=this._callbackInfoPool.getInfo();if(n instanceof cc.Component){var u=n;if(!c.default.isComponentLive(u))return void cc.error("component is not live!");l.name=u.node.name}return l.type=e,l.callback=o,l.target=n,l.useCapture=r,l.args=i,l.realCallback=function(){for(var t,e,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var r=l.target;try{var i=l.args&&l.args.filter(function(t){return null!=t})||[],a=o&&o.filter(function(t){return null!=t})||[],u=i.concat(a);if(l.callback&&r)if(r instanceof cc.Component){var p=r;c.default.isComponentLive(p)&&(t=l.callback).call.apply(t,s([r],u))}else(e=l.callback).call.apply(e,s([r],u));else l.callback&&l.callback.apply(l,s(u))}catch(f){cc.error("EVENT.on callback faild!"+f)}},this._eventList[e].push(l),t.prototype.on?t.prototype.on.call(this,e,l.realCallback,n):cc.error("\u65b0\u5f15\u64ce\u7248\u672c EventTarget \u6ca1on\u51fd\u6570"),n&&n.__eventTargets&&n.__eventTargets.push(this),o},e.prototype.off=function(e,o,n){var r,i;if(!o){if(this._eventList[e])try{for(var s=a(this._eventList[e]),c=s.next();!c.done;c=s.next()){var l=c.value;this._callbackInfoPool.recovery(l)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return this._eventList[e]=void 0,void t.prototype.off.call(this,e,void 0,void 0)}var u=this.findEvent(e,o,n);if(-1!=u){var p=this._eventList[e],f=p[u];t.prototype.off.call(this,e,f.realCallback,n),this._callbackInfoPool.recovery(f),p.splice(u,1),p.length<=0&&(this._eventList[e]=void 0)}},e.prototype.targetOff=function(e){if(e&&this._eventList&&!(Object.keys(this._eventList).length<=0)){for(var o=Object.keys(this._eventList),n=o.length-1;n>=0;--n){var r=o[n],i=this._eventList[r];if(i&&0!=i.length){for(var s=i.length-1;s>=0;--s){var a=i[s];a.target==e&&(i.splice(s,1),this._callbackInfoPool.recovery(a))}i.length<=0&&(this._eventList[r]=void 0)}}t.prototype.targetOff.call(this,e)}},e.prototype.findEvent=function(t,e,o){var n=this._eventList[t];if(!n||0==n.length)return-1;for(var r=0;r<n.length;r++)if(n[r].callback===e&&n[r].target==o)return r;return-1},e}(cc.EventTarget);o.EventObject=p,cc._RF.pop()},{"../Utils/Utils":"Utils"}],ExLogCtr:[function(t,e,o){"use strict";cc._RF.push(e,"e122fhS6PtM/pl7hFcEUqL6","ExLogCtr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this._sdk=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._sdk=window.ExLog},t.prototype.logApiError=function(t,e){this._sdk?(console.log("Api\u5f02\u5e38",t),this._sdk.logApiError({code:e,message:(null==t?void 0:t.errorMsg)||"",errorCode:(null==t?void 0:t.errorCode)||"",traceId:(null==t?void 0:t.traceId)||""})):console.error("NO SDK")},t.prototype.logJsError=function(t,e){void 0===e&&(e=!1),t&&(this._sdk?(console.log("JS\u5f02\u5e38",t),this._sdk.logJsError({code:e?"game":"other",message:null==t?void 0:t.message,stack:null==t?void 0:t.stack})):console.error("NO SDK"))},t.prototype.logCustomPerformance=function(){if(this._sdk){var t=(new Date).getTime()-window.startLoadingTime;console.log(t,"useTime"),this._sdk.logCustomPerformance({code:"bizAvailable",costTime:t})}else console.error("NO SDK")},t}();o.default=n,cc._RF.pop()},{}],ExitController:[function(t,e,o){"use strict";cc._RF.push(e,"cf607ZD5lFHMrgcZXTIdE+Y","ExitController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Define/UIDefs"),r=t("../Framework/Tools/BaseInfo"),i=t("../Framework/UI/UIMgr"),s=t("../Model/TaskModel"),a=t("./WindVaneMgr"),c=function(){function t(){this._isFirstOpen=!0}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.openExit=function(){this._isFirstOpen?(this.isTodayFirst()?(i.default.inst.open(n.UIType.ExitGame),window.setSureExitBtn()):i.default.inst.open(n.UIType.ExitShare),this._isFirstOpen=!1):a.default.inst.closeWindow()},t.prototype.isTodayFirst=function(){var t;return null===(t=s.default.inst.gameTaskPro[r.default.DETAIN_TASK])||void 0===t?void 0:t.isFinishe},t}();o.default=c,cc._RF.pop()},{"../Define/UIDefs":"UIDefs","../Framework/Tools/BaseInfo":"BaseInfo","../Framework/UI/UIMgr":"UIMgr","../Model/TaskModel":"TaskModel","./WindVaneMgr":"WindVaneMgr"}],ExitGame:[function(t,e,o){"use strict";cc._RF.push(e,"4713dU7+TpFUZOf9knLzYu/","ExitGame");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Controller/LTrackerMgr"),a=t("../../Framework/UIBase"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.exitSpr=null,e}return r(e,t),e.prototype.start=function(){s.default.inst.expo("cx155923",{})},e.prototype.onClickAffirmBtn=function(){},e.prototype.onContinueGame=function(){s.default.inst.click("cx155923v.dx204435",{}),this.close()},e.prototype.onClose=function(){window.closeExitDialog()},i([u(cc.Sprite)],e.prototype,"exitSpr",void 0),i([l],e)}(a.default);o.default=p,cc._RF.pop()},{"../../Controller/LTrackerMgr":"LTrackerMgr","../../Framework/UIBase":"UIBase"}],FlyResMgr:[function(t,e,o){"use strict";cc._RF.push(e,"c7db02m2ORIbaUIYzhrhBS7","FlyResMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinPrefab=null,e.leYuanCoinSpr=null,e.coinPool=null,e}var o;return r(e,t),o=e,Object.defineProperty(e,"Inst",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._instance=this,this.coinPool=new cc.NodePool},e.prototype.getFlyResNode=function(){return this.coinPool.size()>0?this.coinPool.get():cc.instantiate(this.coinPrefab)},e.prototype.playFlyCoinAni=function(t,e){var o=this;t=this.node.convertToNodeSpaceAR(t),e=this.node.convertToNodeSpaceAR(e);var n=this.getFlyResNode();n.setPosition(t),this.node.addChild(n),n.stopAllActions(),Math.random();var r=new cc.Vec2(e.x-200,e.y-t.y);n.runAction(cc.sequence(cc.bezierTo(.6,[new cc.Vec2(t.x,t.y),r,new cc.Vec2(e.x,e.y)]).easing(cc.easeIn(1)),cc.callFunc(function(){o.coinPool.put(n)})))},e.prototype.flyAni=function(t,e){for(var o=this,n=0;n<6;n++)setTimeout(function(){o.playFlyCoinAni(t,e)},120*n)},i([c(cc.Prefab)],e.prototype,"coinPrefab",void 0),i([c(cc.SpriteFrame)],e.prototype,"leYuanCoinSpr",void 0),o=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],FlyTxtPool:[function(t,e,o){"use strict";cc._RF.push(e,"d1eb456XFxEWqxsx1npcyVp","FlyTxtPool"),Object.defineProperty(o,"__esModule",{value:!0}),o.FlyTxtPool=void 0;var n=t("../Res/NodePool"),r=t("./FlyTxt"),i=t("../../Define/UIDefs"),s=t("./UIMgr"),a=function(){function t(){}return t.init=function(t){var e=this;void 0===t&&(t=10),this._flyTxtPool||(this._flyTxtPool=new n.NodePool,this._flyTxtPool.setWaterMark(t),this._flyTxtPool.init("UIPrefab/Common/FlyTxt",function(){e._flyPoolReady=!0,e._flyNextTxt()}))},t.flyTxt=function(t,e,o){this._flyList.push({txt:t,pos:e,color:o}),this._flyTxtPool||this.init(),this._flyPoolReady&&this._flyNextTxt()},t._flyNextTxt=function(){var t=this;if(this._flyList.length>0&&this._currentShowCount<this._maxShowCount){var e=this._flyList.shift(),o=this._flyTxtPool.getNode();if(o){this._currentShowCount++;var n=o.getComponent(r.default);n.setTxt(e.txt,e.color);var a=s.default.inst.getLayer(i.LayerType.Tip);a.addChild(o),o.setPosition(a.convertToNodeSpaceAR(e.pos)),o.once(r.default.EVNENT_ON_FLY_ANI_COMPLETE,function(){t._currentShowCount--,t._flyTxtPool.freeNode(o),t._flyNextTxt()}),n.playFlyAni()}}},t._flyList=[],t._flyPoolReady=!1,t._maxShowCount=3,t._currentShowCount=0,t}();o.FlyTxtPool=a,cc._RF.pop()},{"../../Define/UIDefs":"UIDefs","../Res/NodePool":"NodePool","./FlyTxt":"FlyTxt","./UIMgr":"UIMgr"}],FlyTxt:[function(t,e,o){"use strict";cc._RF.push(e,"9e3772aotlL5qHiXIwuk7TB","FlyTxt");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTxt=null,e.flyAni=null,e}var o;return r(e,t),o=e,e.prototype.setTxt=function(t,e){this.lblTxt.string=t,this.lblTxt.node.color=e},e.prototype.playFlyAni=function(){var t=this;this.flyAni.play(void 0,0),this.flyAni.once("finished",function(){t.node.emit(o.EVNENT_ON_FLY_ANI_COMPLETE)},this)},e.EVNENT_ON_FLY_ANI_COMPLETE="FlyTxt.EVNENT_ON_FLY_ANI_COMPLETE",i([c(cc.Label)],e.prototype,"lblTxt",void 0),i([c(cc.Animation)],e.prototype,"flyAni",void 0),o=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],GameDrop:[function(t,e,o){"use strict";cc._RF.push(e,"10ee4q3Fj1EqL/k1k9nYCUB","GameDrop");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Common/Constant"),a=t("../../../Controller/LTrackerMgr"),c=t("../../../Framework/UIBase"),l=t("../../../System/GamingSystem"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.obstacleDrop=null,e.lblTitle=null,e.lblDes=null,e}return r(e,t),e.prototype.start=function(){this.initView(),this.cdClose()},e.prototype.initView=function(){var t=l.default.dropIdx;a.default.inst.expo("cx155987",{icount:t}),this.lblTitle.string="\u7b2c"+t+"\u8f6e\u6389\u843d";var e=l.default.getCurMapConfig(),o=e.aiDropCompound.length-t;this.lblDes.string=0==o?"\u6700\u540e\u4e00\u8f6e\u6389\u843d\u5566\uff0c\u80dc\u5229\u8fd1\u5728\u773c\u524d":"\u63a5\u4e0b\u6765\u8fd8\u6709"+o+"\u6b21\u6389\u843d\u54e6\uff0c\u79bb\u901a\u5173\u4e00\u6b65\u4e4b\u9065";var n=e.aiDropPoolsC,r=n[t]&&n[t]>0;this.obstacleDrop.active=r},e.prototype.cdClose=function(){var t=this;this.scheduleOnce(function(){t.close()},s.GAME_TIPS_SHOW_TIME)},i([f(cc.Node)],e.prototype,"obstacleDrop",void 0),i([f(cc.Label)],e.prototype,"lblTitle",void 0),i([f(cc.Label)],e.prototype,"lblDes",void 0),i([p],e)}(c.default);o.default=h,cc._RF.pop()},{"../../../Common/Constant":"Constant","../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Framework/UIBase":"UIBase","../../../System/GamingSystem":"GamingSystem"}],GameFail:[function(t,e,o){"use strict";cc._RF.push(e,"2541b73X8pIg4PUGedIuoNV","GameFail");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Framework/UIBase"),a=t("../../../System/GamingSystem"),c=t("../../../System/PlayerSystem"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.onClickReplayBtn=function(){c.default.startGame(),this.close()},e.prototype.onClickShareBtn=function(){a.default.backMainScene(),this.close()},i([u],e)}(s.default));o.default=p,cc._RF.pop()},{"../../../Framework/UIBase":"UIBase","../../../System/GamingSystem":"GamingSystem","../../../System/PlayerSystem":"PlayerSystem"}],GameGuide:[function(t,e,o){"use strict";cc._RF.push(e,"175abpcrc5E9YgK1LVarysd","GameGuide");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Controller/LTrackerMgr"),a=t("../../../Framework/UIBase"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){s.default.inst.expo("cx155979",{})},i([l],e)}(a.default));o.default=u,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Framework/UIBase":"UIBase"}],GamePause:[function(t,e,o){"use strict";cc._RF.push(e,"631a0T7HR5KYp4HZ1pL8vfE","GamePause");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Controller/LTrackerMgr"),a=t("../../../Framework/UIBase"),c=t("../../../System/GamingSystem"),l=t("../../../System/PlayerSystem"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){s.default.inst.expo("cx155971",{}),c.default.setPause(!0)},e.prototype.onClickBackMainBtn=function(){s.default.inst.click("cx155971.dx204571",{}),c.default.backMainScene(),this.close()},e.prototype.onClickReplayBtn=function(){s.default.inst.click("cx155971.dx204579",{}),l.default.startGame(),this.close()},e.prototype.onClickContinueBtn=function(){s.default.inst.click("cx155971.dx204563",{}),c.default.setPause(!1),this.close()},i([p],e)}(a.default));o.default=f,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Framework/UIBase":"UIBase","../../../System/GamingSystem":"GamingSystem","../../../System/PlayerSystem":"PlayerSystem"}],GameSettlement:[function(t,e,o){"use strict";cc._RF.push(e,"991b26S9VVK8KAXEK6o1uh9","GameSettlement");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Controller/LTrackerMgr"),a=t("../../../Controller/ShareMgr"),c=t("../../../Framework/UIBase"),l=t("../../../Framework/Utils/Utils"),u=t("../../../System/GamingSystem"),p=t("../../../System/PlayerSystem"),f=t("../../Scene/Game"),h=cc._decorator,d=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTime=null,e.lblCoin=null,e.succNode=null,e.failNode=null,e._isSucc=!1,e}return r(e,t),e.prototype.start=function(){this.initView()},e.prototype.initView=function(){var t=f.Game.inst.getPlayTime(),e=l.default.getFormatingTimeStr(t);this.lblTime.string="\u6e38\u620f\u65f6\u95f4\uff1a"+e,this.lblCoin.string="x"+this._para.CoinNum;var o=this._para.isSucc;this.succNode.active=o,this.failNode.active=!o,this._isSucc=o,o?s.default.inst.expo("cx156019",{iplaytime:t,irise:u.default.isRevive?0:1,icount:this._para.CoinNum}):s.default.inst.expo("cx156027",{failurereason:u.default.failType,irise:u.default.isRevive?0:1,droptimes:u.default.dropIdx})},e.prototype.onClickReplayBtn=function(){s.default.inst.click("cx156027.dx204627",{}),p.default.startGame(),this.close()},e.prototype.onClickSuccShareBtn=function(){s.default.inst.click("cx156019.dx204611",{}),u.default.backMainScene(),a.default.inst.share(a.ShareContent.TONGYONG,function(){s.default.inst.expo("cx156035",{stype:1,spage:2})},function(){s.default.inst.expo("cx156035",{stype:2,spage:2})})},e.prototype.onClickFailShareBtn=function(){s.default.inst.click("cx156027.dx204635",{}),u.default.backMainScene(),a.default.inst.share(a.ShareContent.TONGYONG,function(){s.default.inst.expo("cx156035",{stype:1,spage:3})},function(){s.default.inst.expo("cx156035",{stype:2,spage:3})})},e.prototype.onClickCloseBtn=function(){this._isSucc?s.default.inst.click("cx156019.dx204619",{}):s.default.inst.click("cx156027.dx204643",{}),u.default.backMainScene(),this.close()},i([_(cc.Label)],e.prototype,"lblTime",void 0),i([_(cc.Label)],e.prototype,"lblCoin",void 0),i([_(cc.Node)],e.prototype,"succNode",void 0),i([_(cc.Node)],e.prototype,"failNode",void 0),i([d],e)}(c.default);o.default=y,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/ShareMgr":"ShareMgr","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../System/GamingSystem":"GamingSystem","../../../System/PlayerSystem":"PlayerSystem","../../Scene/Game":"Game"}],GameTips:[function(t,e,o){"use strict";cc._RF.push(e,"64e5ddMR9VBSKzt1QJQQ40O","GameTips");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Common/Constant"),a=t("../../../Framework/UIBase"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblTitle=null,e.lblDes=null,e._tipData=null,e}return r(e,t),e.prototype.start=function(){this.initView(),this.cdClose()},e.prototype.initView=function(){var t=this._para;this._tipData=t,this.lblTitle.string=t.title,this.lblDes.node.active=null!=t.describe,t.describe&&(this.lblDes.string=t.describe)},e.prototype.cdClose=function(){var t=this;this.scheduleOnce(function(){t._tipData.closeHandle&&t._tipData.closeHandle(),t.close()},s.GAME_TIPS_SHOW_TIME)},i([u(cc.Label)],e.prototype,"lblTitle",void 0),i([u(cc.Label)],e.prototype,"lblDes",void 0),i([l],e)}(a.default);o.default=p,cc._RF.pop()},{"../../../Common/Constant":"Constant","../../../Framework/UIBase":"UIBase"}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"58a08xGvSBAA6hqKVzIw7+s","Game");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Game=void 0;var s=t("../../Common/Constant"),a=t("../../Controller/LTrackerMgr"),c=t("../../Controller/TableMgr"),l=t("../../Define/EventId"),u=t("../../Define/UIDefs"),p=t("../../Framework/Event/EventMgr"),f=t("../../Framework/Scene/SceneBase"),h=t("../../Framework/UI/UIMgr"),d=t("../../Framework/Utils/Utils"),_=t("../../System/AudioSystem"),y=t("../../System/GamingSystem"),v=t("../UI/Game/PropItemController"),m=cc._decorator,g=m.ccclass,b=m.property,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.removeBubble=null,e.hintProp=null,e.removeProp=null,e.progressBar=null,e.dropBar=null,e.brightStars=[],e.lblDropBatch=null,e.dropNode=null,e.timeNode=null,e.lblSeason=null,e.lblTime=null,e.DROP_MAX_COUNT=3,e.SHOW_COUNT_DOWN_TIME=20,e}var o;return r(e,t),o=e,Object.defineProperty(e.prototype,"timer",{get:function(){return this._timer},set:function(t){this._timer=t,t<0&&(this._timer=0),t>this._fullTime&&(this._timer=this._fullTime);var e=this.timer/this._fullTime;this.progressBar.progress=e},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o.inst=this,this.init(),this.initDefault()},e.prototype.start=function(){_.default.initialize(),this.bindPropCmpt(),this.refreshDropBatchUI(),this.checkDialog(),this.initSeasonLabel(),a.default.inst.expo("cx155955",{})},e.prototype.init=function(){var t=c.TABLE.getLevel(y.default.level);this._fullTime=t.iTime,this.timer=this._fullTime,this._passTime=0},e.prototype.getPlayTime=function(){return Math.ceil(1e3*this._passTime)},e.prototype.update=function(t){y.default.inPlaying()&&(this._passTime+=t,this.timer<=0||0!=this._fullTime&&(this.timer-=t,this.timer<=0&&p.EVENT.emit(l.EventId.ON_GAME_TIME_OVER),this.timer<=this.SHOW_COUNT_DOWN_TIME?(this.lblTime.node.active=!0,this.lblTime.string=Math.floor(this.timer)+"\u79d2"):this.lblTime.node.active=!1))},e.prototype.onEnable=function(){p.EVENT.on(l.EventId.ON_GAME_REVIVE_SUCC,this.onGameReviveSucc,this),p.EVENT.on(l.EventId.ON_DROP_NEW_PIC,this.refreshDropBatchUI,this),p.EVENT.on(l.EventId.ON_USING_REMOVE_OBSTACLE,this.showRemoveBubble,this)},e.prototype.onDisable=function(){p.EVENT.off(l.EventId.ON_GAME_REVIVE_SUCC,this.onGameReviveSucc,this),p.EVENT.off(l.EventId.ON_DROP_NEW_PIC,this.refreshDropBatchUI,this),p.EVENT.off(l.EventId.ON_USING_REMOVE_OBSTACLE,this.showRemoveBubble,this)},e.prototype.initDefault=function(){var t="1"!=y.default.level;this.dropNode.active=t,this.timeNode.active=t},e.prototype.onGameReviveSucc=function(){y.default.gameComplete=!1,h.default.inst.showToast("\u7ee7\u7eed\u6e38\u620f");var t=this._fullTime*Number(c.TABLE.getGlobalById("G003").sGlobalData)/100;this.timer=Math.min(this._fullTime,this.timer+t)},e.prototype.bindPropCmpt=function(){this.hintProp.getComponent(v.default).bind(s.PROP_ID.Hint),this.removeProp.getComponent(v.default).bind(s.PROP_ID.RemoveObstacle)},e.prototype.refreshDropBatchUI=function(){var t=y.default.dropIdx;this.lblDropBatch.string="\u6389\u843d\u8f6e\u6b21\uff1a"+t,this.brightStars.forEach(function(e,o){e.active=o<t}),this.dropBar.progress=t/this.DROP_MAX_COUNT},e.prototype.showRemoveBubble=function(t){this.removeBubble.active=t},e.prototype.onClickPauseBtn=function(){h.default.inst.open(u.UIType.GamePause)},e.prototype.checkDialog=function(){y.default.tutorialFlag?y.default.difficultySpike&&(y.default.difficultySpike=!1,h.default.inst.open(u.UIType.GameTips,{title:"\u96be\u5ea6\u98d9\u5347",describe:"\u6d88\u9664\u6240\u6709\u5143\u7d20\u5373\u53ef\u901a\u5173\n\u8bf7\u8c28\u614e\u8d70\u6bcf\u4e00\u6b65\u54e6~"})):h.default.inst.open(u.UIType.GameGuide)},e.prototype.initSeasonLabel=function(){var t=new Date(c.TABLE.getGlobalById("G004").sGlobalData).getTime(),e=d.default.getServerTime(),o=Math.ceil((e-t)/864e5);o=Math.max(1,o);var n="\u7b2c"+d.default.getFormatingNum(o,3)+"\u671f";console.log("initSeasonLabel.................",n),this.lblSeason.string=n},i([b(cc.Node)],e.prototype,"removeBubble",void 0),i([b(cc.Node)],e.prototype,"hintProp",void 0),i([b(cc.Node)],e.prototype,"removeProp",void 0),i([b(cc.ProgressBar)],e.prototype,"progressBar",void 0),i([b(cc.ProgressBar)],e.prototype,"dropBar",void 0),i([b([cc.Node])],e.prototype,"brightStars",void 0),i([b(cc.Label)],e.prototype,"lblDropBatch",void 0),i([b(cc.Node)],e.prototype,"dropNode",void 0),i([b(cc.Node)],e.prototype,"timeNode",void 0),i([b(cc.Label)],e.prototype,"lblSeason",void 0),i([b(cc.Label)],e.prototype,"lblTime",void 0),o=i([g],e)}(f.default);o.Game=I,cc._RF.pop()},{"../../Common/Constant":"Constant","../../Controller/LTrackerMgr":"LTrackerMgr","../../Controller/TableMgr":"TableMgr","../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/UI/UIMgr":"UIMgr","../../Framework/Utils/Utils":"Utils","../../System/AudioSystem":"AudioSystem","../../System/GamingSystem":"GamingSystem","../UI/Game/PropItemController":"PropItemController"}],GamingSystem:[function(t,e,o){"use strict";cc._RF.push(e,"57e3cDXUUNASKXbYcCYlCD6","GamingSystem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Controller/TableMgr"),r=t("../Define/Define"),i=t("../Framework/Scene/SceneMgr"),s=function(){function t(){this.gameOver=!1,this.gameComplete=!1,this.gamePause=!1,this._isRevive=!1,this.dropIdx=0,this.failType=null,this.tutorialFlag=!0,this.difficultySpike=!1,this.isSettlement=!1}return t.prototype.init=function(){this.gameOver=!1,this.gameComplete=!1,this.gamePause=!1,this._isRevive=!1,this.dropIdx=0,this.failType=null,this.isSettlement=!1},t.prototype.setPause=function(t){this.gamePause=t},t.prototype.inPlaying=function(){return!(this.gamePause||this.gameOver||this.gameComplete)},Object.defineProperty(t.prototype,"isRevive",{get:function(){return this._isRevive},set:function(t){this._isRevive=!!t},enumerable:!1,configurable:!0}),t.prototype.startGame=function(t){this.init(),this.level=t,i.SCENE.loadScene(r.SceneType.Game)},t.prototype.backGame=function(){this.gamePause=!1},t.prototype.backMainScene=function(){i.SCENE.loadScene(r.SceneType.Main)},t.prototype.getCirclePosByAngle=function(t,e){return{x:e*Math.sin(Math.PI/180*(90-t)),y:e*Math.sin(Math.PI/180*t)}},t.prototype.getCurMapConfig=function(){var t=n.TABLE.getLevel(this.level).sMapId;return n.TABLE.getMap(t)},t.prototype.addDropBatch=function(){this.dropIdx++},t}();o.default=new s,cc._RF.pop()},{"../Controller/TableMgr":"TableMgr","../Define/Define":"Define","../Framework/Scene/SceneMgr":"SceneMgr"}],GetItemLayer:[function(t,e,o){"use strict";cc._RF.push(e,"98577r05z9PWZ/XC7x4l6DE","GetItemLayer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Common/AudioConfig"),a=t("../../Controller/LTrackerMgr"),c=t("../../Define/EventId"),l=t("../../Framework/Event/EventMgr"),u=t("../../Framework/UIBase"),p=t("../../System/AudioSystem"),f=cc._decorator,h=f.ccclass,d=f.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelAmount=null,e.propSpr=null,e.smallPropSpr=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.show()},e.prototype.onDisable=function(){},e.prototype.onDestroy=function(){},e.prototype.show=function(){p.default.play(s.AUDIOS_PATH.get_reward);var t=this._para[0];this.labelAmount.string="x"+t.num.toString(),a.default.inst.expo("cx156043",{icount:t.num})},e.prototype.collect=function(){this.close()},e.prototype.close=function(){console.log("onClose ....................",this.smallPropSpr);var e=this.smallPropSpr.node.parent.convertToWorldSpaceAR(this.smallPropSpr.node.position);l.EVENT.emit(c.EventId.ON_PLAY_RESOURCE_FLY_ANI,e),t.prototype.close.call(this)},i([d(cc.Label)],e.prototype,"labelAmount",void 0),i([d(cc.Sprite)],e.prototype,"propSpr",void 0),i([d(cc.Sprite)],e.prototype,"smallPropSpr",void 0),i([h],e)}(u.default);o.default=_,cc._RF.pop()},{"../../Common/AudioConfig":"AudioConfig","../../Controller/LTrackerMgr":"LTrackerMgr","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UIBase":"UIBase","../../System/AudioSystem":"AudioSystem"}],GetPower:[function(t,e,o){"use strict";cc._RF.push(e,"8ef961YV8BI37RRFyQmAHgZ","GetPower");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Controller/LTrackerMgr"),l=t("../../../Controller/TurnTaskController"),u=t("../../../Framework/UI/UIFacade"),p=t("../../../Framework/UIBase"),f=t("../../../System/PlayerSystem"),h=t("./LifeSystem"),d=cc._decorator,_=d.ccclass,y=(d.property,d.menu),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){c.default.inst.expo("cx224100",{})},e.prototype.onWatchAbs=function(){return s(this,void 0,void 0,function(){var t=this;return a(this,function(){return l.default.inst.getProp("D005",function(e){t.setData(e),c.default.inst.click("cx224100.dx333092",{isuccess:1})},function(){c.default.inst.click("cx224100.dx333092",{isuccess:0}),u.UIFacade.showToast("\u6d4f\u89c8\u65f6\u95f4\u4e0d\u8db3\uff0c\u8bf7\u518d\u8bd5\u8bd5\u54e6~")}),[2]})})},e.prototype.setData=function(t){t.energy&&h.default.initialize(t.energy,t.infiniteEnergyAdNum),this.close(),f.default.startGame()},i([_,y("\u997f\u4e86\u4e48/GetPower")],e)}(p.default);o.default=v,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/TurnTaskController":"TurnTaskController","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../System/PlayerSystem":"PlayerSystem","./LifeSystem":"LifeSystem"}],GuideAbility:[function(t,e,o){"use strict";cc._RF.push(e,"d773bqDIZ9J9oWlN9dgIoNm","GuideAbility");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(){function t(){this.target=null,this.name=""}return i([c({type:cc.Node,displayName:"\u8282\u70b9"})],t.prototype,"target",void 0),i([c({displayName:"\u914d\u7f6e\u540d"})],t.prototype,"name",void 0),i([a("GuideItem")],t)}(),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.guideItems=[],e}return r(e,t),e.prototype.getGuideItem=function(t){for(var e=0;e<this.guideItems.length;++e)if(this.guideItems[e].name==t)return this.guideItems[e].target;return null},i([c({type:[l],displayName:"\u5f15\u5bfc\u8282\u70b9"})],e.prototype,"guideItems",void 0),i([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],GuideEvent:[function(t,e,o){"use strict";cc._RF.push(e,"dda8aQ+c0hPE4qHRddhNnOh","GuideEvent");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../Event/EventMgr"),c=t("../../Define/EventId"),l=cc._decorator,u=l.ccclass,p=l.property;(function(t){t[t.open=0]="open",t[t.close=1]="close"})(s||(s={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.params="",e.sendChance=s.open,e}return r(e,t),e.prototype.onLoad=function(){this.sendChance==s.open&&a.default.inst.emit(c.EventId.ON_GUIDE_NEXT_TRIGGER,this.params)},e.prototype.onDestroy=function(){this.sendChance==s.close&&a.default.inst.emit(c.EventId.ON_GUIDE_NEXT_TRIGGER,this.params)},i([p({displayName:"\u6d3e\u53d1\u4e8b\u4ef6"})],e.prototype,"params",void 0),i([p({type:cc.Enum(s),displayName:"\u6d3e\u53d1\u65f6\u673a"})],e.prototype,"sendChance",void 0),i([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../Define/EventId":"EventId","../Event/EventMgr":"EventMgr"}],Handler:[function(t,e,o){"use strict";cc._RF.push(e,"bb19cbiRV9AtbVU8Xzku9i+","Handler"),Object.defineProperty(o,"__esModule",{value:!0}),o.Handler=void 0;var n=function(){function t(t,e,o,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=!1),this.once=!1,this._id=0,this.setTo(t,e,o,n)}return t.prototype.setTo=function(e,o,n,r){return void 0===r&&(r=!1),this._id=t._gid++,this.caller=e,this.method=o,this.args=n,this.once=r,this},t.prototype.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},t.prototype.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var o=this.method.apply(this.caller,this.args);else o=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),o},t.prototype.clear=function(){return this.caller=null,this.method=null,this.args=null,this},t.prototype.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,o,n,r){return void 0===n&&(n=null),void 0===r&&(r=!0),t._pool.length?t._pool.pop().setTo(e,o,n,r):new t(e,o,n,r)},t._pool=[],t._gid=1,t}();o.Handler=n,cc._RF.pop()},{}],HashMap:[function(t,e,o){"use strict";cc._RF.push(e,"c5683xzu09P04/rmW8wbPze","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this._data={},t&&(this._data=t)}return t.prototype.get=function(t){return this._data[t]||[]},t.prototype.add=function(t,e){this._data[t]||(this._data[t]=[]),this._data[t].push(e)},t.prototype.set=function(t,e){this._data[t]=e},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this._data)},enumerable:!1,configurable:!0}),t.prototype.del=function(t){delete this._data[t]},t.prototype.clear=function(){this._data={}},t}();o.default=n,cc._RF.pop()},{}],Helper:[function(t,e,o){"use strict";cc._RF.push(e,"fa96b3P7PlCvLR5kb5g41Q2","Helper");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.timeFormat=function(t,e){void 0===e&&(e=!1);var o=Math.floor(t/60),n=t%60;return e?Math.floor(o/60).toString().padStart(2,"0")+":"+(o%60).toString().padStart(2,"0")+":"+n.toString().padStart(2,"0"):o.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},e.prototype.getContent=function(t,e){if(e&&t)for(var o in e)t=t.replace("{{ "+o+" }}",e[o].toString());return t},e.prototype.verbatim=function(t){return i(this,function(e){switch(e.label){case 0:return t.hasOwnProperty("length")?[5,s(t)]:[2];case 1:return e.sent(),[2]}})},e.prototype.labelVerbatim=function(t,e,o){var n=this;void 0===o&&(o=.05);var r=this.verbatim(e);return t.string="",new Promise(function(i){n.schedule(function(){var e=r.next();e.done?i():t.string+=e.value},o,e.length)})},e.prototype.isNormalScreen=function(){return cc.winSize.height/cc.winSize.width<1.78},e}(cc.Component);o.default=new a,cc._RF.pop()},{}],HttpRequest:[function(t,e,o){"use strict";cc._RF.push(e,"49b29pyN75LeJmjTJ+3L0nc","HttpRequest"),Object.defineProperty(o,"__esModule",{value:!0}),o.HttpRequest=void 0;var n=t("../../Controller/MtopMgr"),r=t("../../Network/NetApi"),i=t("../../Network/NetBase"),s=t("../Tools/BaseInfo"),a=function(){function t(){}return Object.defineProperty(t,"sBaseURL",{get:function(){var t=(window.location.protocol||"http:")+"//"+this._serverUrl;return cc.sys.isNative?t="http://"+this._serverUrl:window.wx&&(t="https://"+this._serverUrl),t},enumerable:!1,configurable:!0}),t.setServerUrl=function(t){this._serverUrl=t},t.get=function(t,e,o,n){return void 0===o&&(o={"Content-Type":"application/json"}),void 0===n&&(n=5),this._doHttp(this._combURL(t,e),{},o,"GET",n)},t.post=function(e,o,n,r,i){return void 0===r&&(r={"Content-Type":"application/json"}),void 0===i&&(i=5),t.isWeb?this._doHttp(this._combURL(e,o),n,r,"POST",i):this._doMtop(e,n)},t._doMtop=function(t,e){var o=r.NetApi.Apis,i="";for(var a in o)t==o[a]&&(i=a);return n.default.inst.dispatch(s.default.BIZ_SCENE,i,e)},t._doHttp=function(t,e,o,n){var r=this;return t=i.NetBase.sBaseURL+t,new Promise(function(i,s){var a=new XMLHttpRequest;a.responseType="text",a.onreadystatechange=function(){if(cc.log("HttpMgr, onReadyStateChange, readyState="+a.readyState+", status="+a.status),4===a.readyState&&a.status>=200&&a.status<300){cc.log("HttpMgr, onReadyStateChange, responseText="+a.responseText);var t={};try{t=JSON.parse(a.responseText)}catch(e){cc.error(e)}r._removeXhrEvent(a),i(t)}},a.ontimeout=function(){cc.warn(t+", request ontimeout"),r._removeXhrEvent(a),s()},a.onerror=function(){cc.warn(t+", request onerror"),r._removeXhrEvent(a),s()},a.onabort=function(){cc.warn(t+", request onabort"),r._removeXhrEvent(a),s()},cc.log("HttpMgr, doHttp url="+t+", method="+n),a.open(n,t,!0),o&&r._setHttpHeaders(a,o),e&&"object"==typeof e?a.send(JSON.stringify(e)):a.send()})},t._combURL=function(t,e){return t+="?",Object.keys(e).forEach(function(o){t+=o+"="+e[o]+"&"}),t.slice(0,t.length-1)},t._combData=function(t){var e="";return Object.keys(t).forEach(function(o){e+=o+"="+t[o]+"&"}),e.slice(0,e.length-1)},t._removeXhrEvent=function(t){t.ontimeout=null,t.onerror=null,t.onabort=null,t.onreadystatechange=null},t._setHttpHeaders=function(t,e){for(var o in e)t.setRequestHeader(o,e[o])},t.isWeb=!1,t}();o.HttpRequest=a,cc._RF.pop()},{"../../Controller/MtopMgr":"MtopMgr","../../Network/NetApi":"NetApi","../../Network/NetBase":"NetBase","../Tools/BaseInfo":"BaseInfo"}],ICallbackOwner:[function(t,e,o){"use strict";cc._RF.push(e,"0ed0fxZQntJ4I9INCD5TJIf","ICallbackOwner"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LTrackerMgr:[function(t,e,o){"use strict";cc._RF.push(e,"b7b91eL6NlOOL6Og+4YLkoP","LTrackerMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this._spm="a2ogi.bx903203",this._sdk=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){this._sdk=window.LTracker},t.prototype.expo=function(t,e){void 0===e&&(e={}),this._sdk?(t=this._spm+"."+t,this._sdk.expo(t,"up",e)):console.error("NO LTracker")},t.prototype.click=function(t,e){void 0===e&&(e={}),console.log(e,"\u57cb\u70b9\u4fe1\u606f"),this._sdk?(t=this._spm+"."+t,this._sdk.click(t,e)):console.error("NO LTracker")},t}();o.default=n,cc._RF.pop()},{}],LifeShowController:[function(t,e,o){"use strict";cc._RF.push(e,"de64cWJqgdLvIQapb8aq5o4","LifeShowController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Controller/TableMgr"),a=t("../../../Define/EventId"),c=t("../../../Define/UIDefs"),l=t("../../../Framework/Event/EventMgr"),u=t("../../../Framework/UI/UIFacade"),p=t("../../../Framework/UI/UIMgr"),f=t("../../../Framework/Utils/Utils"),h=t("./LifeSystem"),d=cc._decorator,_=d.ccclass,y=d.property,v=d.menu,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelLifeLeft=null,e.labelTimer=null,e.nodeMore=null,e._nextRefreshTime=null,e._timer=0,e}return r(e,t),e.prototype.onLoad=function(){l.EVENT.on(a.EventId.ON_UPDATE_STAMINA,this.initTick,this)},e.prototype.onDestroy=function(){l.EVENT.off(a.EventId.ON_UPDATE_STAMINA,this.initTick,this)},e.prototype.start=function(){this.initTick()},e.prototype.initTick=function(){this.unscheduleAllCallbacks(),h.default.updateEnergy();var t=h.default.getEnergy(),e=Number(s.TABLE.getGlobalById("G005").sGlobalData);this.labelLifeLeft.string=t.num.toString()+"/"+e;var o=f.default.getServerTime()-t.lastUpdateTime,n=1e3*Number(s.TABLE.getGlobalById("G006").sGlobalData),r=Math.ceil(o/n);this._nextRefreshTime=t.lastUpdateTime+r*n,this.unschedule(this.refreshTimeStr),this.schedule(this.refreshTimeStr,1),this.refreshTimeStr()},e.prototype.refreshTimeStr=function(){var t=h.default.isFullEndTime-f.default.getServerTime();h.default.isFullEndTime>f.default.getServerTime()?(this.nodeMore.active=!0,h.default.isFull=!0):(h.default.isFull=!1,this.nodeMore.active=!1),h.default.isFull?(this.labelTimer.string=f.default.getFormatingTimeStr(t),this.labelLifeLeft.node.active=!1):(this.labelTimer.string="\u65e0\u9650\u6311\u6218\u6b21\u6570",this.labelLifeLeft.node.active=!0),t<0&&this.initTick()},e.prototype.onClick=function(){h.default.isFull?u.UIFacade.showToast("\u5f53\u524d\u662f\u65e0\u9650\u6311\u6218\u65f6\u95f4\uff0c\u5feb\u53bb\u6311\u6218\u5427!"):p.default.inst.open(c.UIType.MorePower)},i([y(cc.Label)],e.prototype,"labelLifeLeft",void 0),i([y(cc.Label)],e.prototype,"labelTimer",void 0),i([y(cc.Node)],e.prototype,"nodeMore",void 0),i([_,v("\u997f\u4e86\u4e48/TiliShowController")],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/Utils/Utils":"Utils","./LifeSystem":"LifeSystem"}],LifeSystem:[function(t,e,o){"use strict";cc._RF.push(e,"7de95z783pCkIU5z7OIqfAU","LifeSystem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../Controller/TableMgr"),s=t("../../../Define/EventId"),a=t("../../../Framework/Event/EventMgr"),c=t("../../../Framework/Utils/Utils"),l=function(t){function e(){var e=t.call(this)||this;return e._energy=null,e._isFull=!1,e._isFullEndTime=0,e._infiniteEnergyAdNum=0,e}return r(e,t),e.prototype.initialize=function(t,e){void 0===e&&(e=0),console.log("Life system update........",t),this._energy=t,this.isFullEndTime=t.infiniteEndTime,c.default.getServerTime()>t.infiniteEndTime?this._isFull=!1:this._isFull=!0,e&&(this._infiniteEnergyAdNum=e),this.updateEnergy(),a.EVENT.emit(s.EventId.ON_UPDATE_STAMINA)},e.prototype.lifeIsEmpty=function(){return 0===this._energy.num},e.prototype.updateEnergy=function(){var t=this._energy.lastUpdateTime,e=this._energy.num,o=c.default.getServerTime()-t,n=Number(i.TABLE.getGlobalById("G005").sGlobalData),r=1e3*Number(i.TABLE.getGlobalById("G006").sGlobalData);if(o>r&&e<n){var s=Math.floor(o/r);this._energy.num=Math.min(n,this._energy.num+s),this._energy.lastUpdateTime+=s*r}},e.prototype.getEnergy=function(){return this._energy},e.prototype.getEnergyNum=function(){return this._energy.num},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._isFull},set:function(t){this._isFull=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFullEndTime",{get:function(){return this._isFullEndTime},set:function(t){this._isFullEndTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infiniteEnergyAdNum",{get:function(){return this._infiniteEnergyAdNum||0},set:function(t){this._infiniteEnergyAdNum=t},enumerable:!1,configurable:!0}),e}(cc.Component);o.default=new l,cc._RF.pop()},{"../../../Controller/TableMgr":"TableMgr","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/Utils/Utils":"Utils"}],ListViewOptimizer:[function(t,e,o){"use strict";cc._RF.push(e,"32d9e6Poj1Ak48G6b7J8+v0","ListViewOptimizer");var n,r,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Bottom=2]="Bottom"}(r||(r={}));var a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemTemplate=null,e.arrow=null,e.spacing=0,e.initNum=1,e.initIdx=1,e.cacheNum=2,e.initType=r.Top,e.data=[],e.rowNum=0,e.isVertical=!0,e.itemNum=0,e.canUpdateFrame=!0,e.items=[],e.topIdx=0,e.downIdx=0,e.isInit=!1,e.lastContentPos=0,e.isRefresh=!1,e.arrowNode=null,e.nodeDesc="listview",e.itemsPos=[],e.jumpFinished=!1,e}return i(e,t),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this.listview},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.listview=this.node.getComponent(cc.ScrollView),this.content=this.listview.content,this.content.on(cc.Node.EventType.POSITION_CHANGED,this._updateContentView.bind(this)),this.isVertical=this.listview.vertical,this.itemNum=this.initNum+this.cacheNum,this.isVertical||(this.content.anchorX=0,this.content.anchorY=.5,this.content.x=-this.listview.node.width/2,this.content.y=0)},e.prototype.setData=function(t,e,o){void 0===o&&(o=!1);var n=this.items.length-t.length;n>0&&this.items.splice(t.length,n),this.isRefresh=this.items.length>0,this.isInit=!1,this.canUpdateFrame=!0,this.itemNum=Math.min(t.length,this.initNum+this.cacheNum),this.isInit=this.initialize(t,e,0==this.items.length||o),this._createArrow()},e.prototype._createArrow=function(){var t=this.listview.content.width,e=this.listview.node.width,o=-90;if(this.isVertical&&(t=this.listview.content.height,e=this.listview.node.height,o=0),this.arrowNode=this.listview.node.getChildByName("_arrow_"),!(!this.arrow||t<=e||this.arrowNode)){this.arrowNode=cc.instantiate(this.arrow),this.arrowNode.parent=this.listview.node,this.arrowNode.angle=o,this.arrowNode.name="_arrow_";var n=cc.v2(this.listview.node.width-this.arrowNode.height/2-20,0);this.isVertical&&(n=cc.v2(0,-this.listview.node.height/2+this.arrowNode.height/2+20)),this.arrowNode.setPosition(n)}},e.prototype.setArrowPosition=function(t){this.arrowNode&&this.arrowNode.setPosition(t)},e.prototype.hideArrow=function(){this.arrowNode&&(this.arrowNode.active=!1)},e.prototype.showArrow=function(){this.arrowNode&&(this.arrowNode.active=!0)},e.prototype.initialize=function(t,e,o){if(!(e&&t&&0!==t.length&&this.itemTemplate&&this.listview))return t&&0===t.length&&this.content.removeAllChildren(),cc.log("\u521d\u59cb\u5316\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6240\u6709\u5fc5\u8981\u53c2\u6570"),!1;var n=Math.min(this.initIdx+this.itemNum-1,t.length);if(!this.isRefresh&&this.initIdx>n)return cc.log("\u521d\u59cb\u5316\u4f4d\u7f6e\u9519\u8bef "+this.initIdx),!1;this.data=t,this.rowNum=t.length,this.itemUpdateFunc=e,this.content.removeAllChildren(),this.content.getComponent(cc.Layout)&&this.content.removeComponent(cc.Layout);var r=0,i=0,s=this.initIdx;this.initIdx+this.itemNum>this.data.length&&(this.initIdx=this.data.length-this.itemNum+1);var a=this.initIdx,c=n;this.isRefresh&&(c=Math.min(this.downIdx+1,this.rowNum),a=(c=Math.max(this.itemNum,c))-this.itemNum+1),this.itemsPos=[];var l=1;this.isVertical&&(l=-1);for(var u=0;u<t.length;u++){var p=this.items[i];p||(this.items.length<this.itemNum?(p=cc.instantiate(this.itemTemplate),this.items.push(p)):p=this.items[this.items.length-1]),this.itemUpdateFunc(u,p,this.data[u]);var f=this.isVertical?p.height:p.width;if(r+=f+this.spacing,this.itemsPos.push(l*(r-f)),Number(u)+1>=a&&Number(u)+1<=c){this.content.addChild(p);var h=0,d=0;this.isVertical?(d=f/2-r,h=this.spacing+p.width/2-this.content.width/2):(h=r-f/2,d=this.spacing+p.height/2-this.content.height/2),p.x=h,p.y=d,i++}}return this.itemUpdateFunc(c-1,this.items[this.items.length-1],this.data[c-1]),r+=this.spacing,this.topIdx=a-1,this.downIdx=c-1,this.isVertical?this.content.height=r:this.content.width=r,o&&this.jumpTo(s-1),!0},e.prototype.getPositionInView=function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.listview.node.convertToNodeSpaceAR(e)},e.prototype.getItem=function(t){for(var e=this.content.childrenCount,o=0;o<e;++o){var n=this.content.children[o],r=n.getPosition();if(r=n.parent.convertToWorldSpaceAR(r),r=cc.director.getScene().convertToNodeSpaceAR(r),cc.rect(r.x-n.width/2,r.y-n.height/2,n.width,n.height).contains(t))return n}return null},e.prototype.getItemsHeight=function(){for(var t=0,e=0;e<this.items.length;e++){var o=this.items[e],n=this.isVertical?o.height:o.width;t+=n+=this.spacing}return t},e.prototype.getItemsLength=function(t){for(var e=0,o=0;o<t;o++){var n=this.items[o],r=this.isVertical?n.height:n.width;e+=r+=this.spacing}var i=this.items[t-1];return e-(this.isVertical?i.height:i.width)/2-this.spacing},e.prototype._updateContentView=function(t){if(this.isInit&&this.canUpdateFrame){var e=this.content.x;this.isVertical&&(e=this.content.y),this.canUpdateFrame=!1;var o=e>this.lastContentPos;this.isVertical&&(o=e<=this.lastContentPos);for(var n=this.getItemsHeight(),r=n/2,i=0;i<this.items.length;i++){var s=this.items[i],a=this.getPositionInView(s);if(o){if(this.isVertical&&a.y<-r&&(t||this.topIdx-1>=0)||!this.isVertical&&a.x>r&&(t||this.topIdx-1>=0)){this.topIdx--;var c=this.topIdx,l=0;this.topIdx<0&&(c=this.rowNum-1,this.topIdx=0,l=-1),this.downIdx=this.topIdx+this.items.length-1+l;var u=this.isVertical?s.height:s.width;this.itemUpdateFunc(c,s,this.data[c]);var p=s.width,f=-1,h="x";this.isVertical&&(p=s.height,f=1,h="y"),s[h]=s[h]+f*(n+(p-u)/2)}}else(this.isVertical&&a.y>r&&(t||this.downIdx+1<=this.rowNum-1)||!this.isVertical&&a.x<-r&&(t||this.downIdx+1<=this.rowNum-1))&&(this.downIdx++,c=this.downIdx,l=0,this.downIdx>this.rowNum-1&&(this.downIdx=this.rowNum-1,c=0,l=1),this.topIdx=this.downIdx-this.items.length+1+l,u=this.isVertical?s.height:s.width,this.itemUpdateFunc(c,s,this.data[c]),p=s.width,f=1,h="x",this.isVertical&&(p=s.height,f=-1,h="y"),s[h]=s[h]+f*(n+(p-u)/2))}this.lastContentPos=this.isVertical?this.listview.content.y:this.listview.content.x,this.canUpdateFrame=!0,this.showArrow(),(this.isVertical&&this.lastContentPos+this.listview.node.height/2>=this.listview.content.height||!this.isVertical&&Math.abs(this.lastContentPos)-this.listview.node.width/2>=this.listview.content.width)&&this.hideArrow()}},e.prototype.scrollTo=function(t,e){void 0===e&&(e=.1);var o=this.itemsPos[t],n=0,r=0;this.isVertical?r=Math.abs(o):n=o,this.listview.scrollToOffset(cc.v2(n,r),e)},e.prototype._getDownIdxs=function(t){var e=this.listview.node.width;this.isVertical&&(e=this.listview.node.height);for(var o=0,n=0,r=1;r<=t+1;r++){var i=Math.abs(this.itemsPos[r]);n+=1==r?(i-o-this.spacing)/2+this.spacing:i-o}if(n<e/2)return Math.min(this.data.length-1,this.itemNum-1);o=Math.abs(this.itemsPos[t]);var s=0,a=0;for(r=t+1;r<this.itemsPos.length;r++)if(a++,i=Math.abs(this.itemsPos[r]),s+=1==a?(i-o-this.spacing)/2+this.spacing:i-o,o=i,s>=e/2)return r-1;return this.data.length-1},e.prototype.jumpTo=function(t){var e=this;if(this.jumpFinished=!1,this.listview.stopAutoScroll(),this.canUpdateFrame=!1,this.initType==r.Bottom)this.downIdx=Math.min(t,this.data.length-1),(o=this.downIdx-this.items.length+1)<0&&(this.downIdx+=Math.abs(o),o=0),this.topIdx=o;else if(this.initType==r.Center){var o;this.downIdx=this._getDownIdxs(t),(o=this.downIdx-this.items.length+1)<0&&(this.downIdx+=Math.abs(o),o=0),this.topIdx=o}else this.initType==r.Top&&(this.downIdx=Math.min(t+this.items.length-1,this.data.length-1),this.topIdx=this.downIdx-this.items.length+1);for(var n=0;n<this.downIdx-this.topIdx+1;n++){var i=this.items[n],s=this.topIdx+n;this.itemUpdateFunc(s,i,this.data[s]);var a=i.getContentSize(),c="x",l=a.width/2;this.isVertical&&(c="y",l=-a.height/2),i[c]=this.itemsPos[s]+l}var u=0,p=0,f=this.itemsPos[this.topIdx];if(this.isVertical){p=Math.abs(f);var h=this.listview.node.height,d=Math.max(this.listview.content.height,h)-h/2;if(this.initType==r.Bottom)if(0==this.topIdx)p=this.listview.node.height/2;else{var _=this.getItemsHeight();p=p+_-this.listview.node.height/2}else this.initType==r.Center?(_=this.getItemsLength(t-this.topIdx+1),p+=_,p=Math.max(p,this.listview.node.height/2)):this.initType==r.Top&&(p=this.itemsPos[t]+this.listview.node.height/2);p=Math.min(d,p)}else{u=f;var y=this.listview.node.width,v=-(Math.max(this.listview.content.width,y)-y/2);this.initType==r.Bottom?0==this.topIdx?u=this.listview.node.width/2:(_=this.getItemsHeight(),u=u+_-this.listview.node.width/2):this.initType==r.Center?(_=this.getItemsLength(t-this.topIdx+1),u+=_,u=Math.max(u,this.listview.node.width/2)):this.initType==r.Top&&(u=this.itemsPos[t]+this.listview.node.width/2),u=Math.max(v,-u)}this.scheduleOnce(function(){e.listview.setContentPosition(cc.v2(u,p)),e.canUpdateFrame=!0,e.jumpFinished=!0})},e.prototype.jumpToTop=function(){this.jumpTo(0)},e.prototype.jumpToBottom=function(){this.jumpTo(this.rowNum-1)},e.prototype.isJumpFinished=function(){return this.jumpFinished},s([l(cc.Prefab)],e.prototype,"itemTemplate",void 0),s([l(cc.Prefab)],e.prototype,"arrow",void 0),s([l],e.prototype,"spacing",void 0),s([l],e.prototype,"initNum",void 0),s([l],e.prototype,"initIdx",void 0),s([l],e.prototype,"cacheNum",void 0),s([l({type:cc.Enum(r)})],e.prototype,"initType",void 0),s([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"8e60frIN1lH0bfXqlrFv2FQ","Loading");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Controller/LTrackerMgr"),a=t("../../Define/EventId"),c=t("../../Framework/Event/EventMgr"),l=t("../../Framework/Platform/Platform"),u=t("../../Framework/Tools/BaseInfo"),p=t("../../Framework/UIBase"),f=t("../../Model/PlayerModel"),h=cc._decorator,d=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingBar=null,e.lblProgress=null,e}return r(e,t),e.prototype.start=function(){this.lblProgress.string="",this.loadingBar.progress=0;var t=!0,e=f.default.inst._isNew?"regist":"login";l.Platform.getUrlInfo(u.default.ENTRY_TASK_KEY)==u.default.ENTRY_TASK_VALUE&&(t=!1),s.default.inst.expo("cx155891",{stype:e,sinvite:t})},e.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_UPDATE_LOADING_PROGRESS,this.onUpdateProgress,this)},e.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_UPDATE_LOADING_PROGRESS,this.onUpdateProgress,this)},e.prototype.onUpdateProgress=function(t,e){this.loadingBar.progress=t/e,this.lblProgress.string=Math.floor(t/e*100)+"%"},i([_(cc.ProgressBar)],e.prototype,"loadingBar",void 0),i([_(cc.Label)],e.prototype,"lblProgress",void 0),i([d],e)}(p.default);o.default=y,cc._RF.pop()},{"../../Controller/LTrackerMgr":"LTrackerMgr","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Platform/Platform":"Platform","../../Framework/Tools/BaseInfo":"BaseInfo","../../Framework/UIBase":"UIBase","../../Model/PlayerModel":"PlayerModel"}],LocalKey:[function(t,e,o){"use strict";cc._RF.push(e,"c1ba8+5yQRAmrGXr1KLNCy9","LocalKey"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalKey=void 0;var n=function(){function t(){}return t.SoundVolum="LocalKey.SoundVolum",t.TestLocalAccount="LocalKey.TestLocalAccount",t.GuideStep="LocalKey.GuideStep",t.AudioVolumeMusic="LocalKey.AudioVolumeMusic",t.AudioVolumeMusicMute="LocalKey.AudioVolumeMute",t.AudioVolumeEffect="LocalKey.AudioVolumeEffect",t.AudioVolumeEffectMute="LocalKey.AudioVolumeEffectMute",t}();o.LocalKey=n,cc._RF.pop()},{}],LocalStorageMgr:[function(t,e,o){"use strict";cc._RF.push(e,"04b82MsYBBMHqMcStr1U61V","LocalStorageMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStorageMgr=void 0;var n=function(){function t(){}return t.setHashID=function(e){t.hashID=e,t.setItem("hashID",e,!0)},t.getHashID=function(){return t.getItem("hashID",!0)},t.setItem=function(e,o,n){void 0===n&&(n=!1),n?cc.sys.localStorage.setItem(e,o):cc.sys.localStorage.setItem(t.hashID+"_"+e,o)},t.getItem=function(e,o){return void 0===o&&(o=!1),o?cc.sys.localStorage.getItem(e):cc.sys.localStorage.getItem(t.hashID+"_"+e)},t.removeItem=function(e,o){void 0===o&&(o=!1),o?cc.sys.localStorage.removeItem(e):cc.sys.localStorage.removeItem(t.hashID+"_"+e)},t.clearAll=function(){cc.sys.localStorage.clear()},t}();o.LocalStorageMgr=n,cc._RF.pop()},{}],LogUtil:[function(t,e,o){"use strict";cc._RF.push(e,"ecccd1uvWBKsaPUKosdi9y1","LogUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.LogUtil=void 0;var n=function(){function t(){}return t.logInfo=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];"string"==typeof t?(t="%c"+t,cc.log(t,"color:#0f0;")):cc.log(t,e)},t.logWarn=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];"string"==typeof t?(t="%c"+t,cc.log(t,"color:#FFD700;")):cc.log(t,e)},t.logError=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];"string"==typeof t?(t="%c"+t,cc.log(t,"color:#FF3030;")):cc.log(t,e)},t}();o.LogUtil=n,cc._RF.pop()},{}],MD5:[function(t,e,o){"use strict";cc._RF.push(e,"b4b35+TNQVGqItiIosa/WeB","MD5"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,o){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),o)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var o=this.rstr2binl(t);o.length>16&&(o=this.binl_md5(o,8*t.length));for(var n=Array(16),r=Array(16),i=0;i<16;i++)n[i]=909522486^o[i],r[i]=1549556828^o[i];var s=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(s),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(i){this.hexcase=0}for(var e,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",r=0;r<t.length;r++)e=t.charCodeAt(r),n+=o.charAt(e>>>4&15)+o.charAt(15&e);return n},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(s){this.b64pad=""}for(var e="",o=t.length,n=0;n<o;n+=3)for(var r=t.charCodeAt(n)<<16|(n+1<o?t.charCodeAt(n+1)<<8:0)|(n+2<o?t.charCodeAt(n+2):0),i=0;i<4;i++)8*n+6*i>8*t.length?e+=this.b64pad:e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-i)&63);return e},t.prototype.rstr2any=function(t,e){var o,n,r,i,s,a=e.length,c=Array(Math.ceil(t.length/2));for(o=0;o<c.length;o++)c[o]=t.charCodeAt(2*o)<<8|t.charCodeAt(2*o+1);var l=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),u=Array(l);for(n=0;n<l;n++){for(s=Array(),i=0,o=0;o<c.length;o++)i=(i<<16)+c[o],i-=(r=Math.floor(i/a))*a,(s.length>0||r>0)&&(s[s.length]=r);u[n]=i,c=s}var p="";for(o=u.length-1;o>=0;o--)p+=e.charAt(u[o]);return p},t.prototype.str2rstr_utf8=function(t){for(var e,o,n="",r=-1;++r<t.length;)e=t.charCodeAt(r),o=r+1<t.length?t.charCodeAt(r+1):0,55296<=e&&e<=56319&&56320<=o&&o<=57343&&(e=65536+((1023&e)<<10)+(1023&o),r++),e<=127?n+=String.fromCharCode(e):e<=2047?n+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",o=0;o<t.length;o++)e+=String.fromCharCode(255&t.charCodeAt(o),t.charCodeAt(o)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",o=0;o<t.length;o++)e+=String.fromCharCode(t.charCodeAt(o)>>>8&255,255&t.charCodeAt(o));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),o=0;o<e.length;o++)e[o]=0;for(o=0;o<8*t.length;o+=8)e[o>>5]|=(255&t.charCodeAt(o/8))<<o%32;return e},t.prototype.binl2rstr=function(t){for(var e="",o=0;o<32*t.length;o+=8)e+=String.fromCharCode(t[o>>5]>>>o%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var o=1732584193,n=-271733879,r=-1732584194,i=271733878,s=0;s<t.length;s+=16){var a=o,c=n,l=r,u=i;o=this.md5_ff(o,n,r,i,t[s+0],7,-680876936),i=this.md5_ff(i,o,n,r,t[s+1],12,-389564586),r=this.md5_ff(r,i,o,n,t[s+2],17,606105819),n=this.md5_ff(n,r,i,o,t[s+3],22,-1044525330),o=this.md5_ff(o,n,r,i,t[s+4],7,-176418897),i=this.md5_ff(i,o,n,r,t[s+5],12,1200080426),r=this.md5_ff(r,i,o,n,t[s+6],17,-1473231341),n=this.md5_ff(n,r,i,o,t[s+7],22,-45705983),o=this.md5_ff(o,n,r,i,t[s+8],7,1770035416),i=this.md5_ff(i,o,n,r,t[s+9],12,-1958414417),r=this.md5_ff(r,i,o,n,t[s+10],17,-42063),n=this.md5_ff(n,r,i,o,t[s+11],22,-1990404162),o=this.md5_ff(o,n,r,i,t[s+12],7,1804603682),i=this.md5_ff(i,o,n,r,t[s+13],12,-40341101),r=this.md5_ff(r,i,o,n,t[s+14],17,-1502002290),n=this.md5_ff(n,r,i,o,t[s+15],22,1236535329),o=this.md5_gg(o,n,r,i,t[s+1],5,-165796510),i=this.md5_gg(i,o,n,r,t[s+6],9,-1069501632),r=this.md5_gg(r,i,o,n,t[s+11],14,643717713),n=this.md5_gg(n,r,i,o,t[s+0],20,-373897302),o=this.md5_gg(o,n,r,i,t[s+5],5,-701558691),i=this.md5_gg(i,o,n,r,t[s+10],9,38016083),r=this.md5_gg(r,i,o,n,t[s+15],14,-660478335),n=this.md5_gg(n,r,i,o,t[s+4],20,-405537848),o=this.md5_gg(o,n,r,i,t[s+9],5,568446438),i=this.md5_gg(i,o,n,r,t[s+14],9,-1019803690),r=this.md5_gg(r,i,o,n,t[s+3],14,-187363961),n=this.md5_gg(n,r,i,o,t[s+8],20,1163531501),o=this.md5_gg(o,n,r,i,t[s+13],5,-1444681467),i=this.md5_gg(i,o,n,r,t[s+2],9,-51403784),r=this.md5_gg(r,i,o,n,t[s+7],14,1735328473),n=this.md5_gg(n,r,i,o,t[s+12],20,-1926607734),o=this.md5_hh(o,n,r,i,t[s+5],4,-378558),i=this.md5_hh(i,o,n,r,t[s+8],11,-2022574463),r=this.md5_hh(r,i,o,n,t[s+11],16,1839030562),n=this.md5_hh(n,r,i,o,t[s+14],23,-35309556),o=this.md5_hh(o,n,r,i,t[s+1],4,-1530992060),i=this.md5_hh(i,o,n,r,t[s+4],11,1272893353),r=this.md5_hh(r,i,o,n,t[s+7],16,-155497632),n=this.md5_hh(n,r,i,o,t[s+10],23,-1094730640),o=this.md5_hh(o,n,r,i,t[s+13],4,681279174),i=this.md5_hh(i,o,n,r,t[s+0],11,-358537222),r=this.md5_hh(r,i,o,n,t[s+3],16,-722521979),n=this.md5_hh(n,r,i,o,t[s+6],23,76029189),o=this.md5_hh(o,n,r,i,t[s+9],4,-640364487),i=this.md5_hh(i,o,n,r,t[s+12],11,-421815835),r=this.md5_hh(r,i,o,n,t[s+15],16,530742520),n=this.md5_hh(n,r,i,o,t[s+2],23,-995338651),o=this.md5_ii(o,n,r,i,t[s+0],6,-198630844),i=this.md5_ii(i,o,n,r,t[s+7],10,1126891415),r=this.md5_ii(r,i,o,n,t[s+14],15,-1416354905),n=this.md5_ii(n,r,i,o,t[s+5],21,-57434055),o=this.md5_ii(o,n,r,i,t[s+12],6,1700485571),i=this.md5_ii(i,o,n,r,t[s+3],10,-1894986606),r=this.md5_ii(r,i,o,n,t[s+10],15,-1051523),n=this.md5_ii(n,r,i,o,t[s+1],21,-2054922799),o=this.md5_ii(o,n,r,i,t[s+8],6,1873313359),i=this.md5_ii(i,o,n,r,t[s+15],10,-30611744),r=this.md5_ii(r,i,o,n,t[s+6],15,-1560198380),n=this.md5_ii(n,r,i,o,t[s+13],21,1309151649),o=this.md5_ii(o,n,r,i,t[s+4],6,-145523070),i=this.md5_ii(i,o,n,r,t[s+11],10,-1120210379),r=this.md5_ii(r,i,o,n,t[s+2],15,718787259),n=this.md5_ii(n,r,i,o,t[s+9],21,-343485551),o=this.safe_add(o,a),n=this.safe_add(n,c),r=this.safe_add(r,l),i=this.safe_add(i,u)}return[o,n,r,i]},t.prototype.md5_cmn=function(t,e,o,n,r,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,i)),r),o)},t.prototype.md5_ff=function(t,e,o,n,r,i,s){return this.md5_cmn(e&o|~e&n,t,e,r,i,s)},t.prototype.md5_gg=function(t,e,o,n,r,i,s){return this.md5_cmn(e&n|o&~n,t,e,r,i,s)},t.prototype.md5_hh=function(t,e,o,n,r,i,s){return this.md5_cmn(e^o^n,t,e,r,i,s)},t.prototype.md5_ii=function(t,e,o,n,r,i,s){return this.md5_cmn(o^(e|~n),t,e,r,i,s)},t.prototype.safe_add=function(t,e){var o=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(o>>16)<<16|65535&o},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();o.default=n,cc._RF.pop()},{}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"7649dQyjaZLU71BlsLKPlgm","Main");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.Main=void 0;var c,l=t("../../Controller/AfunRiskSDKController"),u=t("../../Controller/LTrackerMgr"),p=t("../../Controller/MtopMgr"),f=t("../../Controller/RankController"),h=t("../../Controller/WindVaneMgr"),d=t("../../Define/EventId"),_=t("../../Define/UIDefs"),y=t("../../Framework/Event/EventMgr"),v=t("../../Framework/Platform/Platform"),m=t("../../Framework/Scene/SceneBase"),g=t("../../Framework/Tools/BaseInfo"),b=t("../../Framework/UI/UIFacade"),I=t("../../Framework/UI/UIMgr"),w=t("../../Framework/Utils/Utils"),T=t("../../Model/PlayerModel"),S=t("../../System/PicSystem"),E=t("../../System/PlayerSystem"),P=t("../UI/Game/FlyResMgr"),O=t("../UI/Power/LifeSystem"),C=cc._decorator,N=C.ccclass,R=C.property;(function(t){t[t.Start=0]="Start",t[t.Replay=1]="Replay",t[t.Pass=2]="Pass"})(c||(c={}));var M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnSprite=null,e.btnSpriteFrames=[],e.leYuanCoinNode=null,e.labCoin=null,e.lblReset=null,e.nodeMore=null,e._btnState=null,e}return r(e,t),e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return a(this,function(){return[2]})})},e.prototype.start=function(){S.default.initialize(),this.initBtn();var t=T.default.inst.isNew?"regist":"login";u.default.inst.expo("cx155907",{stype:t}),this.onRefreshCoin(),this.preloadGameScene()},e.prototype.onEnable=function(){y.EVENT.on(d.EventId.ON_PLAY_RESOURCE_FLY_ANI,this.playFlyAni,this),y.EVENT.on(d.EventId.ON_REFRESH_COIN,this.onRefreshCoin,this),y.EVENT.on(d.EventId.ON_FLY,this._gain,this),window.setExitBtn&&window.setExitBtn(),l.default.inst.report(l.AfunRiskSDKType.enterGame)},e.prototype.onDisable=function(){y.EVENT.off(d.EventId.ON_PLAY_RESOURCE_FLY_ANI,this.playFlyAni,this),y.EVENT.off(d.EventId.ON_REFRESH_COIN,this.onRefreshCoin,this),y.EVENT.off(d.EventId.ON_FLY,this._gain,this),window.clearBtn&&window.clearBtn()},e.prototype.initBtn=function(){var t=T.default.inst.levelId;"1"==t?(this._btnState=c.Start,this.btnSprite.spriteFrame=this.btnSpriteFrames[0],this.lblReset.node.active=!1):"2"==t?(this._btnState=c.Replay,this.btnSprite.spriteFrame=this.btnSpriteFrames[1],this.lblReset.node.active=!1):(this._btnState=c.Pass,this.btnSprite.spriteFrame=this.btnSpriteFrames[2],this.lblReset.node.active=!0)},e.prototype.onClickStartBtn=function(){if(this._btnState==c.Pass)return I.default.inst.showToast("\u4eca\u65e5\u5df2\u6311\u6218\u6210\u529f\uff0c\u660e\u65e5\u518d\u6765\u5427"),void u.default.inst.click("cx155907.dx204411",{});if(this._btnState==c.Replay)u.default.inst.click("cx155907.dx204403",{});else{var t=T.default.inst.isNew?"regist":"login";u.default.inst.click("cx155907.dx204395",{stype:t})}E.default.startGame()},e.prototype.onRank=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,f.default.inst.getRankInfo()];case 1:return t.sent(),I.default.inst.open(_.UIType.Rank),[2]}})})},e.prototype.onSet=function(){I.default.inst.open(_.UIType.Set)},e.prototype.onOpenRule=function(){u.default.inst.click("cx155907.dx204387",{}),h.default.inst.openBrowser(g.default.RULE_URL)},e.prototype.onOpenShop=function(){u.default.inst.click("cx155907.dx204379",{});var t=v.Platform.getUrlInfo("shopStatus");t&&"creating"==t?b.UIFacade.showToast("\u5151\u6362\u5546\u57ce\u8d27\u54c1\u4e0a\u67b6\u4e2d\uff0c\u656c\u8bf7\u671f\u5f85~"):h.default.inst.openBrowser(g.default.SHOP_URL)},e.prototype.playFlyAni=function(t){var e=this;P.default.Inst.flyAni(t,this.leYuanCoinNode.parent.convertToWorldSpaceAR(this.leYuanCoinNode.position)),this.scheduleOnce(function(){e.onRefreshCoin()},.5)},e.prototype.onRefreshCoin=function(){var t;return s(this,void 0,void 0,function(){var e;return a(this,function(o){switch(o.label){case 0:return[4,p.default.inst.queryCoin()];case 1:return e=o.sent(),this.labCoin.string=(null===(t=null==e?void 0:e.propertyList[0])||void 0===t?void 0:t.amount)?e.propertyList[0].amount+"":"0",[2]}})})},e.prototype.preloadGameScene=function(){cc.director.preloadScene("Game")},e.prototype._gain=function(t,e){var o=I.default.inst.getLayer(_.LayerType.Top),n=cc.instantiate(t),r=t.position;o.addChild(n),n.setPosition(r);var i=this.nodeMore.convertToWorldSpaceAR(cc.v2(0,0)),s=this.node.convertToNodeSpaceAR(i),a=new cc.Vec3(s.x,s.y,0);w.default.playFlying(n,a,!1,function(){console.log("\u62b5\u8fbe"),n.destroy(),O.default.initialize(e.energy,e.infiniteEnergyAdNum)})},i([R(cc.Sprite)],e.prototype,"btnSprite",void 0),i([R([cc.SpriteFrame])],e.prototype,"btnSpriteFrames",void 0),i([R(cc.Node)],e.prototype,"leYuanCoinNode",void 0),i([R(cc.Label)],e.prototype,"labCoin",void 0),i([R(cc.Label)],e.prototype,"lblReset",void 0),i([R(cc.Node)],e.prototype,"nodeMore",void 0),i([N],e)}(m.default);o.Main=M,cc._RF.pop()},{"../../Controller/AfunRiskSDKController":"AfunRiskSDKController","../../Controller/LTrackerMgr":"LTrackerMgr","../../Controller/MtopMgr":"MtopMgr","../../Controller/RankController":"RankController","../../Controller/WindVaneMgr":"WindVaneMgr","../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../../Framework/Event/EventMgr":"EventMgr","../../Framework/Platform/Platform":"Platform","../../Framework/Scene/SceneBase":"SceneBase","../../Framework/Tools/BaseInfo":"BaseInfo","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UI/UIMgr":"UIMgr","../../Framework/Utils/Utils":"Utils","../../Model/PlayerModel":"PlayerModel","../../System/PicSystem":"PicSystem","../../System/PlayerSystem":"PlayerSystem","../UI/Game/FlyResMgr":"FlyResMgr","../UI/Power/LifeSystem":"LifeSystem"}],MapController:[function(t,e,o){"use strict";cc._RF.push(e,"7f735yuHSJO+rIWw9H6Hu5A","MapController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.MapController=void 0;var a=cc._decorator,c=a.ccclass,l=a.property,u=t("../../../Common/Archive"),p=t("../../../Common/AudioConfig"),f=t("../../../Common/Constant"),h=t("../../../Controller/LTrackerMgr"),d=t("../../../Define/EventId"),_=t("../../../Define/UIDefs"),y=t("../../../Framework/Event/EventMgr"),v=t("../../../Framework/Res/NodePool"),m=t("../../../Framework/UI/UIMgr"),g=t("../../../Model/PlayerModel"),b=t("../../../System/AlgorithmSystem"),I=t("../../../System/AudioSystem"),w=t("../../../System/DropSystem"),T=t("../../../System/GamingSystem"),S=t("../../../System/PlayerSystem"),E=t("./EffectLayerController"),P=t("./Picitem"),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.picParent=null,e.picPrefab=null,e.flashs=[],e.effectLayer=null,e._gridWidth=84,e._rows=0,e._colmns=0,e._picItemCmpts=new Array,e._lastChooseItem=null,e._dropPicDatas=[],e._curRemoveCnt=0,e._nextDropRemoveValue=0,e._nextDropPicValue=0,e._isImpasse=!1,e._hintRoutes=null,e._isPlayAni=!1,e._inRefreshing=!1,e._usingRemove=!1,e._gridGap=6,e}return r(e,t),e.prototype.onLoad=function(){this.initPicPools(),this.initMapArray()},e.prototype.start=function(){this.initMap()},e.prototype.initMap=function(){this.initDefault(),this.initGame(),this.updateNextDropPicData(),this.onCheckImpasse()},e.prototype.onEnable=function(){y.EVENT.on(d.EventId.ON_CLICK_LINK_GAME_PIC,this.onClickLinkGamePic,this),y.EVENT.on(d.EventId.ON_GAME_REVIVE_SUCC,this.onGameReviveSucc,this),y.EVENT.on(d.EventId.ON_CANCEL_GAME_REVIVE,this.onCancelRevive,this),y.EVENT.on(d.EventId.ON_GAME_TIME_OVER,this.onTimeOver,this),y.EVENT.on(d.EventId.ON_CLICK_LINK_GAME_OBSTACLE,this.onClickObstacle,this),y.EVENT.on(d.EventId.ON_USE_ITEM,this.onUseItem,this)},e.prototype.onDisable=function(){y.EVENT.off(d.EventId.ON_CLICK_LINK_GAME_PIC,this.onClickLinkGamePic,this),y.EVENT.off(d.EventId.ON_GAME_REVIVE_SUCC,this.onGameReviveSucc,this),y.EVENT.off(d.EventId.ON_CANCEL_GAME_REVIVE,this.onCancelRevive,this),y.EVENT.off(d.EventId.ON_GAME_TIME_OVER,this.onTimeOver,this),y.EVENT.off(d.EventId.ON_CLICK_LINK_GAME_OBSTACLE,this.onClickObstacle,this),y.EVENT.off(d.EventId.ON_USE_ITEM,this.onUseItem,this)},e.prototype.initDefault=function(){},e.prototype.initGame=function(){this.startNewGame()},e.prototype.startNewGame=function(){this.initDropPicDatas(),this.initPicItems()},e.prototype.initPicPools=function(){this._picPool||(this._picPool=new v.NodePool,this._picPool.init(this.picPrefab))},e.prototype.onDestroyPicItem=function(t){t&&this._picPool.freeNode(t)},e.prototype.onCreatePicItem=function(){return this._picPool.getNode()},e.prototype.initMapArray=function(){this._rows=f.LINK_GAME_ROW+2,this._colmns=f.LINK_GAME_COLMN+2,this._mapArray=[];for(var t=0;t<this._rows;++t){this._mapArray[t]=Array(this._colmns);for(var e=0;e<this._colmns;++e)this._mapArray[t][e]=0}for(var o=T.default.getCurMapConfig().sMapSet,n=0;n<o.length;n++){var r=n%f.LINK_GAME_ROW+1,i=Math.floor(n/f.LINK_GAME_ROW)+1;"0"==o[n]&&(this._mapArray[r][i]=f.LINK_GAME_EMPTY_ID)}},e.prototype._getPicPosition=function(t,e){return{x:10+(t-1)*(this._gridWidth+this._gridGap)-this.picParent.width/2+this._gridWidth/2,y:(1-e)*(this._gridWidth+this._gridGap)-10+this.picParent.height/2-this._gridWidth/2}},e.prototype.addPicItemToMap=function(t,e,o){var n=this.onCreatePicItem();this.picParent.addChild(n);var r=this._getPicPosition(t,e);n.setPosition(r.x,r.y);var i=this._dropPicDatas.shift(),s=n.getComponent(P.Picitem);return s.initItem(i,cc.v2(t,e)),s.playDelayShow(o||60*e),this._mapArray[t][e]=i,this._picItemCmpts.push(s),s},e.prototype.initPicItems=function(){for(var t=1;t<this._rows-1;++t)for(var e=1;e<this._colmns-1;++e)this._mapArray[t][e]!=f.LINK_GAME_EMPTY_ID&&this.addPicItemToMap(t,e)},e.prototype.initDropPicDatas=function(){this._dropPicDatas=w.default.getLevelDropPools()},e.prototype.removePicNode=function(t){var e=this,o=this._picItemCmpts.indexOf(t);this._picItemCmpts.splice(o,1),this._mapArray[t.pos.x][t.pos.y]=0,t.playDisappear(function(){e.onDestroyPicItem(t.node)})},e.prototype.onClickLinkGamePic=function(t){var e=this;if(!this._inRefreshing&&!this._isPlayAni){this._usingRemove&&(h.default.inst.click("cx155955.dx204491",{stype:2}),this.hideRemoveHint());var o=this._lastChooseItem;if(!o)return this._lastChooseItem=t,void t.selected();o!=t&&(t.selected(),b.AlgorithmSystem.canBeRemoved(o.pos,t.pos,this._mapArray)?(this._isPlayAni=!0,this._hintRoutes=b.AlgorithmSystem.routes,this.drawHintLine(),this.scheduleOnce(function(){e._isPlayAni=!1,e.removePicNode(o),e.removePicNode(t);var n=e.updateDropData();e.checkPassGame()||n||e.onCheckImpasse()},.2),this._lastChooseItem=null):(o.unSelected(),this._lastChooseItem=t))}},e.prototype.updateDropData=function(){var t=this;return this._curRemoveCnt+=2,!!this.checkDropPic()&&(T.default.addDropBatch(),m.default.inst.open(_.UIType.GameDrop),this.scheduleOnce(function(){t.dropNewPicItem(),t.updateNextDropPicData()},f.GAME_TIPS_SHOW_TIME),!0)},e.prototype.updateNextDropPicData=function(){this._nextDropPicValue=w.default.getNextDropPlan(this._curRemoveCnt),this._nextDropRemoveValue+=this._nextDropPicValue},e.prototype.checkDropPic=function(){return!!this._nextDropPicValue&&this._curRemoveCnt>=this._nextDropRemoveValue},e.prototype.dropNewPicItem=function(){var t=this;this._isPlayAni=!0;for(var e=0,o=1;o<this._rows-1;++o)for(var n=1;n<this._colmns-1;++n)e<this._nextDropPicValue&&0==this._mapArray[o][n]&&(console.log("drop new pic ........",e,o,n),this.addPicItemToMap(o,n,30*e),e++);this.effectLayer.playFallAni(),this.onCheckImpasse(),y.EVENT.emit(d.EventId.ON_DROP_NEW_PIC),this.scheduleOnce(function(){t._isPlayAni=!1,t._isImpasse&&t.refreshPicPosition()},.8)},e.prototype.checkPassGame=function(){var t,e;if(this._dropPicDatas.length>0)return!1;try{for(var o=s(this._picItemCmpts),n=o.next();!n.done;n=o.next()){var r=n.value;if(r.picId!=f.LINK_GAME_OBSTACLE_ID&&r.picId!=f.LINK_GAME_EMPTY_ID)return!1}}catch(i){t={error:i}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return this.levelSuccess(),!0},e.prototype.onCheckImpasse=function(){this._isImpasse=b.AlgorithmSystem.isImpasse(this._mapArray),this._isImpasse?(T.default.failType=f.FailType.Impasse,this.settlement()):this._hintRoutes=b.AlgorithmSystem.routes},e.prototype.levelFail=function(){var t=this;T.default.gameOver=!0,I.default.play(p.AUDIOS_PATH.fail);var e=T.default.failType==f.FailType.Impasse,o={title:e?"\u554a\u54e6\uff0c\u4f60\u7684\u8def\u7ebf\u89c4\u5212\u4e0d\u5408\u7406":"\u65f6\u95f4\u8017\u5c3d",describe:e?"\u5f53\u524d\u5df2\u65e0\u53ef\u8fde\u5143\u7d20":null,closeHandle:function(){t._uploadGame(!1)}};m.default.inst.open(_.UIType.GameTips,o)},e.prototype.cleanDirtyData=function(){T.default.init(),u.default.cleanLoaclGameReport()},e.prototype.levelSuccess=function(){T.default.gameComplete=!0,this._uploadGame(!0)},e.prototype.onTimeOver=function(){T.default.failType=f.FailType.Time,this.settlement()},e.prototype.settlement=function(){T.default.isRevive?this.onEndGame():this.showReviveUI()},e.prototype.showReviveUI=function(){T.default.gamePause=!0,I.default.play(p.AUDIOS_PATH.fail),m.default.inst.open(_.UIType.ReviveUI)},e.prototype.onEndGame=function(){T.default.gameOver=!0,this.levelFail()},e.prototype.onCancelRevive=function(){T.default.gameOver=!0,this._uploadGame(!1)},e.prototype._uploadGame=function(t){console.log("Log - Test _uploadGame.......1"),T.default.isSettlement||(console.log("Log - Test _uploadGame.......2"),T.default.isSettlement=!0,S.default.uploadGame(t))},e.prototype.refreshPicCmpt=function(){for(var t=this,e=new Array,o=new Array,n=1;n<this._rows-1;++n)for(var r=1;r<this._colmns-1;++r){var i=this._mapArray[n][r];i&&i!=f.LINK_GAME_EMPTY_ID&&(e.push({x:n,y:r}),o.push(i))}e.sort(function(){return Math.random()>.5?-1:1}),o.sort(function(){return Math.random()>.5?-1:1}),e.forEach(function(e,n){t._mapArray[e.x][e.y]=o[n]}),this._picItemCmpts.forEach(function(e){e.initItem(t._mapArray[e.pos.x][e.pos.y],e.pos)}),this.onCheckImpasse()},e.prototype.onGameReviveSucc=function(){T.default.gamePause=!1,this.refreshPicPosition()},e.prototype.refreshPicPosition=function(){var t=this;this._inRefreshing=!0;var e=0,o=360/this._picItemCmpts.length;this.picParent.angle=0,cc.tween(this.picParent).call(function(){t._picItemCmpts.forEach(function(t){var n=T.default.getCirclePosByAngle(e,100);e+=o,cc.tween(t.node).to(.3,{x:n.x,y:n.y}).start()})}).delay(.3).call(function(){t.refreshPicCmpt()}).to(1,{angle:720}).call(function(){t._picItemCmpts.forEach(function(e){var o=t._getPicPosition(e.pos.x,e.pos.y);cc.tween(e.node).to(.3,{x:o.x,y:o.y}).start()})}).delay(.3).call(function(){t._inRefreshing=!1}).start()},e.prototype._checkPropVaild=function(t){var e=g.default.inst.getGameItemState(t);return console.log("_checkPropVaild.............................",e),e==f.GAME_ITEM_STATE.Used?(m.default.inst.showToast("\u6bcf\u5173\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\u9053\u5177\u54e6"),!1):e!=f.GAME_ITEM_STATE.UnGet||(m.default.inst.open(_.UIType.WatchAD,t),!1)},e.prototype.onRemovePic=function(){var t,e;if(!this._inRefreshing&&!this._isPlayAni&&this._checkPropVaild(f.PROP_ID.RemoveObstacle)){var o=!1;try{for(var n=s(this._picItemCmpts),r=n.next();!r.done;r=n.next())r.value.isObstacle()&&(o=!0)}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}if(!o)return h.default.inst.click("cx155955.dx204491",{stype:3}),m.default.inst.showToast("\u6ca1\u6709\u969c\u788d\u53ef\u4ee5\u6e05\u9664");this.showRemoveHint()}},e.prototype.showRemoveHint=function(){this._usingRemove=!0,this._picItemCmpts.forEach(function(t){t.isObstacle()&&t.showObstacleHint()}),y.EVENT.emit(d.EventId.ON_USING_REMOVE_OBSTACLE,!0)},e.prototype.hideRemoveHint=function(){this._usingRemove=!1,this._picItemCmpts.forEach(function(t){t.isObstacle()&&t.hideObstacleHint()}),y.EVENT.emit(d.EventId.ON_USING_REMOVE_OBSTACLE,!1)},e.prototype.onClickObstacle=function(t){if(this._usingRemove){h.default.inst.click("cx155955.dx204491",{stype:1}),this.hideRemoveHint(),g.default.inst.setGameItemState(f.PROP_ID.RemoveObstacle,f.GAME_ITEM_STATE.Used);var e=this._getPicPosition(t.pos.x,t.pos.y);this.effectLayer.playHammerAction(e),this.removePicNode(t)}},e.prototype.drawHintLine=function(){var t=this._hintRoutes;if(t&&0!=t.length){for(var e=1;e<t.length;e++){var o=t[e-1],n=t[e],r=this._getPicPosition(o.x,o.y),i=this._getPicPosition(n.x,n.y),s=this.flashs[e-1].node;this.flashs[e-1].play(),s.active=!0,s.x=(r.x+i.x)/2,s.y=(r.y+i.y)/2;var a=Math.abs(r.x-i.x),c=Math.abs(r.y-i.y);s.scale=Math.sqrt(a*a+c*c)/400,s.angle=o.x==n.x?0:90}I.default.play(p.AUDIOS_PATH.flash)}},e.prototype.showHint=function(){if(!this._inRefreshing&&!this._isPlayAni&&this._checkPropVaild(f.PROP_ID.Hint)){var t=this._hintRoutes;if(t&&0!=t.length){g.default.inst.setGameItemState(f.PROP_ID.Hint,f.GAME_ITEM_STATE.Used),h.default.inst.click("cx155955.dx204483",{});var e=t[0],o=t[t.length-1];this._picItemCmpts.forEach(function(t){(t.pos.x==e.x&&t.pos.y==e.y||t.pos.x==o.x&&t.pos.y==o.y)&&t.showJumpHint()})}}},e.prototype.onUseItem=function(t){t==f.PROP_ID.Hint?this.showHint():t==f.PROP_ID.RemoveObstacle&&this.onRemovePic()},i([l(cc.Node)],e.prototype,"picParent",void 0),i([l(cc.Prefab)],e.prototype,"picPrefab",void 0),i([l([cc.Animation])],e.prototype,"flashs",void 0),i([l(E.default)],e.prototype,"effectLayer",void 0),i([c],e)}(cc.Component);o.MapController=O,cc._RF.pop()},{"../../../Common/Archive":"Archive","../../../Common/AudioConfig":"AudioConfig","../../../Common/Constant":"Constant","../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/Res/NodePool":"NodePool","../../../Framework/UI/UIMgr":"UIMgr","../../../Model/PlayerModel":"PlayerModel","../../../System/AlgorithmSystem":"AlgorithmSystem","../../../System/AudioSystem":"AudioSystem","../../../System/DropSystem":"DropSystem","../../../System/GamingSystem":"GamingSystem","../../../System/PlayerSystem":"PlayerSystem","./EffectLayerController":"EffectLayerController","./Picitem":"Picitem"}],MeshPolygonSprite:[function(t,e,o){"use strict";cc._RF.push(e,"67afc4rFktEb6lNkHHYixu1","MeshPolygonSprite");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var l=cc.gfx,u=cc._decorator,p=u.ccclass,f=u.property,h=u.executeInEditMode,d=u.requireComponent,_=u.menu,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._offset=cc.v2(0,0),e._spriteFrame=null,e._vertexes=[cc.v2(0,0),cc.v2(0,100),cc.v2(100,100),cc.v2(100,0)],e.renderer=null,e.mesh=null,e._meshCache={},e}return r(e,t),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t,this._updateMesh(),this._applyVertexes()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spriteFrame",{get:function(){return this._spriteFrame},set:function(t){this._spriteFrame=t,this._refreshAll()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexes",{get:function(){return this._vertexes},set:function(t){this._vertexes=t,this._updateMesh(),this._applyVertexes()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._meshCache={};var t=this.node.getComponent(cc.MeshRenderer)||this.node.addComponent(cc.MeshRenderer);t.mesh=null,this.renderer=t;var e=cc.Material.getBuiltinMaterial("unlit");t.setMaterial(0,e)},e.prototype.onEnable=function(){this._refreshAll()},e.prototype._refreshAll=function(){this._updateMesh(),this._applySpriteFrame(),this._applyVertexes()},e.prototype._updateMesh=function(){var t=this._meshCache[this.vertexes.length];t||((t=new cc.Mesh).init(new l.VertexFormat([{name:l.ATTR_POSITION,type:l.ATTR_TYPE_FLOAT32,num:2},{name:l.ATTR_UV0,type:l.ATTR_TYPE_FLOAT32,num:2}]),this.vertexes.length,!0),this._meshCache[this.vertexes.length]=t),cc.log(t.nativeUrl),this.mesh=t},e.prototype._lerp=function(t,e,o){return t+o*(e-t)},e.prototype._applyVertexes=function(){var t=this.mesh;if(t.setVertices(l.ATTR_POSITION,this.vertexes),this._calculateUV(),this.vertexes.length>=3){var e=[],o=this.vertexes.map(function(t){return{x:t.x,y:t.y}}),n=new poly2tri.SweepContext(o,{cloneArrays:!0});try{n.triangulate(),n.getTriangles().forEach(function(t){t.getPoints().forEach(function(t){var n=o.indexOf(t);e.push(n)})})}catch(r){cc.error("poly2tri error",r)}0===e.length&&(cc.log("\u8ba1\u7b97\u9876\u70b9\u7d22\u5f15 \u5931\u8d25"),e.push.apply(e,a(this.vertexes.map(function(t,e){return e})))),t.setIndices(e),this.renderer.mesh=t}},e.prototype._calculateUV=function(){var t,e,o=this.mesh;if(this.spriteFrame){var n=this.spriteFrame.uv,r=this.spriteFrame.getTexture(),i=n[0],s=n[6],a=n[3],u=n[5],p=[];try{for(var f=c(this.vertexes),h=f.next();!h.done;h=f.next()){var d=h.value,_=this._lerp(i,s,(d.x+r.width/2+this.offset.x)/r.width),y=this._lerp(a,u,(d.y+r.height/2-this.offset.y)/r.height);p.push(cc.v2(_,y))}}catch(v){t={error:v}}finally{try{h&&!h.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}o.setVertices(l.ATTR_UV0,p)}},e.prototype._applySpriteFrame=function(){if(this.spriteFrame){var t=this.renderer.getMaterial(0),e=this.spriteFrame.getTexture();t.define("USE_DIFFUSE_TEXTURE",!0),t.setProperty("diffuseTexture",e)}},i([f],e.prototype,"_offset",void 0),i([f({type:cc.Vec2,tooltip:"\u4f4d\u7f6e\u504f\u79fb\u91cf"})],e.prototype,"offset",null),i([f],e.prototype,"_spriteFrame",void 0),i([f({type:cc.SpriteFrame,tooltip:"\u7cbe\u7075\u7684\u7cbe\u7075\u5e27"})],e.prototype,"spriteFrame",null),i([f],e.prototype,"_vertexes",void 0),i([f({type:cc.Vec2,tooltip:"\u9876\u70b9\u5750\u6807"})],e.prototype,"vertexes",null),i([p,h,d(cc.MeshRenderer),_("ui-extensions/MeshPolygonSprite")],e)}(cc.Component);o.default=y,cc._RF.pop()},{}],MorePower:[function(t,e,o){"use strict";cc._RF.push(e,"ee7fdf8vthKJYnkx8LO/H/q","MorePower");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Controller/LTrackerMgr"),l=t("../../../Controller/TableMgr"),u=t("../../../Controller/TurnTaskController"),p=t("../../../Define/EventId"),f=t("../../../Framework/Event/EventMgr"),h=t("../../../Framework/UI/UIFacade"),d=t("../../../Framework/UIBase"),_=t("../../../Framework/Utils/Utils"),y=t("./LifeSystem"),v=cc._decorator,m=v.ccclass,g=v.property,b=v.menu,I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labPro=null,e.nodeIcon=null,e}return r(e,t),e.prototype.onLoad=function(){c.default.inst.expo("cx224092",{});var t=l.TABLE.getGlobalById("G010").sGlobalData;this.labPro.string=y.default.infiniteEnergyAdNum+"/"+t},e.prototype.onWatchAbs=function(){return s(this,void 0,void 0,function(){var t=this;return a(this,function(){return u.default.inst.getProp("D006",function(e){c.default.inst.click("cx224092.dx333084",{isuccess:1}),t.setData(e)},function(){c.default.inst.click("cx224092.dx333084",{isuccess:0}),h.UIFacade.showToast("\u6d4f\u89c8\u65f6\u95f4\u4e0d\u8db3\uff0c\u8bf7\u518d\u8bd5\u8bd5\u54e6~")}),[2]})})},e.prototype.setData=function(t){var e;y.default.infiniteEnergyAdNum=t.infiniteEnergyAdNum;var o=l.TABLE.getGlobalById("G010").sGlobalData;this.labPro.string=y.default.infiniteEnergyAdNum+"/"+o,(null===(e=t.energy)||void 0===e?void 0:e.infiniteEndTime)&&t.energy.infiniteEndTime>_.default.getServerTime()?(f.EVENT.emit(p.EventId.ON_FLY,this.nodeIcon,t),h.UIFacade.showToast("\u83b7\u5f97\u65e0\u9650\u6311\u6218\u673a\u4f1a"),this.close()):h.UIFacade.showToast("\u89c6\u9891\u89c2\u770b\u6210\u529f")},i([g(cc.Label)],e.prototype,"labPro",void 0),i([g(cc.Node)],e.prototype,"nodeIcon",void 0),i([m,b("\u997f\u4e86\u4e48/MorePower")],e)}(d.default);o.default=I,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/TableMgr":"TableMgr","../../../Controller/TurnTaskController":"TurnTaskController","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIFacade":"UIFacade","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","./LifeSystem":"LifeSystem"}],MoxiHelper:[function(t,e,o){"use strict";cc._RF.push(e,"2ddf6xqK3hMp68AWugPRr2H","MoxiHelper");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.MoxiHelper=void 0;var i=t("./VXPlatform"),s=function(){function t(){}return t.init=function(){return this._sdk=window.MiniGame,window.Notice=function(){console.error("\u505c\u670d")},window.SendMessage=function(t){i.VXPlatform.wxToast(t),console.error("\u5f02\u5e38",t)},""},t.checkBuyInfo=function(){return n(this,void 0,void 0,function(){var t;return r(this,function(){return t={},this._sdk.checkBuyInfo(t).then(function(t){console.log(t)}),[2]})})},t}();o.MoxiHelper=s,cc._RF.pop()},{"./VXPlatform":"VXPlatform"}],MoxiModel:[function(t,e,o){"use strict";cc._RF.push(e,"14a0fJiX5ZPspruW/SzDokj","MoxiModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.EmailType=void 0;var n=t("./Platform");(function(t){t[t.putongjiangli=0]="putongjiangli",t[t.email=1]="email",t[t.compensation=2]="compensation"})(o.EmailType||(o.EmailType={}));var r=function(){function t(){this._taskInfo=null,this._userID="",this._platId="",this._exchangeInfo={month:0,monthLimit:3}}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.initData=function(t){t&&(t.taskInfo&&(this._taskInfo=t.taskInfo,cc.log(this._taskInfo)),t.userInfo&&(this._userInfo=t.userInfo,t.userInfo.inviteGameid&&(n.Platform.inviterGameId=t.userInfo.inviteGameid),console.log(this._userInfo)),this._authInfo=t.authInfo,this._userID=this._authInfo.pltId)},t.prototype.getUserId=function(){return this._userID},t.prototype.getPlatId=function(){return this._platId},t.prototype.getAuthInfo=function(){return this._authInfo},t.prototype.getInviterId=function(){return console.log("inviterGameid:"+this._userInfo.inviteGameid),this._userInfo.inviteGameid},t.prototype.getAvatarUrl=function(){return this._userInfo.avatarUrl},t}();o.default=r,cc._RF.pop()},{"./Platform":"Platform"}],MtopApi:[function(t,e,o){"use strict";cc._RF.push(e,"39c7eOc0JNJWq4mVcBL+Fxc","MtopApi"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.Apis={querytask:"mtop.ele.biz.growth.task.core.querytask",receivetask:"mtop.ele.biz.growth.task.core.receivetask",receiveprize:"mtop.ele.biz.growth.task.core.receiveprize",pageview:"mtop.ele.biz.growth.task.event.pageview",trigger:"mtop.ele.biz.growth.task.event.trigger",query:"mtop.alsc.playgame.mini.game.index",dispatch:"mtop.alsc.playgame.mini.game.dispatch",convertUrl:"mtop.elebiz.interactivesns.fcurl.convertUrl",checkByCro:"mtop.alsc.user.realName.checkByCro",authentication:"mtop.alsc.playgame.common.real.name.authentication",genShortLink:"mtop.elebiz.interactivesns.link.genShortLink",querypagerankandself:"mtop.koubei.elebizinteractivesns.rank.querypagerankandself"},t}();o.default=n,cc._RF.pop()},{}],MtopMgr:[function(t,e,o){"use strict";cc._RF.push(e,"4c826nLb8ZNT5U953Wxq4QQ","MtopMgr");var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Framework/Tools/BaseInfo"),a=t("./MtopApi"),c=t("./Request"),l=t("./WindVaneMgr"),u=function(){function t(){this._sdk=null,this._userInfo={site:25,userId:"16132902"},this._locationInfos=[],this._deviceInfo={}}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){return r(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return this._sdk=window.lib,t=this,[4,l.default.inst.getFullLocation()];case 1:return t._locationInfos=e.sent(),console.log(this._locationInfos,"this._locationInfos"),this._sdk?[2]:(console.error("NO SDK"),[2])}})})},t.prototype.querytask=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._mtop(a.default.Apis.querytask,"1.0",t)];case 1:return[2,e.sent()]}})})},t.prototype.pageview=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._mtop(a.default.Apis.pageview,"1.0",t)];case 1:return[2,e.sent()]}})})},t.prototype.tigger=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._mtop(a.default.Apis.tigger,"1.0",t)];case 1:return[2,e.sent()]}})})},t.prototype.getTask=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._mtop(a.default.Apis.receivetask,"1.0",t)];case 1:return[2,e.sent()]}})})},t.prototype.getAward=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this._mtop(a.default.Apis.receiveprize,"1.0",t)];case 1:return[2,e.sent()]}})})},t.prototype.queryCoin=function(){return r(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this._mtop(a.default.Apis.query,"1.0",{bizScene:s.default.BIZ_SCENE,actId:s.default.ACTID,collectionIds:JSON.stringify(s.default.COLLECTIONID)},!1)];case 1:return[2,null==(t=e.sent())?void 0:t.data.data]}})})},t.prototype.dispatch=function(t,e,o){return r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return[4,this._mtop(a.default.Apis.dispatch,"1.0",{bizScene:t,bizMethod:e,bizParam:JSON.stringify(o)},!1)];case 1:return[2,n.sent()]}})})},t.prototype.convertUrl=function(t){return r(this,void 0,void 0,function(){var e;return i(this,function(o){switch(o.label){case 0:return[4,this._mtop(a.default.Apis.convertUrl,"1.0",{bizScene:s.default.BIZ_SCENE,replaceUrl:t},!1)];case 1:return[2,null==(e=o.sent())?void 0:e.data.replaceUrl]}})})},t.prototype.genShortLink=function(t){return r(this,void 0,void 0,function(){var e,o;return i(this,function(n){switch(n.label){case 0:return e="ppe-r","ONLINE"==s.default.ENV&&(e="r"),[4,this._mtop(a.default.Apis.genShortLink,"1.0",{domainType:e,bizScene:s.default.BIZ_SCENE,path:t},!1)];case 1:return[2,null==(o=n.sent())?void 0:o.data.result]}})})},t.prototype.checkByCro=function(t,e){return r(this,void 0,void 0,function(){var o;return i(this,function(n){switch(n.label){case 0:return[4,this._mtop(a.default.Apis.checkByCro,"1.0",{userRealName:t,certNo:e,siteNum:25,cardType:"01",authSceneCode:s.default.ADULT_SCENE},!1)];case 1:return[2,null==(o=n.sent())?void 0:o.data]}})})},t.prototype.authentication=function(){return r(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this._mtop(a.default.Apis.authentication,"1.0",{bizScene:s.default.BIZ_SCENE},!1)];case 1:return[2,null==(t=e.sent())?void 0:t.data]}})})},t.prototype.querypagerankandself=function(t){return r(this,void 0,void 0,function(){var e,o;return i(this,function(n){switch(n.label){case 0:return e={bizScene:s.default.BIZ_SCENE,copyId:s.default.RANK_COPY_ID,actId:s.default.RANK_ACT_ID,pageSize:100,pageNum:1,bizNo:t},[4,this._mtop(a.default.Apis.querypagerankandself,"1.0",e,!1)];case 1:return[2,null==(o=n.sent())?void 0:o.data]}})})},t.prototype._mtop=function(t,e,o,s){return void 0===s&&(s=!0),r(this,void 0,Promise,function(){var e;return i(this,function(r){switch(r.label){case 0:return e=s?{locationInfos:JSON.stringify(this._locationInfos)}:{},[4,c.default.inst.request(t,n(n({},o),e))];case 1:return[2,r.sent()]}})})},t}();o.default=u,cc._RF.pop()},{"../Framework/Tools/BaseInfo":"BaseInfo","./MtopApi":"MtopApi","./Request":"Request","./WindVaneMgr":"WindVaneMgr"}],NetApi:[function(t,e,o){"use strict";cc._RF.push(e,"5fb29piT/9A7JzYf/8jnj66","NetApi"),Object.defineProperty(o,"__esModule",{value:!0}),o.NetApi=void 0;var n=function(){function t(){}return t.Apis={login:"player/login",startGame:"game/startGame",startGameV2:"game/startGameV2",settlement:"game/settlement",watchAbs:"game/watchAbs",useItem:"/game/useItem",getSubscribe:"/subscribe/getSubscribe",setSubscribe:"/subscribe/setSubscribe",finisheSubscribe:"/subscribe/finisheSubscribe",updateTask:"task/updateTask",getTasks:"/task/getTasks",finisheTask:"/task/finisheTask",queryPassTime:"/game/queryPassTime"},t}();o.NetApi=n,cc._RF.pop()},{}],NetBase:[function(t,e,o){"use strict";cc._RF.push(e,"c8720DvPjdCcbxWwFmMw+Ee","NetBase");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NetBase=void 0;var i=t("../Framework/Net/HttpRequest"),s=t("../Framework/Platform/Platform"),a=t("../Model/PlayerModel"),c=function(){function t(){}return Object.defineProperty(t,"sBaseURL",{get:function(){var t="";switch(s.Platform.getPlatType()){case s.PlatformType.WeiXin:t=s.Platform.getServerAddr();break;default:t=(window.location.protocol||"http:")+"//"+s.Platform.getServerAddr()}return cc.sys.isNative&&(t="http://"+s.Platform.getServerAddr()),t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sAccountBaseURL",{get:function(){var t="";switch(s.Platform.getPlatType()){case s.PlatformType.WeiXin:t="https://"+s.Platform.getAccountAddr();break;default:t=(window.location.protocol||"http:")+"//"+s.Platform.getAccountAddr()}return cc.sys.isNative&&(t="http://"+s.Platform.getAccountAddr()),t},enumerable:!1,configurable:!0}),t.get=function(t,e,o,n,r){return void 0===n&&(n={"Content-Type":"application/json"}),void 0===r&&(r=5),this.sendRequset("get",t,e,o,n,r)},t.post=function(t,e,o,n,r){void 0===n&&(n={"Content-Type":"application/json"}),void 0===r&&(r=5);var i=s.Platform.getGameId(),c=a.default.inst.getToken();return o||(o={}),c&&c.length>0&&(o.gameId=i,o.token=c),this.sendRequset("post",t,e,o,n,r)},t.accountPost=function(t,e,o,n,r){return void 0===n&&(n={"Content-Type":"application/json"}),void 0===r&&(r=5),t=this.sAccountBaseURL+t,this.sendRequset("post",t,e,o,n,r)},t.sendRequset=function(t,e,o,s,c,l){var u;return n(this,void 0,Promise,function(){var n,p,f;return r(this,function(r){switch(r.label){case 0:switch(t.toLocaleLowerCase()){case"get":n=i.HttpRequest.get(e,o,c,l);break;case"post":n=i.HttpRequest.post(e,o,s,c,l);break;default:cc.error("unkonw  http request method!")}return[4,n];case 1:if(p=r.sent(),i.HttpRequest.isWeb){if((f=p.data&&JSON.parse(p.data)).bizSuccess)return a.default.inst.saveSeverTime(f.serverTime),[2,f];throw this.onErrorCode(f.bizErrorCode,f.bizErrorMsg),f.bizErrorCode}if(f={},p){if(f=(null===(u=p.data)||void 0===u?void 0:u.data)&&JSON.parse(p.data.data),console.warn("JSON.parse(ret.data.data)",f),f.bizSuccess)return a.default.inst.saveSeverTime(f.serverTime),[2,f];throw this.onErrorCode(f.bizErrorCode,f.bizErrorMsg),f.bizErrorCode}throw"QiMenError"}})})},t.onErrorCode=function(){},t}();o.NetBase=c,cc._RF.pop()},{"../Framework/Net/HttpRequest":"HttpRequest","../Framework/Platform/Platform":"Platform","../Model/PlayerModel":"PlayerModel"}],Net:[function(t,e,o){"use strict";cc._RF.push(e,"bf5fda7wmRPbYJTimAqgUif","Net");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ErrorCode=o.Net=void 0;var i=t("./NetBase"),s=t("./NetApi"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.login=function(t){return this.post(s.NetApi.Apis.login,{},{inviterId:t})},e.startGame=function(){return this.post(s.NetApi.Apis.startGameV2,{},{})},e.useItem=function(t,e){return this.post(s.NetApi.Apis.useItem,{},{gameCode:t,itemId:e})},e.watchAbs=function(t,e){return this.post(s.NetApi.Apis.watchAbs,{},{gameCode:t,itemId:e})},e.queryLevels=function(){return this.post(s.NetApi.Apis.queryLevels,{},{})},e.settlement=function(t,e){return console.log("Pass Time ./..........",e),this.post(s.NetApi.Apis.settlement,{},{gameCode:t,passLevelTime:e})},e.getSubscribe=function(){return this.post(s.NetApi.Apis.getSubscribe,{},{})},e.setSubscribe=function(t){return this.post(s.NetApi.Apis.setSubscribe,{},{state:t})},e.finisheSubscribe=function(){return this.post(s.NetApi.Apis.finisheSubscribe,{},{})},e.getTasks=function(){return this.post(s.NetApi.Apis.getTasks,{},{})},e.finisheTask=function(t){return this.post(s.NetApi.Apis.finisheTask,{},{taskId:t})},e.updateTask=function(t){return this.post(s.NetApi.Apis.updateTask,{},{taskId:t})},e.queryPassTime=function(){return this.post(s.NetApi.Apis.queryPassTime,{},{})},e}(i.NetBase);o.Net=a,function(t){t[t.ok=0]="ok",t[t.param_error=1]="param_error",t[t.appid_error=2]="appid_error",t[t.session_key_error=3]="session_key_error",t[t.db_not_ready=10]="db_not_ready",t[t.db_error=11]="db_error",t[t.account_no=1001]="account_no",t[t.account_passwd_error=1002]="account_passwd_error",t[t.account_exist=1003]="account_exist",t[t.account_load_error=1010]="account_load_error",t[t.api_error=2001]="api_error",t[t.api_query_error=2002]="api_query_error",t[t.api_result_error=2003]="api_result_error",t[t.rank_error=5e3]="rank_error",t[t.rank_active_not_open=5010]="rank_active_not_open",t[t.rank_active_not_exist=5011]="rank_active_not_exist",t[t.role_no=10001]="role_no",t[t.role_exist=10004]="role_exist",t[t.role_token_error=10005]="role_token_error",t[t.role_no_mail=10006]="role_no_mail",t[t.role_no_taskId=10007]="role_no_taskId",t[t.role_no_taskType=10008]="role_no_taskType",t[t.login_error=10011]="login_error",t[t.task_can_not_reward=10031]="task_can_not_reward",t[t.task_not_found=10032]="task_not_found"}(o.ErrorCode||(o.ErrorCode={})),cc._RF.pop()},{"./NetApi":"NetApi","./NetBase":"NetBase"}],NodePool:[function(t,e,o){"use strict";cc._RF.push(e,"040c9gg3vJDmYzBE+Z6ypRm","NodePool");var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.NodePool=void 0;var r=t("./ResLoader"),i=function(){function t(){this._isReady=!1,this._createCount=0,this._warterMark=10,this._res=null,this._nodes=new Array}return t.prototype.isReady=function(){return this._isReady},t.prototype.init=function(){var t=this;if(this._isReady)cc.error("already inited!");else{var e=arguments[0],o=null;if(2==arguments.length&&"function"==typeof arguments[1]&&(o=arguments[1]),e instanceof cc.Prefab)return this._res=e,this._res.addRef(),this._isReady=!0,void(o&&o(null,this));"string"!=typeof arguments[0]?console.error("NodePool init error "+arguments[0]):r.resLoader.loadRes(arguments[0],cc.Prefab,function(e,n){e||(t._res=n,t._res.addRef(),t._isReady=!0),o&&o(e,t)})}},t.prototype.prepareNode=function(t){if(this.isReady)for(var e=0;e<t;++e){var o=cc.instantiate(this._res);this._createCount++,this._nodes.push(o)}else cc.error("node pool not ready!")},t.prototype.getNode=function(){return this.isReady?this._nodes.length>0?this._nodes.pop():(this._createCount++,cc.instantiate(this._res)):null},t.prototype.freeNode=function(t){if(!t||!cc.isValid(t))return cc.error("[ERROR] PrefabPool: freePrefab: isValid node"),void this._createCount--;this._nodes.length>this._warterMark?(this._createCount--,t.destroy()):(t.removeFromParent(!0),t.cleanup(),this._nodes.push(t))},t.prototype.setWaterMark=function(t){this._warterMark=t},t.prototype.isUnuse=function(){return this._nodes.length>this._createCount&&cc.error("PrefabPool: _nodes.length > _createCount"),this._nodes.length==this._createCount},t.prototype.destory=function(){var t,e;try{for(var o=n(this._nodes),r=o.next();!r.done;r=o.next())r.value.destroy()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}this._createCount-=this._nodes.length,this._nodes.length=0,this._res.decRef()},t}();o.NodePool=i,cc._RF.pop()},{"./ResLoader":"ResLoader"}],ObjectUtils:[function(t,e,o){"use strict";cc._RF.push(e,"51d91s9F2xI8Y2K/NEwP6RC","ObjectUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.isEmpty=function(t){return null==t},t.getProperty=function(t,e,o){return t&&null!==t[e]&&void 0!==t[e]?t[e]:o},t.getPropertyByNames=function(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];for(var r=t,i=0;i<o.length&&r;i++){var s=o[i];if(null===r[s]||void 0===r[s])break;if(r=r[s],i===o.length-1&&null!=r)return r}return e},t.getPropertyStringByNames=function(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];for(var r=t,i=e,s=0;s<o.length&&r;s++){var a=o[s];if(null===r[a]||void 0===r[a])break;if(r=r[a],s===o.length-1&&null!=r){var c=r;"string"==typeof c?i=c:"number"==typeof c&&(i=c.toString());break}}return i},t.getPropertyNumberByNames=function(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];for(var r=t,i=e,s=0;s<o.length&&r;s++){var a=o[s];if(null===r[a]||void 0===r[a])break;if(r=r[a],s===o.length-1&&null!=r){var c=r;"number"==typeof c?i=c:"string"==typeof c&&(i=parseInt(c));break}}return i},t.is=function(t,e){var o=!1;return e===Function&&"function"==typeof t?o=!0:e===Number&&"number"==typeof t?o=!0:e===Boolean&&"boolean"==typeof t?o=!0:e===String&&"string"==typeof t?o=!0:"object"==typeof t&&(o=t instanceof e),o},t.isString=function(t){return"string"==typeof t},t.isNumber=function(t){return"number"==typeof t},t.isFunction=function(t){return"function"==typeof t},t.getClassName=function(t){return null!=t&&t.constructor&&null!==t.constructor.name&&void 0!==t.constructor.name?t.constructor.name:""},t}();o.default=n,cc._RF.pop()},{}],PageViewOptimizer:[function(t,e,o){"use strict";cc._RF.push(e,"c708dNHzrNOs77i3qSrWppR","PageViewOptimizer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LoopType=o.Indicator=void 0;var s,a,c=t("../../Define/EventId"),l=t("../Event/EventMgr"),u=t("../Utils/Utils"),p=t("./ListViewOptimizer");(function(t){t[t.UnShow=0]="UnShow",t[t.Show=1]="Show"})(s=o.Indicator||(o.Indicator={})),function(t){t[t.NotLoop=0]="NotLoop",t[t.Loop=1]="Loop"}(a=o.LoopType||(o.LoopType={}));var f=cc._decorator,h=f.ccclass,d=f.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.indicator=s.Show,e.isLoop=a.NotLoop,e.pageIdxBg=null,e.pageIdxIcon=null,e.indicatorBGSize=10,e.indicatorSelSize=10,e.indicatorSpacing=10,e.startTime=0,e.startPos=null,e.pageIdx=null,e.itemWidth=0,e.itemHeight=0,e.speed=0,e.indicatorNode=null,e.indicators=[],e.arrows=null,e}return r(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.listview.inertia=!1,this.listview.node.on(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.listview.node.on(cc.Node.EventType.TOUCH_END,this._touchEnded,this),this.listview.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEnded,this),this.content.on(cc.Node.EventType.POSITION_CHANGED,this._updateContentView.bind(this)),this.nodeDesc="pageview";var e=cc.instantiate(this.itemTemplate);this.itemWidth=e.width,this.itemHeight=e.height,this.speed=1.3*this.itemWidth,e.destroy(),e=null},e.prototype._setPageIndex=function(){for(var t=0;t<this.indicators.length;t++){var e=this.indicators[t],o=e.getComponent(cc.Sprite);Number(t)+1==this.pageIdx?(o.spriteFrame=this.pageIdxIcon,e.width=this.indicatorSelSize,e.height=this.indicatorSelSize):(o.spriteFrame=this.pageIdxBg,e.width=this.indicatorBGSize,e.height=this.indicatorBGSize)}},e.prototype._canMove=function(t){var e=t.x-this.startPos.x,o=this.itemWidth;this.isVertical&&(e=t.y-this.startPos.y,o=this.itemHeight);var n=u.default.getServerTime(),r=Math.abs(e),i=(n-this.startTime)/1e3;return r>=o/2||r>25&&r/i>=this.speed},e.prototype._touchEnded=function(t){if((!this.isVertical||this.scrollView.vertical)&&(this.isVertical||this.scrollView.horizontal)){var e=t.getLocation(),o=this.pageIdx;if(!this.isVertical&&this.content.x>=-this.itemWidth/2||this.isVertical&&this.content.y<=this.itemHeight/2)return this.isLoop==a.Loop&&this._canMove(e)?(this.pageIdx=this.data.length,this.jumpToBottom()):this.isLoop==a.NotLoop&&(this.pageIdx=1),void(this.pageIdx!=o&&(this._setPageIndex(),l.EVENT.emit(c.EventId.ON_PAGEVIEW_INDEX_CHANGED,this.pageIdx)));if(!this.isVertical&&this.content.x<=-this.rowNum*(this.spacing+this.itemWidth)+this.itemWidth/2||this.isVertical&&this.content.y>this.rowNum*(this.spacing+this.itemHeight)-this.itemHeight/2)return this.isLoop==a.Loop&&this._canMove(e)?(this.pageIdx=1,this.jumpToTop()):this.isLoop==a.NotLoop&&(this.pageIdx=this.data.length),void(this.pageIdx!=o&&(this._setPageIndex(),l.EVENT.emit(c.EventId.ON_PAGEVIEW_INDEX_CHANGED,this.pageIdx)));var n=this._canMove(e),r=e.x-this.startPos.x,i=this.itemWidth;if(n){var s=1;this.isVertical&&(s=-1),this.pageIdx=r>0?this.pageIdx-s:this.pageIdx+s}this.pageIdx=Math.max(1,this.pageIdx),this.pageIdx=Math.min(this.data.length,this.pageIdx);var u=this.getItemPosition(this.pageIdx),p=u.x-i/2,f=cc.v2(p,0);this.isVertical&&(p=u.y-i/2,f=cc.v2(0,p)),this.listview.scrollToOffset(f,.1),o!=this.pageIdx&&(this._setPageIndex(),l.EVENT.emit(c.EventId.ON_PAGEVIEW_INDEX_CHANGED,this.pageIdx))}},e.prototype._touchStart=function(t){this.startTime=u.default.getServerTime(),this.startPos=t.getLocation()},e.prototype.getItemPosition=function(t){void 0===t&&(t=1);var e=new cc.Vec2(0,0);return t=Math.min(this.data.length,t),this.isVertical?e.y=(this.spacing+this.itemHeight)*t-this.itemHeight/2:e.x=(this.spacing+this.itemWidth)*t-this.itemWidth/2,e},e.prototype.setData=function(e,o,n){if(void 0===n&&(n=!1),this.pageIdx=this.initIdx,t.prototype.setData.call(this,e,o,n),this.indicator==s.Show){var r=this.listview.node.getChildByName("_indicator_");if(!r){var i=(r=new cc.Node("_indicator_")).addComponent(cc.Layout);i.type=cc.Layout.Type.HORIZONTAL,i.horizontalDirection=cc.Layout.HorizontalDirection.LEFT_TO_RIGHT,r.height=this.indicatorBGSize,r.x=0,r.y=-this.node.height/2+this.indicatorBGSize/2+5,i.spacingX=this.indicatorSpacing,this.isVertical&&(i.type=cc.Layout.Type.VERTICAL,i.verticalDirection=cc.Layout.VerticalDirection.TOP_TO_BOTTOM,r.width=this.indicatorBGSize,r.height=0,r.y=0,r.x=-this.node.width/2+this.indicatorBGSize/2+5,i.spacingY=this.indicatorSpacing),this.indicatorNode=r,this.indicatorNode.parent=this.listview.node,this.indicatorNode.zIndex=-1}for(var a=this.indicators.length;a<this.rowNum;a++){(u=new cc.Node).width=this.indicatorBGSize,u.height=this.indicatorBGSize,u.parent=this.indicatorNode;var c=new cc.Node;c.parent=u;var l=c.addComponent(cc.Sprite);this.indicators.push(c),l.spriteFrame=this.pageIdxBg,c.width=this.indicatorBGSize,c.height=this.indicatorBGSize,this.isVertical?this.indicatorNode.height+=this.indicatorSpacing+this.indicatorBGSize:this.indicatorNode.width+=this.indicatorSpacing+this.indicatorBGSize}for(a=this.indicators.length;a>this.rowNum;a--){var u;(u=this.indicators[a-1]).parent.destroy(),this.indicators.splice(a-1),this.isVertical?this.indicatorNode.height-=this.indicatorSpacing+this.indicatorBGSize:this.indicatorNode.width-=this.indicatorSpacing+this.indicatorBGSize}this._setPageIndex()}this._createArrows()},e.prototype._createArrows=function(){var t=this.listview.node.getChildByName("_arrow_");t&&t.destroy();var e=this.listview.content.width,o=this.listview.node.width;if(this.isVertical&&(e=this.listview.content.height,o=this.listview.node.height),this.arrows=this.listview.node.getChildByName("_arrows_"),!(!this.arrow||e<=o||this.arrows)){this.arrowNode=new cc.Node("_arrows_"),this.arrowNode.parent=this.listview.node;var n=cc.instantiate(this.arrow);n.parent=this.arrowNode;var r=cc.v2(-this.listview.node.width/2+n.height/2+20,0),i=-90;this.isVertical&&(r=cc.v2(0,this.listview.node.height/2-n.height/2-20),i=180),n.angle=i,n.setPosition(r),n.name="_leftArrow_",n.opacity=1==this.pageIdx?0:255;var s=cc.instantiate(this.arrow);s.parent=this.arrowNode,r=cc.v2(this.listview.node.width/2-s.height/2-20,0),i=90,this.isVertical&&(r=cc.v2(0,-this.listview.node.height/2+s.height/2+20),i=0),s.angle=i,s.setPosition(r),s.name="_rightArrow_",s.opacity=this.pageIdx==this.data.length?0:255}},e.prototype.setIndicatorPostion=function(t){this.indicatorNode.setPosition(t)},e.prototype.getCurrentPageIndex=function(){return this.pageIdx-1},e.prototype.setCurrentPageIndex=function(e){e<0||e>this.rowNum-1?cc.log("index error! max index is "+(this.rowNum-1)+", param idx is "+e):e+1!=this.pageIdx&&(this.pageIdx=e+1,t.prototype.jumpTo.call(this,e),this._setPageIndex(),l.EVENT.emit(c.EventId.ON_PAGEVIEW_INDEX_CHANGED,this.pageIdx))},e.prototype.addPage=function(t){this.data.push(t),this.setData(this.data,this.itemUpdateFunc)},e.prototype.insertPage=function(t,e){e=Math.min(e,this.rowNum),e=Math.max(e,0),this.data.push(t);var o=this.data[e];this.data[e]=t;for(var n=this.rowNum-1;n>e;n--)this.data[n]=n==e+1?o:this.data[n-1];this.setData(this.data,this.itemUpdateFunc)},e.prototype.removePageAtIndex=function(t){t<0||t>this.rowNum-1?cc.log("index error! max index is "+(this.rowNum-1)+", param idx is "+t):(this.data.splice(t,1),this.setData(this.data,this.itemUpdateFunc))},e.prototype.scrollToPage=function(e,o){void 0===o&&(o=.1),e<0||e>this.rowNum-1?cc.log("index error! max index is "+(this.rowNum-1)+", param idx is "+e):e+1!=this.pageIdx&&(this.pageIdx=e+1,t.prototype.scrollTo.call(this,e,o),this._setPageIndex(),l.EVENT.emit(c.EventId.ON_PAGEVIEW_INDEX_CHANGED,this.pageIdx))},e.prototype.getCurPage=function(){var t=this.getItemPosition(this.pageIdx);return t=this.listview.content.convertToWorldSpaceAR(t),t=cc.director.getScene().convertToNodeSpaceAR(t),this.getItem(t)},e.prototype._updateContentView=function(){if(t.prototype._updateContentView.call(this,this.isLoop===a.Loop),this.arrowNode){this.showArrow();for(var e=this.arrowNode.children,o=0;o<e.length;o++)e[o].opacity=255;this.pageIdx==this.data.length&&(this.arrowNode.getChildByName("_rightArrow_").opacity=0),1==this.pageIdx&&(this.arrowNode.getChildByName("_leftArrow_").opacity=0)}},i([d({type:cc.Enum(s)})],e.prototype,"indicator",void 0),i([d({type:cc.Enum(a)})],e.prototype,"isLoop",void 0),i([d(cc.SpriteFrame)],e.prototype,"pageIdxBg",void 0),i([d(cc.SpriteFrame)],e.prototype,"pageIdxIcon",void 0),i([d],e.prototype,"indicatorBGSize",void 0),i([d],e.prototype,"indicatorSelSize",void 0),i([d],e.prototype,"indicatorSpacing",void 0),i([h],e)}(p.default);o.default=_,cc._RF.pop()},{"../../Define/EventId":"EventId","../Event/EventMgr":"EventMgr","../Utils/Utils":"Utils","./ListViewOptimizer":"ListViewOptimizer"}],ParticleActvator:[function(t,e,o){"use strict";cc._RF.push(e,"b1162EEFPxHLZ+55lAl2hJu","ParticleActvator");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this._particle=this.node.getComponent(cc.ParticleSystem),this._particle||cc.error("ParticleActvator should be atttached to a cc.ParticleSystem node!")},e.prototype.onEnable=function(){this._particle&&this._particle.resetSystem()},i([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],PicSystem:[function(t,e,o){"use strict";cc._RF.push(e,"d4c1edJPNVOo7JX3QHR2d7v","PicSystem");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/Constant"),s=t("../Framework/UI/UIMgr"),a=function(){function t(){this.picSpriteFrames=new Object,this.skinPath="Pic",this._obstacleFrames=null}return t.prototype.initialize=function(){return n(this,void 0,void 0,function(){var t=this;return r(this,function(){return[2,new Promise(function(e){cc.resources.loadDir(t.skinPath,cc.SpriteFrame,null,function(o,n){o||0===n.length?s.default.inst.showToast("skin load error ....."):(n.forEach(function(e){Number(e.name)==i.LINK_GAME_OBSTACLE_ID?t._obstacleFrames=e:t.picSpriteFrames[Number(e.name)]=e}),e(n))})})]})})},t.prototype.getRandomPic=function(t){var e=Object.keys(this.picSpriteFrames);return Math.min(e.length,t),e.sort(function(){return Math.random()<.5?1:-1}).slice(0,t)},t.prototype.getPicSpriteFrame=function(t){return this.picSpriteFrames[t]||this._obstacleFrames},t}();o.default=new a,cc._RF.pop()},{"../Common/Constant":"Constant","../Framework/UI/UIMgr":"UIMgr"}],Picitem:[function(t,e,o){"use strict";cc._RF.push(e,"9281ed/rvVK8LYn2sGQx2qB","Picitem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Picitem=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,l=t("../../../Common/AudioConfig"),u=t("../../../Common/Constant"),p=t("../../../Define/EventId"),f=t("../../../Framework/Event/EventMgr"),h=t("../../../System/AudioSystem"),d=t("../../../System/PicSystem"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.picAni=null,e.selectedNode1=null,e.selectedNode2=null,e.apperNode=null,e.particleNode=null,e.brokenNode=null,e.isSelected=!1,e._curAni=null,e._isVaild=!1,e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.picAni.on("finished",function(){t.playAniFinish()})},e.prototype.onEnable=function(){f.EVENT.on(p.EventId.ON_CLICK_LINK_GAME_OBSTACLE,this.onStopJumpAction,this),f.EVENT.on(p.EventId.ON_CLICK_LINK_GAME_PIC,this.onStopJumpAction,this)},e.prototype.onDisable=function(){f.EVENT.off(p.EventId.ON_CLICK_LINK_GAME_OBSTACLE,this.onStopJumpAction,this),f.EVENT.off(p.EventId.ON_CLICK_LINK_GAME_PIC,this.onStopJumpAction,this)},e.prototype.initItem=function(t,e){this.backNormalState(),this.picId=t,this.pos=e,this._isVaild=!0,this.iconSpr.spriteFrame=d.default.getPicSpriteFrame(t),this.node.zIndex=e.y},e.prototype.playDelayShow=function(t){var e=this;this.node.active=!1,setTimeout(function(){e.node.active=!0,e.playPicAnimation("Appear")},t)},e.prototype.onClickPicItem=function(){if(this._isVaild){if(h.default.play(l.AUDIOS_PATH.block_click),this.picId==u.LINK_GAME_OBSTACLE_ID)return console.error("\u969c\u788d\u7269\u4e0d\u53ef\u8fde\u7ebf"),void f.EVENT.emit(p.EventId.ON_CLICK_LINK_GAME_OBSTACLE,this);f.EVENT.emit(p.EventId.ON_CLICK_LINK_GAME_PIC,this)}},e.prototype.onStopJumpAction=function(){"Tishi_jump"==this._curAni&&this.backNormalState()},e.prototype.selected=function(){this.playPicAnimation("Select"),this.isSelected=!0},e.prototype.unSelected=function(){this.backNormalState(),this.isSelected=!1},e.prototype.backNormalState=function(){this._curAni=null,this.node.active=!0,this.picAni.stop(),this.selectedNode1.active=!1,this.selectedNode2.active=!1,this.apperNode.active=!1,this.particleNode.active=!1,this.brokenNode.active=!1,this.iconSpr.node.active=!0,this.iconSpr.node.opacity=255,this.iconSpr.node.scale=1,this.iconSpr.node.x=0,this.iconSpr.node.y=0,this.iconSpr.node.angle=0},e.prototype.isObstacle=function(){return this.picId==u.LINK_GAME_OBSTACLE_ID},e.prototype.showObstacleHint=function(){this.playPicAnimation("ZhangAi")},e.prototype.hideObstacleHint=function(){this.backNormalState()},e.prototype.playDisappear=function(t){this._isVaild=!1,this.isObstacle()?this.playPicAnimation("Posui",t):this.playPicAnimation("Disappear",t)},e.prototype.showJumpHint=function(){this.playPicAnimation("Tishi_jump")},e.prototype.playPicAnimation=function(t,e){switch(this._aniCb&&(this._aniCb(),console.error("cb isExist ............................")),this.backNormalState(),t){case"Appear":this.apperNode.active=!0,this.particleNode.active=!0;break;case"Disappear":this.particleNode.active=!0;break;case"Tishi_jump":break;case"Select":this.selectedNode1.active=!0,this.selectedNode2.active=!0;break;case"Posui":this.brokenNode.active=!0}this._curAni=t,this.picAni.play(t),this._aniCb=e},e.prototype.playAniFinish=function(){console.log("Play Animation finish....."),this._aniCb?(this._aniCb(),this._aniCb=null,this.backNormalState()):this.backNormalState()},i([c(cc.Sprite)],e.prototype,"iconSpr",void 0),i([c(cc.Animation)],e.prototype,"picAni",void 0),i([c(cc.Node)],e.prototype,"selectedNode1",void 0),i([c(cc.Node)],e.prototype,"selectedNode2",void 0),i([c(cc.Node)],e.prototype,"apperNode",void 0),i([c(cc.Node)],e.prototype,"particleNode",void 0),i([c(cc.Node)],e.prototype,"brokenNode",void 0),i([a],e)}(cc.Component);o.Picitem=_,cc._RF.pop()},{"../../../Common/AudioConfig":"AudioConfig","../../../Common/Constant":"Constant","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../System/AudioSystem":"AudioSystem","../../../System/PicSystem":"PicSystem"}],PlatMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0a62crjmExIYKEJYyW06GMG","PlatMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Define/EventId"),s=t("../Framework/Event/EventMgr"),a=t("../Framework/Net/HttpRequest"),c=t("../Framework/Platform/Platform"),l=t("../Framework/Tools/BaseInfo"),u=t("./AfunRiskSDKController"),p=t("./DoubleAwardController"),f=t("./ExitController"),h=t("./ExLogCtr"),d=t("./LTrackerMgr"),_=t("./MtopMgr"),y=t("./Request"),v=t("./ShareMgr"),m=t("./TurnTaskController"),g=t("./WindVaneMgr"),b=function(){function t(){this._startTime=0,this._endTime=0}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){return n(this,void 0,void 0,function(){var t,e;return r(this,function(o){switch(o.label){case 0:return t=c.Platform.getUrlInfo("model"),a.HttpRequest.isWeb="ONLINE"!=l.default.ENV&&"web"==t,e=this,u.default.inst.init(),h.default.inst.init(),v.default.inst.init(),p.default.inst.init(),y.default.inst.init(),d.default.inst.init(),g.default.inst.init(),[4,_.default.inst.init()];case 1:return o.sent(),this._initBaseInfo(),window.document.addEventListener("WV.Event.APP.Active",function(){e._endTime=(new Date).getTime(),console.log("====> on show <=====",e._endTime),s.EVENT.emit(i.EventId.ON_SHOW),s.EVENT.emit(i.EventId.ON_REFRESH_COIN)},!1),window.document.addEventListener("WV.Event.APP.Background",function(){e._startTime=(new Date).getTime(),console.log("====> on hide <=====",e._startTime)},!1),m.default.inst.getTaskList(),window.openExitDialog=function(){f.default.inst.openExit()},[2]}})})},Object.defineProperty(t.prototype,"browserTime",{get:function(){return console.log("\u5207\u5c4f\u65f6\u95f4",(this._endTime-this._startTime)/1e3|0),(this._endTime-this._startTime)/1e3|0},enumerable:!1,configurable:!0}),t.prototype._initBaseInfo=function(){window.BaseInfoData&&(l.default.ACTID=window.BaseInfoData.ACTID,l.default.COLLECTIONID=window.BaseInfoData.COLLECTIONID,l.default.ENV=window.BaseInfoData.ENV,l.default.TASK_GAME_PROP=window.BaseInfoData.TASK_GAME_PROP,l.default.RANK_COPY_ID=window.BaseInfoData.RANK_COPY_ID?window.BaseInfoData.RANK_COPY_ID:l.default.RANK_COPY_ID,l.default.RANK_ACT_ID=window.BaseInfoData.RANK_ACT_ID?window.BaseInfoData.RANK_ACT_ID:l.default.RANK_ACT_ID)},t}();o.default=b,cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Net/HttpRequest":"HttpRequest","../Framework/Platform/Platform":"Platform","../Framework/Tools/BaseInfo":"BaseInfo","./AfunRiskSDKController":"AfunRiskSDKController","./DoubleAwardController":"DoubleAwardController","./ExLogCtr":"ExLogCtr","./ExitController":"ExitController","./LTrackerMgr":"LTrackerMgr","./MtopMgr":"MtopMgr","./Request":"Request","./ShareMgr":"ShareMgr","./TurnTaskController":"TurnTaskController","./WindVaneMgr":"WindVaneMgr"}],PlatformDefault:[function(t,e,o){"use strict";cc._RF.push(e,"912f3M9gZFE3787ruyoaamY","PlatformDefault"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Framework/UI/UIMgr"),r=function(){function t(){}return t.prototype.initialize=function(){cc.log("\u521d\u59cb\u5316\u9ed8\u8ba4\u5e7f\u544a\u6846\u67b6")},t.prototype.showToast=function(t){cc.log("\u663e\u793atoast  ",t)},t.prototype.shareAppMessage=function(t){void 0===t&&(t={}),cc.log("\u5206\u4eab ",t)},t.prototype.vibrateShort=function(t){void 0===t&&(t={}),cc.log("\u77ed\u9707\u52a8 ",t)},t.prototype.vibrateLong=function(t){void 0===t&&(t={}),cc.log("\u957f\u9707\u52a8 ",t)},t.prototype.shareShowReward=function(t){void 0===t&&(t=null),cc.log("\u76f4\u63a5\u6267\u884c\u5206\u4eab\u56de\u8c03"),t&&t()},t.prototype.showRewardVideo=function(t){void 0===t&&(t=null),n.default.inst.showToast("\u64ad\u653e\u89c6\u9891\uff01\uff01\uff01"),cc.log("\u76f4\u63a5\u6267\u884c\u89c6\u9891\u56de\u8c03"),t&&t()},t.prototype.showBannerAd=function(){cc.log("\u663e\u793abanner\u5e7f\u544a")},t.prototype.hideBannerAd=function(t){void 0===t&&(t=!1),cc.log("\u9690\u85cfbanner\u5e7f\u544a\uff0c\u5237\u65b0\uff1a",t)},t.prototype.refreshBannerAd=function(){cc.log("\u5237\u65b0banner\u5e7f\u544a")},t.prototype.showInterstitialAd=function(){cc.log("\u663e\u793a\u63d2\u5c4f\u5e7f\u544a")},t.prototype.showCustomAd=function(){cc.log("\u663e\u793a\u81ea\u5b9a\u4e49\u5e7f\u544a")},t.prototype.hideCustomAd=function(){cc.log("\u9690\u85cf\u81ea\u5b9a\u4e49\u5e7f\u544a")},t.prototype.showGridAd=function(){cc.log("\u663e\u793a\u683c\u5b50\u5e7f\u544a")},t.prototype.hideGridAd=function(){cc.log("\u9690\u85cf\u683c\u5b50\u5e7f\u544a")},t.prototype.exitGame=function(){cc.log("\u9000\u51fa\u6e38\u620f")},t.prototype.__createVideoAd=function(){cc.log("\u521b\u5efa\u89c6\u9891\u5e7f\u544a")},t.prototype.__createBannerAd=function(){cc.log("\u521b\u5efabanner\u5e7f\u544a")},t.prototype.__createInterstitialAd=function(){cc.log("\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a")},t}();o.default=new r,cc._RF.pop()},{"../Framework/UI/UIMgr":"UIMgr"}],PlatformSystem:[function(t,e,o){"use strict";cc._RF.push(e,"a22d2MBCw9JeZ4CaZUuoOi/","PlatformSystem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./PlatformDefault"),r=t("./PlatformWX"),i=function(){function t(){this._platformWX=r.default,this._platformDefault=n.default}return Object.defineProperty(t.prototype,"platform",{get:function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:return this._platformWX;default:return this._platformDefault}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:this._platformWX.initialize();break;default:this._platformDefault.initialize()}},t}();o.default=new i,cc._RF.pop()},{"./PlatformDefault":"PlatformDefault","./PlatformWX":"PlatformWX"}],PlatformWX:[function(t,e,o){"use strict";cc._RF.push(e,"5b030wJHVpEILrh6SvxUEpG","PlatformWX"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Common/Helper"),r=t("../System/AudioSystem"),i=t("./wxConfig"),s=function(){function t(){this._onHideTime=1/0,this._shareTimes=0,this._shareSuccessHandler=null,this._videoSuccessHandler=null,this._showInterstitialAdTime=null,this._shareModalIsActive=!1}return t.prototype.initialize=function(){var t=this;cc.log("\u521d\u59cb\u5316\u5fae\u4fe1\u6846\u67b6"),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:function(){},fail:function(){},complete:function(){}}),wx.onShow(function(){if(null!=t._shareSuccessHandler&&!t._shareModalIsActive){switch(t._shareTimes+=1,t._shareTimes){case 1:wx.showModal({title:"\u5206\u4eab\u5931\u8d25",content:"\u6210\u529f\u5206\u4eab\u5230\u7fa4\u5373\u53ef\u83b7\u5f97\u5956\u52b1",success:function(e){e.confirm?t.shareShowReward(t._shareSuccessHandler):e.cancel&&(t._shareSuccessHandler=null,t._shareTimes=0),t._shareModalIsActive=!1}}),t._shareModalIsActive=!0;break;case 2:Date.now()-t._onHideTime>=4e3?(t._shareSuccessHandler&&t._shareSuccessHandler(),t._shareTimes=0):(wx.showModal({title:"\u5206\u4eab\u5931\u8d25",content:"\u6210\u529f\u5206\u4eab\u5230\u7fa4\u5373\u53ef\u83b7\u5f97\u5956\u52b1",success:function(e){e.confirm?t.shareShowReward(t._shareSuccessHandler):e.cancel&&(t._shareSuccessHandler=null,t._shareTimes=0),t._shareModalIsActive=!1}}),t._shareModalIsActive=!0);break;case 3:t._shareSuccessHandler&&t._shareSuccessHandler(),t._shareSuccessHandler=null,t._shareTimes=0}t._onHideTime=1/0}}),this.__createBannerAd(),this.__createVideoAd(),this.__createCustomAd(),this.__createInterstitialAd(),this.__createGridAd()},t.prototype.showToast=function(t){var e={title:"",icon:"none",duration:2e3};Object.assign(e,t),wx.showToast(e)},t.prototype.shareAppMessage=function(t){void 0===t&&(t={}),wx.shareAppMessage(t)},t.prototype.vibrateShort=function(t){void 0===t&&(t={}),wx.vibrateShort(t)},t.prototype.vibrateLong=function(t){void 0===t&&(t={}),wx.vibrateLong(t)},t.prototype.shareShowReward=function(t){void 0===t&&(t=null),this._shareSuccessHandler=t,this._onHideTime=Date.now(),this.shareAppMessage()},t.prototype.showRewardVideo=function(t){var e=this;void 0===t&&(t=null),this._rewardVideo?(this._videoSuccessHandler=t,this._rewardVideo.show().then(function(){cc.log("\u89c6\u9891\u64ad\u653e\u6210\u529f")}).catch(function(){e._rewardVideo.load().then(function(){e._rewardVideo.show().then(function(){cc.log("\u89c6\u9891\u91cd\u65b0\u52a0\u8f7d\uff0c\u64ad\u653e\u6210\u529f")})}).catch(function(){e.shareShowReward(t),e._videoSuccessHandler=null})})):this.__turnVideoToShare(t)},t.prototype.showBannerAd=function(){var t=this;if(this._bannerAd){var e=wx.getSystemInfoSync(),o=e.screenWidth,n=e.screenHeight;this._bannerAd.show().then(function(){t._bannerAd.style.left=(o-t._bannerAd.style.realWidth)/2,t._bannerAd.style.top=n-t._bannerAd.style.realHeight}).catch(function(t){cc.log("banner\u5e7f\u544a\u663e\u793a\u51fa\u9519",t)})}},t.prototype.hideBannerAd=function(t){void 0===t&&(t=!1),this._bannerAd&&(this._bannerAd.hide(),t&&this.refreshBannerAd())},t.prototype.refreshBannerAd=function(){this._bannerAd&&(this._bannerAd.destroy(),this.__createBannerAd())},t.prototype.showInterstitialAd=function(){if(this._interstitialAd){var t=Date.now();null!=this._showInterstitialAdTime?t-this._showInterstitialAdTime>12e4&&(this._interstitialAd.show(),this._showInterstitialAdTime=t):this._showInterstitialAdTime=t}},t.prototype.showCustomAd=function(){this._customAd&&this._customAd.show().catch(function(t){cc.log("\u539f\u751f\u5e7f\u544a\u663e\u793a\u51fa\u9519",t)})},t.prototype.hideCustomAd=function(){this._customAd&&this._customAd.hide().catch(function(t){cc.log("\u539f\u751f\u5e7f\u544a\u9690\u85cf\u51fa\u9519",t)})},t.prototype.showGridAd=function(){this._gridAd&&this._gridAd.show().catch(function(t){cc.log("\u683c\u5b50\u5e7f\u544a\u663e\u793a\u51fa\u9519",t)})},t.prototype.hideGridAd=function(){this._gridAd&&this._gridAd.hide().catch(function(t){cc.log("\u683c\u5b50\u5e7f\u544a\u9690\u85cf\u51fa\u9519",t)})},t.prototype.exitGame=function(){wx.exitMiniProgram({})},t.prototype.__createVideoAd=function(){var t=this;i.WX_CONFIG.AD_ID.video&&(this._rewardVideo=wx.createRewardedVideoAd({adUnitId:i.WX_CONFIG.AD_ID.video}),this._rewardVideo.onClose(function(e){if(e&&e.isEnded||void 0===e){if(null==t._videoSuccessHandler)return;t._videoSuccessHandler&&t._videoSuccessHandler()}else t.showToast({title:"\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u6709\u5956\u52b1\u54e6"});t._videoSuccessHandler=null,r.default.stopMusic(),r.default.playMusic()}),this._rewardVideo.onError(function(){t.showToast({title:"\u6682\u65f6\u6ca1\u6709\u53ef\u89c2\u770b\u7684\u89c6\u9891"}),t.shareShowReward(t._videoSuccessHandler),t._videoSuccessHandler=null}))},t.prototype.__createBannerAd=function(){if(i.WX_CONFIG.AD_ID.banner){var t=wx.getSystemInfoSync();this._bannerAd=wx.createBannerAd({adUnitId:i.WX_CONFIG.AD_ID.banner,style:{left:0,top:0,width:n.default.isNormalScreen()?300:t.screenWidth,height:0}}),this._bannerAd.onError(function(t){t.errCode}),this._bannerAd.onResize(function(){})}},t.prototype.__createInterstitialAd=function(){i.WX_CONFIG.AD_ID.interstitial&&(this._interstitialAd=wx.createInterstitialAd({adUnitId:i.WX_CONFIG.AD_ID.interstitial}))},t.prototype.__createCustomAd=function(){if(i.WX_CONFIG.AD_ID.custom){var t=wx.getSystemInfoSync();this._customAd=wx.createCustomAd({adUnitId:i.WX_CONFIG.AD_ID.custom,adIntervals:60,style:{left:t.screenWidth-100,top:20+(t.screenHeight-t.screenWidth/720*1280)/2}}),this._customAd.onError(function(t){t.errCode})}},t.prototype.__createGridAd=function(){if(i.WX_CONFIG.AD_ID.grid){var t=wx.getSystemInfoSync();this._gridAd=wx.createGridAd({adUnitId:i.WX_CONFIG.AD_ID.grid,adTheme:"white",gridCount:5,style:{left:(t.screenWidth-330)/2,top:t.screenHeight/2-20,width:330,opacity:.8}}),this._gridAd.onError(function(t){t.errCode})}},t.prototype.__turnVideoToShare=function(t){this.shareShowReward(t),this._videoSuccessHandler=null},t}();o.default=new s,cc._RF.pop()},{"../Common/Helper":"Helper","../System/AudioSystem":"AudioSystem","./wxConfig":"wxConfig"}],Platform:[function(t,e,o){"use strict";cc._RF.push(e,"df27ct6ewRCeLZGHOUt2eke","Platform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.Platform=o.PlatformType=void 0;var i,s=t("../../Define/EventId"),a=t("../Event/EventMgr"),c=t("./MoxiModel"),l=t("../../Network/Net"),u=t("../Utils/Utils");(function(t){t[t.None=0]="None",t[t.TaoBao=1]="TaoBao",t[t.WeiXin=2]="WeiXin"})(i=o.PlatformType||(o.PlatformType={}));var p=function(){function t(){}return t.init=function(e,o){return n(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return this._gameId=e,[4,t.login(o)];case 1:return n.sent(),[2]}})})},t.getEnterParam=function(t){switch(this._type){case i.TaoBao:if("inviterId"==t)return c.default.inst.getInviterId();break;case i.WeiXin:return"inviterId"==t?c.default.inst.getInviterId():"";default:var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=window.location.search&&window.location.search.substr(1).match(e);if(null!=o)return decodeURIComponent(o[2])}},t.getPlatType=function(){return this._type},t.getUrlInfo=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=window.location.search.substring(1).match(e);if(null!=o)return console.log("window.location.search",o[2]),decodeURIComponent(o[2])},t.login=function(t){return n(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,l.Net.login(t).then(function(t){console.warn(t,"\u767b\u5f55"),u.default.initServerTime(t.serverTime);var e=t.data;a.EVENT.emit(s.EventId.ON_LOGIN_RET,e)})];case 1:return e.sent(),[2]}})})},t.getServerAddr=function(){return this._serverUrl},t.getAccountAddr=function(){return this._accountUrl},t.getGameId=function(){return this._gameId},t._type=i.None,t._serverUrl="elm.moxigame.cn/istio/elelink-pre/",t._accountUrl="",t._gameId="",t}();o.Platform=p,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Network/Net":"Net","../Event/EventMgr":"EventMgr","../Utils/Utils":"Utils","./MoxiModel":"MoxiModel"}],PlayerModel:[function(t,e,o){"use strict";cc._RF.push(e,"b6cdb//Qa9FdoSi7tAMoRVu","PlayerModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Common/Constant"),r=t("../Define/EventId"),i=t("../Framework/Event/EventMgr"),s=t("../Framework/Utils/Utils"),a=t("../System/GamingSystem"),c=t("../View/UI/Power/LifeSystem"),l=t("./TaskModel"),u=function(){function t(){this._token="token",this._openId="",this._gameOrder=null,this.levelId=null,this._serverTime=null,this._isNew=!1,this._items=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.initData=function(t){c.default.initialize(t.energy,t.infiniteEnergyAdNum),this._openId=t.openId,this._token=t.token,this.levelId=t.lastLevelId.toString(),this._isNew=t.isNew,l.default.inst.setNetSubStauts(t.subscribe.state),l.default.inst.setNetSubAwardStauts(t.subscribe.isFinishe),l.default.inst.setGameTaskPro(t.task)},t.prototype.getToken=function(){return this._token},Object.defineProperty(t.prototype,"isNew",{get:function(){return this._isNew},enumerable:!1,configurable:!0}),t.prototype.saveSeverTime=function(t){this._serverTime=t},t.prototype.getServerTime=function(){return this._serverTime},t.prototype.getOpenId=function(){return this._openId},t.prototype.getGameCode=function(){return this._gameOrder&&this._gameOrder.orderId},t.prototype.getGameCreateTime=function(){return this._gameOrder&&this._gameOrder.createTime},t.prototype.startNewGame=function(t,e){var o;this.levelId=e,this._gameOrder={orderId:t,levelId:e,gameItemMap:(o={},o[n.PROP_ID.Hint]=n.GAME_ITEM_STATE.UnGet,o[n.PROP_ID.RemoveObstacle]=n.GAME_ITEM_STATE.UnGet,o),createTime:s.default.getServerTime()},a.default.startGame(e)},t.prototype.isWatchOver=function(t){var e=this._gameOrder.gameItemMap;return e&&e[t]!=n.GAME_ITEM_STATE.UnGet},t.prototype.setGameItemState=function(t,e){var o=this._gameOrder.gameItemMap;o&&(o[t]=e),i.EVENT.emit(r.EventId.ON_UPDATE_PROP_STATE)},t.prototype.getGameItemState=function(t){var e=this._gameOrder.gameItemMap;return e&&e[t]},t.prototype.updateItems=function(t){for(var e in console.log("\u66f4\u65b0\u7f13\u5b58\u9053\u5177.....",t),t[0])this._items[e]=t[e];i.EVENT.emit(r.EventId.ON_ITEM_CHANGE)},t.prototype.addItem=function(t,e){if(!this._items[t])return this._items[t]={id:t,num:e},i.EVENT.emit(r.EventId.ON_ITEM_CHANGE);this._items[t].num+=e,i.EVENT.emit(r.EventId.ON_ITEM_CHANGE)},t._inst=null,t}();o.default=u,cc._RF.pop()},{"../Common/Constant":"Constant","../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Utils/Utils":"Utils","../System/GamingSystem":"GamingSystem","../View/UI/Power/LifeSystem":"LifeSystem","./TaskModel":"TaskModel"}],PlayerSystem:[function(t,e,o){"use strict";cc._RF.push(e,"0d714XZVJVJFq43y7SqkIIP","PlayerSystem");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/Constant"),s=t("../Controller/AfunRiskSDKController"),a=t("../Controller/LTrackerMgr"),c=t("../Controller/TableMgr"),l=t("../Controller/TurnTaskController"),u=t("../Define/Define"),p=t("../Define/EventId"),f=t("../Define/UIDefs"),h=t("../Framework/Event/EventMgr"),d=t("../Framework/Scene/SceneMgr"),_=t("../Framework/UI/UIMgr"),y=t("../Model/PlayerModel"),v=t("../Network/Net"),m=t("../View/Scene/Game"),g=t("../View/UI/Power/LifeSystem"),b=t("./GamingSystem"),I=function(){function t(){this._sendMsgFlag=!1}return t.prototype.startGame=function(){return n(this,void 0,void 0,function(){var t=this;return r(this,function(){return this._sendMsgFlag?[2]:(this._sendMsgFlag=!0,v.Net.startGame().then(function(e){t._sendMsgFlag=!1;var o=e.data;if(o.energy&&g.default.initialize(o.energy,o.infiniteEnergyAdNum),console.log("startGame .......",o),o){b.default.tutorialFlag=o.tutorialFlag;var n=o.levelId;if(!c.TABLE.getLevel(n))return _.default.inst.showToast("\u656c\u8bf7\u671f\u5f85\u540e\u7eed\u5173\u5361~"),void t.__backToMainScene();s.default.inst.report(""+s.AfunRiskSDKType.enterLevel+n),y.default.inst.startNewGame(o.gameCode,n)}}).catch(function(e){console.log("start Game error ......................",e),t._sendMsgFlag=!1,"LOCK_OF_PROPS"==e&&_.default.inst.open(f.UIType.GetPower)}),[2])})})},t.prototype.__backToMainScene=function(){d.SCENE.getCurrentScene()==u.SceneType.Game&&d.SCENE.loadScene(u.SceneType.Main)},t.prototype.addItemByWatchAd=function(t){console.log("\u64ad\u653e\u89c6\u9891\u83b7\u5f97\u9053\u5177...................",t),y.default.inst.getGameCode(),y.default.inst.isWatchOver(t)?_.default.inst.showToast("\u5df2\u7ecf\u8865\u5145\u8fc7\u8fd9\u4e2a\u9053\u5177\u4e86\u54e6~"):l.default.inst.getProp(t,function(){b.default.backGame(),_.default.inst.showToast("\u83b7\u5f97\u9053\u5177\uff0c\u5feb\u53bb\u95ef\u5173\u5427~"),y.default.inst.setGameItemState(t,i.GAME_ITEM_STATE.UnUse),h.EVENT.emit(p.EventId.ON_NEW_PROP_DROP_ACTION,t);var e=c.TABLE.getItem(t);a.default.inst.click("cx157899",{sitemname:e.sName,icount:1})},function(){b.default.backGame(),_.default.inst.showToast("\u83b7\u5f97\u9053\u5177\u5931\u8d25~")})},t.prototype.uploadGame=function(t){var e=this;console.log("Log - Test _uploadGame.......3");var o=y.default.inst.getGameCode(),n=t?m.Game.inst.getPlayTime():0,r=b.default.level;t&&(s.default.inst.report(""+s.AfunRiskSDKType.completeLevel+r),Number(r)>1&&(s.default.inst.report(s.AfunRiskSDKType.completeAll),s.default.inst.report(s.AfunRiskSDKType.getCoin))),v.Net.settlement(o,n).then(function(o){var n,r,i=o.data;console.log("settlement..........ret",i);var s=i.lastLevelId;y.default.inst.levelId=s;var a=e._isPassLevelId(s);if(t&&!a)b.default.difficultySpike=!0,e.startGame();else{var l=c.TABLE.getGlobalById("G002").sGlobalData;_.default.inst.open(f.UIType.GameSettlement,{isSucc:t,CoinNum:"D001"==(null===(n=o.data.rewardItems[0])||void 0===n?void 0:n.id)?null===(r=o.data.rewardItems[0])||void 0===r?void 0:r.num:l})}console.log("Log - Test _uploadGame.......4")}).catch(function(e){console.log("Log - Test _uploadGame.......5"),console.log("uploadGame Game error ......................",e),t&&(y.default.inst.levelId=(Number(y.default.inst.levelId)+1).toString());var o=c.TABLE.getGlobalById("G002").sGlobalData;_.default.inst.open(f.UIType.GameSettlement,{isSucc:t,CoinNum:o})})},t.prototype._isPassLevelId=function(t){return null==c.TABLE.getLevel(t)},t}();o.default=new I,cc._RF.pop()},{"../Common/Constant":"Constant","../Controller/AfunRiskSDKController":"AfunRiskSDKController","../Controller/LTrackerMgr":"LTrackerMgr","../Controller/TableMgr":"TableMgr","../Controller/TurnTaskController":"TurnTaskController","../Define/Define":"Define","../Define/EventId":"EventId","../Define/UIDefs":"UIDefs","../Framework/Event/EventMgr":"EventMgr","../Framework/Scene/SceneMgr":"SceneMgr","../Framework/UI/UIMgr":"UIMgr","../Model/PlayerModel":"PlayerModel","../Network/Net":"Net","../View/Scene/Game":"Game","../View/UI/Power/LifeSystem":"LifeSystem","./GamingSystem":"GamingSystem"}],ProgressController:[function(t,e,o){"use strict";cc._RF.push(e,"43534BC1axIeqM2LYIYu4M/","ProgressController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Define/EventId"),a=t("../../../Framework/Event/EventMgr"),c=t("../../../Framework/UI/UIMgr"),l=t("../../../System/GamingSystem"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e}var o;return r(e,t),o=e,Object.defineProperty(e.prototype,"timer",{get:function(){return this._timer},set:function(t){this._timer=t,t<0&&(this._timer=0),t>this._fullTime&&(this._timer=this._fullTime);var e=this.timer/this._fullTime;this.progressBar.progress=e},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o.I=this,this.init()},e.prototype.init=function(){this._fullTime=500,this.timer=this._fullTime},e.prototype.update=function(t){this.timer<=0||l.default.inPlaying()&&(this.timer-=t,this.timer<=0&&a.EVENT.emit(s.EventId.ON_GAME_TIME_OVER))},e.prototype.onEnable=function(){a.EVENT.on(s.EventId.ON_GAME_REVIVE_SUCC,this.onGameReviveSucc,this)},e.prototype.onDisable=function(){a.EVENT.off(s.EventId.ON_GAME_REVIVE_SUCC,this.onGameReviveSucc,this)},e.prototype.onGameReviveSucc=function(){l.default.gameComplete=!1,c.default.inst.showToast("\u7ee7\u7eed\u6e38\u620f"),this.timer=Math.min(this._fullTime,this.timer+30)},i([f(cc.ProgressBar)],e.prototype,"progressBar",void 0),o=i([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../System/GamingSystem":"GamingSystem"}],PropItemController:[function(t,e,o){"use strict";cc._RF.push(e,"10005CJ5jlDELw26sYKvitl","PropItemController");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Common/Constant"),a=t("../../../Define/EventId"),c=t("../../../Framework/Event/EventMgr"),l=t("../../../Model/PlayerModel"),u=cc._decorator,p=u.ccclass,f=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblNum=null,e.lockNode=null,e.normalNode=null,e.addNode=null,e._propId=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){c.EVENT.on(a.EventId.ON_UPDATE_PROP_STATE,this.updateUI,this),c.EVENT.on(a.EventId.ON_NEW_PROP_DROP_ACTION,this.playGetPropAct,this)},e.prototype.onDisable=function(){c.EVENT.off(a.EventId.ON_UPDATE_PROP_STATE,this.updateUI,this),c.EVENT.off(a.EventId.ON_NEW_PROP_DROP_ACTION,this.playGetPropAct,this)},e.prototype.bind=function(t){this._propId=t,this.updateUI()},e.prototype.updateUI=function(){var t=l.default.inst.getGameItemState(this._propId),e=t==s.GAME_ITEM_STATE.Used;this.lockNode.active=e,this.normalNode.active=!e;var o=t==s.GAME_ITEM_STATE.UnUse&&!e;this.lblNum.node.active=o,this.addNode.active=t==s.GAME_ITEM_STATE.UnGet,this._itemState=t},e.prototype.onClickSelf=function(){c.EVENT.emit(a.EventId.ON_USE_ITEM,this._propId)},e.prototype.playGetPropAct=function(t){var e=this;t==this._propId&&this.scheduleOnce(function(){cc.tween(e.normalNode).to(.2,{scale:1.2}).to(.2,{scale:1}).start()},.75)},i([f(cc.Label)],e.prototype,"lblNum",void 0),i([f(cc.Node)],e.prototype,"lockNode",void 0),i([f(cc.Node)],e.prototype,"normalNode",void 0),i([f(cc.Node)],e.prototype,"addNode",void 0),i([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../Common/Constant":"Constant","../../../Define/EventId":"EventId","../../../Framework/Event/EventMgr":"EventMgr","../../../Model/PlayerModel":"PlayerModel"}],RTCounter:[function(t,e,o){"use strict";cc._RF.push(e,"92d4eLSMkBMjrZrSEAKI/oa","RTCounter"),Object.defineProperty(o,"__esModule",{value:!0}),o.RTCounter=void 0;var n=function(){function t(t,e,o){this._id=t,this._opts=e||{},this._value=0,this._total=0,this._averageValue=0,this._accumValue=0,this._accumSamples=0,this._accumStart=o}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!1,configurable:!0}),t.prototype._average=function(t,e){if(this._opts.average){this._accumValue+=t,++this._accumSamples;var o=e;o-this._accumStart>=this._opts.average&&(this._averageValue=this._accumValue/this._accumSamples,this._accumValue=0,this._accumStart=o,this._accumSamples=0)}},t.prototype.sample=function(t){this._average(this._value,t)},t.prototype.human=function(){var t=this._opts.average?this._averageValue:this._value;return Math.round(100*t)/100},t.prototype.alarm=function(){return this._opts.below&&this._value<this._opts.below||this._opts.over&&this._value>this._opts.over},t}();o.RTCounter=n,cc._RF.pop()},{}],RTParticle:[function(t,e,o){"use strict";cc._RF.push(e,"4c021JNUotHBLc+U4/PSjJt","RTParticle"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(){this.pos=cc.v2(0,0),this.startPos=cc.v2(0,0),this.color=cc.color(0,0,0,255),this.deltaColor={r:0,g:0,b:0,a:255},this.size=0,this.deltaSize=0,this.rotation=0,this.deltaRotation=0,this.timeToLive=0,this.totalLiveTime=0,this.drawPos=cc.v2(0,0),this.aspectRatio=1,this.dir=cc.v2(0,0),this.radialAccel=0,this.tangentialAccel=0,this.angle=0,this.degreesPerSecond=0,this.radius=0,this.deltaRadius=0,this.frameIndex=0,this.randomSeed=0,this.pos=cc.v2(0,0),this.startPos=cc.v2(0,0),this.color=cc.color(0,0,0,255),this.deltaColor={r:0,g:0,b:0,a:255},this.size=0,this.deltaSize=0,this.rotation=0,this.deltaRotation=0,this.timeToLive=0,this.drawPos=cc.v2(0,0),this.aspectRatio=1,this.dir=cc.v2(0,0),this.radialAccel=0,this.tangentialAccel=0,this.angle=0,this.degreesPerSecond=0,this.radius=0,this.deltaRadius=0,this.totalLiveTime=0,this.frameIndex=0,this.randomSeed=0},cc._RF.pop()},{}],RTPerfCounter:[function(t,e,o){"use strict";cc._RF.push(e,"34d75/+qhdPnYqMI1BKBP3/","RTPerfCounter");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.RTPerfCounter=void 0;var i=function(t){function e(e,o,n){var r=t.call(this,e,o,n)||this;return r._time=n,r}return r(e,t),e.prototype.start=function(t){this._time=t},e.prototype.end=function(t){this._value=t-this._time,this._average(this._value)},e.prototype.tick=function(){this.end(),this.start()},e.prototype.frame=function(t){var e=t,o=e-this._time;this._total++,o>(this._opts.average||1e3)&&(this._value=1e3*this._total/o,this._total=0,this._time=e,this._average(this._value))},e}(t("./RTCounter").RTCounter);o.RTPerfCounter=i,cc._RF.pop()},{"./RTCounter":"RTCounter"}],RTProfiler:[function(t,e,o){"use strict";cc._RF.push(e,"c98f3/df/RN3okBhK5qcYrx","RTProfiler"),Object.defineProperty(o,"__esModule",{value:!0}),o.RTProfiler=void 0;var n=t("./RTPerfCounter"),r=!1,i=25,s=null,a=null,c=null;function l(){if(!s){s={frame:{desc:"Frame time (ms)",min:0,max:50,average:500},fps:{desc:"Framerate (FPS)",below:30,average:500},draws:{desc:"Draw call"},logic:{desc:"Game Logic (ms)",min:0,max:50,average:500},render:{desc:"Renderer (ms)",min:0,max:50,average:500},mode:{desc:cc.game.renderType===cc.game.RENDER_TYPE_WEBGL?"WebGL":"Canvas",min:1}};var t=performance.now();for(var e in s)s[e]._counter=new n.RTPerfCounter(e,s[e],t)}}function u(){if(!a||!a.isValid){(a=new cc.Node("PROFILER-NODE")).x=a.y=10,a.groupIndex=cc.Node.BuiltinGroupIndex.DEBUG,cc.Camera._setupDebugCamera(),a.zIndex=Math.pow(2,15)-1,cc.game.addPersistRootNode(a);var t=new cc.Node("LEFT-PANEL");t.anchorX=t.anchorY=0;var e=t.addComponent(cc.Label);e.fontSize=i,e.lineHeight=i,e.enableBold=!0,t.color=cc.Color.RED,t.parent=a;var o=new cc.Node("RIGHT-PANEL");o.anchorX=1,o.anchorY=0,o.x=300;var n=o.addComponent(cc.Label);n.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,n.fontSize=i,n.lineHeight=i,n.enableBold=!0,o.color=cc.Color.RED,o.parent=a,cc.sys.platform!==cc.sys.BAIDU_GAME_SUB&&cc.sys.platform!==cc.sys.WECHAT_GAME_SUB&&(e.cacheMode=cc.Label.CacheMode.CHAR,n.cacheMode=cc.Label.CacheMode.CHAR),c={left:e,right:n}}}function p(){u();var t=cc.director._lastUpdate;s.frame._counter.start(t),s.logic._counter.start(t)}function f(){var t=performance.now();cc.director.isPaused()?s.frame._counter.start(t):s.logic._counter.end(t),s.render._counter.start(t)}function h(){var t=performance.now();s.render._counter.end(t),s.draws._counter.value=cc.renderer.drawCalls,s.frame._counter.end(t),s.fps._counter.frame(t);var e="",o="";for(var n in s){var r=s[n];r._counter.sample(t),e+=r.desc+"\n",o+=r._counter.human()+"\n"}c&&(c.left.string=e,c.right.string=o)}var d=function(){function t(){}return t.isShowingStats=function(){return r},t.hideStats=function(){r&&(a&&(a.active=!1),cc.director.off(cc.Director.EVENT_BEFORE_UPDATE,p),cc.director.off(cc.Director.EVENT_AFTER_UPDATE,f),cc.director.off(cc.Director.EVENT_AFTER_DRAW,h),r=!1)},t.showStats=function(){r||(l(),a&&(a.active=!0),cc.director.on(cc.Director.EVENT_BEFORE_UPDATE,p),cc.director.on(cc.Director.EVENT_AFTER_UPDATE,f),cc.director.on(cc.Director.EVENT_AFTER_DRAW,h),r=!0)},t.isDisplayStats=function(){return this.isShowingStats()},t.setDisplayStats=function(t){cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS&&(t?this.showStats():this.hideStats()),cc.debug.setDisplayStats(!1)},t}();o.RTProfiler=d,cc._RF.pop()},{"./RTPerfCounter":"RTPerfCounter"}],RTSimulator:[function(t,e,o){"use strict";cc._RF.push(e,"d1472p/t/JMy6YR5zO6jiOW","RTSimulator"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./RTParticle"),r=cc.v2(0,0),i=cc.v2(),s=cc.v2(),a=cc.v2(),c=cc.v2(),l=new cc.js.Pool(function(t){t.pos.set(r),t.startPos.set(r),t.color._val=4278190080,t.deltaColor.r=t.deltaColor.g=t.deltaColor.b=0,t.deltaColor.a=255,t.size=0,t.deltaSize=0,t.rotation=0,t.deltaRotation=0,t.timeToLive=0,t.drawPos.set(r),t.aspectRatio=1,t.dir.set(r),t.radialAccel=0,t.tangentialAccel=0,t.angle=0,t.degreesPerSecond=0,t.radius=0,t.deltaRadius=0},1024);l.get=function(){return this._get()||new n.default};var u=function(){function t(t){this.sys=t,this.particles=[],this.active=!1,this.readyToPlay=!0,this.finished=!1,this.elapsed=0,this.emitCounter=0,this._uvFilled=0,this._worldRotation=0}return t.prototype.stop=function(){this.active=!1,this.readyToPlay=!1,this.elapsed=this.sys.duration,this.emitCounter=0},t.prototype.reset=function(){this.active=!0,this.readyToPlay=!0,this.elapsed=0,this.emitCounter=0,this.finished=!1;for(var t=this.particles,e=0;e<t.length;++e)l.put(t[e]);t.length=0},t.prototype.emitParticle=function(t){var e=this.sys,o=cc.misc.clampf,n=l.get();this.particles.push(n),e.textureAnimationModule.init(n),n.randomSeed=this.randomRangeInt(0,233280),n.timeToLive=e.life+e.lifeVar*(Math.random()-.5)*2;var r,i,s,a,c=n.totalLiveTime=n.timeToLive=Math.max(0,n.timeToLive);n.pos.x=e.sourcePos.x+e.posVar.x*(Math.random()-.5)*2,n.pos.y=e.sourcePos.y+e.posVar.y*(Math.random()-.5)*2;var u=e._startColor,p=e._startColorVar,f=e._endColor,h=e._endColorVar;n.color.r=r=o(u.r+p.r*(Math.random()-.5)*2,0,255),n.color.g=i=o(u.g+p.g*(Math.random()-.5)*2,0,255),n.color.b=s=o(u.b+p.b*(Math.random()-.5)*2,0,255),n.color.a=a=o(u.a+p.a*(Math.random()-.5)*2,0,255),n.deltaColor.r=(o(f.r+h.r*(Math.random()-.5)*2,0,255)-r)/c,n.deltaColor.g=(o(f.g+h.g*(Math.random()-.5)*2,0,255)-i)/c,n.deltaColor.b=(o(f.b+h.b*(Math.random()-.5)*2,0,255)-s)/c,n.deltaColor.a=(o(f.a+h.a*(Math.random()-.5)*2,0,255)-a)/c;var d=e.startSize+e.startSizeVar*(Math.random()-.5)*2;if(d=Math.max(0,d),n.size=d,e.endSize===cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE)n.deltaSize=0;else{var _=e.endSize+e.endSizeVar*(Math.random()-.5)*2;_=Math.max(0,_),n.deltaSize=(_-d)/c}var y=e.startSpin+e.startSpinVar*(Math.random()-.5)*2,v=e.endSpin+e.endSpinVar*(Math.random()-.5)*2;n.rotation=y,n.deltaRotation=(v-y)/c,n.startPos.x=t.x,n.startPos.y=t.y,n.aspectRatio=e._aspectRatio||1;var m=cc.misc.degreesToRadians(e.angle+this._worldRotation+e.angleVar*(Math.random()-.5)*2);if(e.emitterMode===cc.ParticleSystem.EmitterMode.GRAVITY){var g=e.speed+e.speedVar*(Math.random()-.5)*2;n.dir.x=Math.cos(m),n.dir.y=Math.sin(m),n.dir.mulSelf(g),n.radialAccel=e.radialAccel+e.radialAccelVar*(Math.random()-.5)*2,n.tangentialAccel=e.tangentialAccel+e.tangentialAccelVar*(Math.random()-.5)*2,e.rotationIsDir&&(n.rotation=-cc.misc.radiansToDegrees(Math.atan2(n.dir.y,n.dir.x)))}else{var b=e.startRadius+e.startRadiusVar*(Math.random()-.5)*2,I=e.endRadius+e.endRadiusVar*(Math.random()-.5)*2;n.radius=b,n.deltaRadius=e.endRadius===cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS?0:(I-b)/c,n.angle=m,n.degreesPerSecond=cc.misc.degreesToRadians(e.rotatePerS+e.rotatePerSVar*(Math.random()-.5)*2)}},t.prototype.getWorldRotation=function(t){for(var e=0,o=t;o;)e+=o.angle,o=o.parent;return e},t.prototype.updateUVs=function(t){var e=this.sys._assembler;if(e){var o=e.getBuffer();if(o&&this.sys._renderSpriteFrame){for(var n=4*e._vfmt._bytes/4,r=o._vData,i=this.sys._renderSpriteFrame.uv,s=i[4],a=i[5],c=i[2]-i[4],l=i[3]-i[5],u=this.sys.textureAnimationModule.numTilesX,p=c/u,f=l/this.sys.textureAnimationModule.numTilesY,h=t?0:this._uvFilled,d=this.particles.length,_=h;_<d;_++){var y=this.particles[_],v=_*n;this._updateBuffUV(r,v,y,s,a,p,f,u)}this._uvFilled=d}}},t.prototype.updatePUVs=function(t){var e=this.sys._assembler;if(e){var o=e.getBuffer();if(o&&this.sys._renderSpriteFrame){var n=4*e._vfmt._bytes/4,r=o._vData,i=this.sys._renderSpriteFrame.uv,s=i[4],a=i[5],c=i[2]-i[4],l=i[3]-i[5],u=this.sys.textureAnimationModule.numTilesX,p=c/u,f=l/this.sys.textureAnimationModule.numTilesY,h=this.particles[t],d=t*n;this._updateBuffUV(r,d,h,s,a,p,f,u)}}},t.prototype._updateBuffUV=function(t,e,o,n,r,i,s,a){t[e+2]=n+o.frameIndex%a*i,t[e+3]=r+Math.floor(o.frameIndex/a)*s+s,t[e+7]=n+o.frameIndex%a*i+i,t[e+8]=r+Math.floor(o.frameIndex/a)*s+s,t[e+12]=n+o.frameIndex%a*i,t[e+13]=r+Math.floor(o.frameIndex/a)*s,t[e+17]=n+o.frameIndex%a*i+i,t[e+18]=r+Math.floor(o.frameIndex/a)*s},t.prototype.updateParticleBuffer=function(t,e,o,n){var r=o._vData,i=o._uintVData,s=e.x,a=e.y,c=t.size,l=c,u=t.aspectRatio;u>1?l=c/u:c=l*u;var p=c/2,f=l/2;if(t.rotation){var h=-p,d=-f,_=p,y=f,v=-cc.misc.degreesToRadians(t.rotation),m=Math.cos(v),g=Math.sin(v);r[n]=h*m-d*g+s,r[n+1]=h*g+d*m+a,r[n+5]=_*m-d*g+s,r[n+6]=_*g+d*m+a,r[n+10]=h*m-y*g+s,r[n+11]=h*g+y*m+a,r[n+15]=_*m-y*g+s,r[n+16]=_*g+y*m+a}else r[n]=s-p,r[n+1]=a-f,r[n+5]=s+p,r[n+6]=a-f,r[n+10]=s-p,r[n+11]=a+f,r[n+15]=s+p,r[n+16]=a+f;i[n+4]=t.color._val,i[n+9]=t.color._val,i[n+14]=t.color._val,i[n+19]=t.color._val},t.prototype.step=function(t){t=t>cc.director._maxParticleDeltaTime?cc.director._maxParticleDeltaTime:t;var e=this.sys,o=e.node,n=this.particles,r=4*this.sys._assembler._vfmt._bytes/4,u=cc.ParticleSystem.PositionType;if(o._updateWorldMatrix(),e.positionType===u.FREE){this._worldRotation=this.getWorldRotation(o);var p=o._worldMatrix.m;i.x=p[12],i.y=p[13]}else e.positionType===u.RELATIVE?(this._worldRotation=o.angle,i.x=o.x,i.y=o.y):this._worldRotation=0;if(this.active&&e.emissionRate){var f=1/e.emissionRate;for(n.length<e.totalParticles&&(this.emitCounter+=t);n.length<e.totalParticles&&this.emitCounter>f;)this.emitParticle(i),this.emitCounter-=f;this.elapsed+=t,-1!==e.duration&&e.duration<this.elapsed&&e.stopSystem()}var h=e._assembler.getBuffer(),d=n.length;h.reset(),h.request(4*d,6*d),d>this._uvFilled&&this.updateUVs();for(var _=0;_<n.length;){s.x=s.y=a.x=a.y=c.x=c.y=0;var y=n[_];if(y.timeToLive-=t,y.timeToLive>0){if(e.emitterMode===cc.ParticleSystem.EmitterMode.GRAVITY){var v=c,m=s,g=a;(y.pos.x||y.pos.y)&&(m.set(y.pos),m.normalizeSelf()),g.set(m),m.mulSelf(y.radialAccel);var b=g.x;g.x=-g.y,g.y=b,g.mulSelf(y.tangentialAccel),v.set(m),v.addSelf(g),v.addSelf(e.gravity),v.mulSelf(t),y.dir.addSelf(v),v.set(y.dir),v.mulSelf(t),y.pos.addSelf(v)}else y.angle+=y.degreesPerSecond*t,y.radius+=y.deltaRadius*t,y.pos.x=-Math.cos(y.angle)*y.radius,y.pos.y=-Math.sin(y.angle)*y.radius;y.color.r+=y.deltaColor.r*t,y.color.g+=y.deltaColor.g*t,y.color.b+=y.deltaColor.b*t,y.color.a+=y.deltaColor.a*t,y.size+=y.deltaSize*t,y.size<0&&(y.size=0),y.rotation+=y.deltaRotation*t;var I=s;I.set(y.pos),e.positionType!==u.GROUPED&&I.addSelf(y.startPos);var w=r*_;this.updateParticleBuffer(y,I,h,w);var T=y.frameIndex;e.textureAnimationModule.animate(y),T!=y.frameIndex&&this.updatePUVs(_),++_}else{var S=n[_];_!==n.length-1&&(n[_]=n[n.length-1]),l.put(S),n.length--}}e._assembler._ia._count=6*n.length,n.length>0?h.uploadData():this.active||this.readyToPlay||(this.finished=!0,e._finishedSimulation())},t.prototype.randomRange=function(t,e){return Math.random()*(e-t)+t},t.prototype.randomRangeInt=function(t,e){return Math.floor(this.randomRange(t,e))},t}();o.default=u,cc._RF.pop()},{"./RTParticle":"RTParticle"}],RTTextureAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"89fefYOwApN3YDfRFyWd9HB","RTTextureAnimation");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,s=r.property,a=(r.disallowMultiple,cc.Enum({Grid:0}),cc.Enum({WholeSheet:0,SingleRow:1}),function(){function t(){this.numTilesX=0,this.numTilesY=0}return t.prototype.onInit=function(){},t.prototype.init=function(){},t.prototype.animate=function(t){t.frameIndex=Math.floor(t.timeToLive/t.totalLiveTime*(this.numTilesX*this.numTilesY-1))},t.prototype.pseudoRandom=function(t){return(t=(9301*t+49297)%233280)/233280},n([s()],t.prototype,"numTilesX",void 0),n([s()],t.prototype,"numTilesY",void 0),n([i("RTTextureAnimation")],t)}());o.default=a,cc._RF.pop()},{}],RTTextureParticleSystem:[function(t,e,o){"use strict";cc._RF.push(e,"013128OjPZMyIZ1icYTSvf0","RTTextureParticleSystem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./RTSimulator"),a=t("./RTTextureAnimation"),c=cc._decorator,l=c.ccclass,u=c.property,p=c.executeInEditMode,f=c.disallowMultiple,h=c.executionOrder,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._textureAnimationModule=new a.default,e}return r(e,t),Object.defineProperty(e.prototype,"textureAnimationModule",{get:function(){return this._textureAnimationModule},set:function(t){this._textureAnimationModule=t,this._textureAnimationModule.onInit()},enumerable:!1,configurable:!0}),e.prototype.initProperties=function(){t.prototype.initProperties.call(this),this._custom=!0,this._simulator=new s.default(this)},i([u],e.prototype,"_textureAnimationModule",void 0),i([u({type:a.default,animatable:!1})],e.prototype,"textureAnimationModule",null),i([l,p,f,h(99)],e)}(cc.ParticleSystem);o.default=d,cc._RF.pop()},{"./RTSimulator":"RTSimulator","./RTTextureAnimation":"RTTextureAnimation"}],RankController:[function(t,e,o){"use strict";cc._RF.push(e,"957e5N+tLJJl5wtcjigNtvw","RankController");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Model/PlayerModel"),s=t("../Model/RankModel"),a=t("../Network/Net"),c=t("./MtopMgr"),l=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.getRankInfo=function(){var t,e;return n(this,void 0,void 0,function(){var o,n,i;return r(this,function(r){switch(r.label){case 0:return[4,c.default.inst.querypagerankandself(this.getDateStringByNow())];case 1:return o=r.sent(),console.log(o,"rankInfo"),s.default.inst.setList((null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.rankList)||[]),(null===(e=null==o?void 0:o.data)||void 0===e?void 0:e.selfRankInfo.score)?[3,3]:[4,a.Net.queryPassTime()];case 2:n=r.sent(),i=n.data,o.data.selfRankInfo.score=i.passTime,r.label=3;case 3:return s.default.inst.setMyInfo(o.data.selfRankInfo),[2]}})})},t.prototype.getDateStringByNow=function(){var t=new Date(i.default.inst.getServerTime()),e=t.getFullYear(),o=t.getMonth()+1,n=t.getDate();return""+e+(o<10?"0"+o:o)+(n<10?"0"+n:n)},t.changeStr=function(t,e){void 0===e&&(e=12);for(var o=0,n="",r=0;r<t.length;r++){if(t.charCodeAt(t[r])>127||94==t.charCodeAt(t[r])?o+=2:o++,o>e){n+="...";break}n+=t[r]}return n},t._inst=null,t}();o.default=l,cc._RF.pop()},{"../Model/PlayerModel":"PlayerModel","../Model/RankModel":"RankModel","../Network/Net":"Net","./MtopMgr":"MtopMgr"}],RankItem:[function(t,e,o){"use strict";cc._RF.push(e,"73067vw3HBKEYdnODS/3qkO","RankItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Controller/RankController"),a=t("../../../Framework/Utils/Utils"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprIcon=null,e.labName=null,e.labTime=null,e.labNo=null,e._data=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.setData=function(t){this._data=t,this._freshItem()},e.prototype._freshItem=function(){var t,e,o,n=this;(null===(e=null===(t=this._data)||void 0===t?void 0:t.userInfo)||void 0===e?void 0:e.photo)?a.default.loadNetWork(this._data.userInfo.photo,function(t){n.sprIcon&&(n.sprIcon.spriteFrame=t)}):a.default.loadSpriteFrame("Icon/photo",this.sprIcon),this.labName.string=(null===(o=this._data.userInfo)||void 0===o?void 0:o.nickName)?s.default.changeStr(this._data.userInfo.nickName):"\u997f\u5c0f\u5b9d",this.labTime.string=a.default.getFormatingTimeStr(Number(this._data.score)),this.labNo.string=this._data.no},i([u(cc.Sprite)],e.prototype,"sprIcon",void 0),i([u(cc.Label)],e.prototype,"labName",void 0),i([u(cc.Label)],e.prototype,"labTime",void 0),i([u(cc.Label)],e.prototype,"labNo",void 0),i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Controller/RankController":"RankController","../../../Framework/Utils/Utils":"Utils"}],RankModel:[function(t,e,o){"use strict";cc._RF.push(e,"770d66epRBBXbzNWupwCoSm","RankModel"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this._list=[],this._myInfo=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.setList=function(t){this._list=t},t.prototype.setMyInfo=function(t){this._myInfo=t},Object.defineProperty(t.prototype,"list",{get:function(){return this._list},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"myInfo",{get:function(){return this._myInfo},enumerable:!1,configurable:!0}),t._inst=null,t}();o.default=n,cc._RF.pop()},{}],Rank:[function(t,e,o){"use strict";cc._RF.push(e,"4f6a6VKtcZBsof77qleZwd+","Rank");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Controller/LTrackerMgr"),a=t("../../../Controller/RankController"),c=t("../../../Framework/UI/ScrollViewOptimizer"),l=t("../../../Framework/UIBase"),u=t("../../../Framework/Utils/Utils"),p=t("../../../Model/RankModel"),f=t("./RankItem"),h=cc._decorator,d=h.ccclass,_=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e.sprMyIcon=null,e.labMyName=null,e.labMyTime=null,e.labMyNo=null,e.nodeNothing=null,e._myInfo=null,e}return r(e,t),e.prototype.onLoad=function(){s.default.inst.expo("cx155947",{}),this.scroll.onLoad(),this._refreshSrcoll()},e.prototype._refreshSrcoll=function(){this._myInfo=p.default.inst.myInfo;var t=p.default.inst.list;this.nodeNothing.active=!1,t.length<1&&(this.nodeNothing.active=!0),this.scroll.setData(t,this.onItemUpdate.bind(this)),this._freshMyInfo()},e.prototype.onItemUpdate=function(t,e,o){e.getComponent(f.default).setData(o,t)},e.prototype._freshMyInfo=function(){var t,e,o,n,r,i=this;(null===(t=this._myInfo)||void 0===t?void 0:t.userInfo)&&((null===(o=null===(e=this._myInfo)||void 0===e?void 0:e.userInfo)||void 0===o?void 0:o.photo)?u.default.loadNetWork(this._myInfo.userInfo.photo,function(t){i.sprMyIcon&&(i.sprMyIcon.spriteFrame=t)}):u.default.loadSpriteFrame("Icon/photo",this.sprMyIcon),this.labMyName.string=(null===(n=this._myInfo.userInfo)||void 0===n?void 0:n.nickName)?a.default.changeStr(this._myInfo.userInfo.nickName):"\u997f\u5c0f\u5b9d",this._myInfo.score?(this.labMyTime.string=u.default.getFormatingTimeStr(Number(this._myInfo.score)),(null===(r=this._myInfo)||void 0===r?void 0:r.no)?(this.labMyNo.string=this._myInfo.no+"",this.labMyNo.fontSize=54):(this.labMyNo.string="100+",this.labMyNo.fontSize=46)):(this.labMyTime.string="\u672a\u901a\u5173",this.labMyNo.string=""))},i([_(c.default)],e.prototype,"scroll",void 0),i([_(cc.Sprite)],e.prototype,"sprMyIcon",void 0),i([_(cc.Label)],e.prototype,"labMyName",void 0),i([_(cc.Label)],e.prototype,"labMyTime",void 0),i([_(cc.Label)],e.prototype,"labMyNo",void 0),i([_(cc.Node)],e.prototype,"nodeNothing",void 0),i([d],e)}(l.default);o.default=y,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/RankController":"RankController","../../../Framework/UI/ScrollViewOptimizer":"ScrollViewOptimizer","../../../Framework/UIBase":"UIBase","../../../Framework/Utils/Utils":"Utils","../../../Model/RankModel":"RankModel","./RankItem":"RankItem"}],Request:[function(t,e,o){"use strict";cc._RF.push(e,"a8253exvlRJpIuKDj5Xc1lM","Request"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Framework/Net/HttpRequest"),r=t("../Framework/Tools/BaseInfo"),i=t("./ExLogCtr"),s=function(){function t(){this._sdk=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){if(!n.HttpRequest.isWeb){var t=window.$alscRequest;this._sdk=new t({timeout:5e3,WindVaneRequest:!0,H5Request:!1,native:!0,instanceid:"INNER",dangerouslySetWindvaneParams:{instanceid:"INNER"}}),console.log("requestMgr",this._sdk)}},t.prototype.request=function(t,e){var o=this;if(!n.HttpRequest.isWeb){var s="ONLINE"==r.default.ENV?"production":"ppe";return new Promise(function(n,r){o._sdk.request({env:s,api:t,param:e,method:"post"}).then(function(o){console.log(t,e,s,"_mtop",o),n(o)}).catch(function(o){console.error(o,"_mtop",t,e,s),i.default.inst.logApiError(o.data,t),r(o)})})}},t}();o.default=s,cc._RF.pop()},{"../Framework/Net/HttpRequest":"HttpRequest","../Framework/Tools/BaseInfo":"BaseInfo","./ExLogCtr":"ExLogCtr"}],ResKeeper:[function(t,e,o){"use strict";cc._RF.push(e,"eb6467RtCVGxrVRKYRJLXOh","ResKeeper");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./ResLoader"),a=t("./ResUtil"),c=cc._decorator,l=c.ccclass,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.autoRes=[],e}return r(e,t),e.prototype.loadRes=function(){var t=this,e=a.ResUtil.parseLoadResArgs.apply(this,arguments),o=e.onCompleted;e.onCompleted=function(e,n){!e&&t.isValid&&(n.addRef(),t.autoRes.push(n)),o&&o(e,n)},s.resLoader.loadRes(e.urls,e.type,e.onProgess,e.onCompleted)},e.prototype.onDestroy=function(){this.releaseAutoRes()},e.prototype.releaseAutoRes=function(){for(var t=0;t<this.autoRes.length;t++)this.autoRes[t].decRef();this.autoRes.length=0},e.prototype.autoReleaseRes=function(t){t.addRef(),this.autoRes.push(t)},i([l],e)}(cc.Component));o.default=u,cc._RF.pop()},{"./ResLoader":"ResLoader","./ResUtil":"ResUtil"}],ResLeakChecker:[function(t,e,o){"use strict";cc._RF.push(e,"f600dz4gMZHYqt76bMY/XSX","ResLeakChecker"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResLeakChecker=void 0;var n=function(){function t(){this.resFilter=null,this._checking=!1,this._log=new Map}return t.findCharPos=function(t,e,o){for(var n=t.indexOf(e),r=n,i=0;i<o;i++){if(-1==(n=t.indexOf(e,n+1)))return r;r=n}return r},t.getCallStack=function(e){var o=(new Error).stack,n=t.findCharPos(o,"\n",e);return n>0&&(o=o.slice(n)),o},t.prototype.checkFilter=function(t){return!!this._checking&&(!this.resFilter||this.resFilter(t))},t.prototype.logLoad=function(e,o,n){if(this.checkFilter(e)){this._log.has(e)||this._log.set(e,new Map);var r=this._log.get(e);r.has(o)&&console.warn("ResLeakChecker doubel same use "+e+" : "+o+", stack "+r[o]),r.set(o,n||t.getCallStack(2))}},t.prototype.logRelease=function(t,e){if(this.checkFilter(t))if(this._log.has(t)){var o=this._log.get(t);o.has(e)?o.delete(e):console.warn("ResLeakChecker use nofound "+t+" : "+e)}else console.warn("ResLeakChecker url nofound "+t+" : "+e)},t.prototype.startCheck=function(){this._checking=!0},t.prototype.stopCheck=function(){this._checking=!1},t.prototype.getLog=function(){return this._log},t.prototype.resetLog=function(){this._log=new Map},t.prototype.dump=function(){this._log.forEach(function(t,e){console.log(e),t.forEach(function(t,e){console.log(e+" : "+t)})})},t}();o.ResLeakChecker=n,cc._RF.pop()},{}],ResLoader:[function(t,e,o){"use strict";cc._RF.push(e,"8bc2akEtSVPcaMzwEx7+Wnb","ResLoader"),Object.defineProperty(o,"__esModule",{value:!0}),o.resLoader=void 0;var n=function(){function t(){this.resLeakChecker=null}return t.prototype.loadRes=function(){cc.resources.load.apply(cc.resources,arguments)},t.prototype.loadResDir=function(){cc.resources.loadDir.apply(cc.resources,arguments)},t.prototype.loadRemoteRes=function(){cc.assetManager.loadRemote.apply(cc.assetManager,arguments)},t.prototype.releaseArray=function(t){for(var e=0;e<t.length;++e)this.releaseAsset(t[e])},t.prototype.releaseAsset=function(t){t.decRef()},t.prototype.getResItem=function(t,e){return cc.resources.get(t,e)},t}();o.default=n,o.resLoader=new n,cc._RF.pop()},{}],ResUtil:[function(t,e,o){"use strict";cc._RF.push(e,"48663IiBgdKzrRc7NasFFU8","ResUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResUtil=o.LoadResArgs=void 0;var n=t("./ResKeeper");o.LoadResArgs=function(){};var r=function(){function t(){}return t.parseLoadResArgs=function(t,e,o,n){return void 0===n&&("function"==typeof e?("function"==typeof o?(n=o,o=e):n=e,e=null):"function"==typeof o&&(n=o,o=null)),{urls:t,type:e,onProgess:o,onCompleted:n}},t.getResKeeper=function(e,o){return e?e.getComponent(n.default)||(o?e.addComponent(n.default):t.getResKeeper(e.parent,o)):null},t.assignWith=function(e,o,n){var r=t.getResKeeper(o,n);return r&&e?(r.autoReleaseRes(e),e):(console.error("AssignWith "+e+" to "+o+" faile"),null)},t.instantiate=function(e){var o=cc.instantiate(e),n=t.getResKeeper(o,!0);return n?(n.autoReleaseRes(e),o):(console.warn("instantiate "+e+", autoRelease faile"),o)},t}();o.ResUtil=r,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],ReviveUI:[function(t,e,o){"use strict";cc._RF.push(e,"c3becS/7/tDU4iQQVJxMlIt","ReviveUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../Common/Constant"),a=t("../../Controller/LTrackerMgr"),c=t("../../Controller/ShareMgr"),l=t("../../Controller/TurnTaskController"),u=t("../../Define/EventId"),p=t("../../Framework/Event/EventMgr"),f=t("../../Framework/UI/UIFacade"),h=t("../../Framework/UIBase"),d=t("../../System/GamingSystem"),_=cc._decorator,y=_.ccclass,v=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblDes=null,e}return r(e,t),e.prototype.start=function(){var t=d.default.failType,e=t==s.FailType.Impasse;this.lblDes.string=e?"\u554a\u54e6~\u4f60\u7684\u8def\u7ebf\u89c4\u5212\u4e0d\u5408\u7406\n\u5f53\u524d\u5df2\u65e0\u53ef\u8fde\u5143\u7d20":"\u65f6\u95f4\u8017\u5c3d",this.lblDes.fontSize=e?36:50,a.default.inst.expo("cx155995",{failurereason:t,droptimes:d.default.dropIdx})},e.prototype.onClickRevive=function(){var t=this;a.default.inst.click("cx155995.dx204587",{}),l.default.inst.getProp("D002",function(){d.default.isRevive=!0,p.EVENT.emit(u.EventId.ON_GAME_REVIVE_SUCC),a.default.inst.expo("cx156003"),a.default.inst.expo("cx155995.dx333076",{isuccess:1}),t.close()},function(){a.default.inst.expo("cx156011"),a.default.inst.expo("cx155995.dx333076",{isuccess:0}),f.UIFacade.showToast("\u6d4f\u89c8\u65f6\u95f4\u4e0d\u8db3\uff0c\u8bf7\u518d\u8bd5\u8bd5\u54e6~")})},e.prototype.endRevive=function(){c.default.inst.clear(),p.EVENT.emit(u.EventId.ON_CANCEL_GAME_REVIVE),a.default.inst.click("cx155995.dx204595",{}),this.close()},i([v(cc.Label)],e.prototype,"lblDes",void 0),i([y],e)}(h.default);o.default=m,cc._RF.pop()},{"../../Common/Constant":"Constant","../../Controller/LTrackerMgr":"LTrackerMgr","../../Controller/ShareMgr":"ShareMgr","../../Controller/TurnTaskController":"TurnTaskController","../../Define/EventId":"EventId","../../Framework/Event/EventMgr":"EventMgr","../../Framework/UI/UIFacade":"UIFacade","../../Framework/UIBase":"UIBase","../../System/GamingSystem":"GamingSystem"}],RobotSystem:[function(t,e,o){"use strict";var n;cc._RF.push(e,"9eb99s8wplDFoofjpZ/Yt72","RobotSystem"),Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Common/Constant"),i=t("./AlgorithmSystem"),s=t("./DropSystem"),a=t("./GamingSystem"),c=function(){function t(){this._gridWidth=84,this._rows=0,this._colmns=0,this._dropPicDatas=[],this._curRemoveCnt=0,this._nextDropRemoveValue=0,this._nextDropPicValue=0,this._isImpasse=!1,this._hintRoutes=null,this._reviveFlag=!1,this._reviveRemoveCnt=0}return t.prototype.runAutoLevel=function(){this._curRemoveCnt=0,this._nextDropRemoveValue=0,this._nextDropPicValue=0,this._reviveRemoveCnt=0,this._reviveFlag=!1,a.default.level="2",this.updateNextDropPicData(),this.initDropPicDatas(),this.initMapArray(),this.initPicInMap(),this.startAutoRemove()},t.prototype.initDropPicDatas=function(){this._dropPicDatas=s.default.getLevelDropPools()},t.prototype.initMapArray=function(){this._rows=r.LINK_GAME_ROW+2,this._colmns=r.LINK_GAME_COLMN+2,this._mapArray=[];for(var t=0;t<this._rows;++t){this._mapArray[t]=Array(this._colmns);for(var e=0;e<this._colmns;++e)this._mapArray[t][e]=0}for(var o=a.default.getCurMapConfig().sMapSet,n=0;n<o.length;n++){var i=n%r.LINK_GAME_ROW+1,s=Math.floor(n/r.LINK_GAME_ROW)+1;"0"==o[n]&&(this._mapArray[i][s]=r.LINK_GAME_EMPTY_ID)}},t.prototype.initPicInMap=function(){for(var t=1;t<this._rows-1;++t)for(var e=1;e<this._colmns-1;++e)this._mapArray[t][e]!=r.LINK_GAME_EMPTY_ID&&(this._mapArray[t][e]=this._dropPicDatas.shift())},t.prototype.startAutoRemove=function(){for(a.default.init();;){if(this.checkPassGame()){var e=this._reviveFlag?0:1;t.succMap[e]++;break}if(this.onCheckImpasse()){if(this._reviveFlag){t.sceondFailCntMap[this._curRemoveCnt]||(t.sceondFailCntMap[this._curRemoveCnt]=0),t.sceondFailCntMap[this._curRemoveCnt]++;var o=this._curRemoveCnt-this._reviveRemoveCnt;t.disReviveCntMap[o]||(t.disReviveCntMap[o]=0),t.disReviveCntMap[o]++;break}t.firstFailCntMap[this._curRemoveCnt]||(t.firstFailCntMap[this._curRemoveCnt]=0),t.firstFailCntMap[this._curRemoveCnt]++,this._reviveRemoveCnt=this._curRemoveCnt,this._reviveFlag=!0,this.refreshPicCmpt()}else this.removeHintPic(),this.updateDropData()}},t.prototype.removeHintPic=function(){var t=i.AlgorithmSystem.routes,e=t[0],o=t[t.length-1];e&&o?(this._mapArray[e.x][e.y]=0,this._mapArray[o.x][o.y]=0):console.error("removeHintPic..................Error ...")},t.prototype.updateDropData=function(){return this._curRemoveCnt+=2,!!this.checkDropPic()&&(a.default.addDropBatch(),this.dropNewPic(),this.onCheckImpasse&&this.refreshPicCmpt(),this.updateNextDropPicData(),!0)},t.prototype.checkDropPic=function(){return!!this._nextDropPicValue&&this._curRemoveCnt>=this._nextDropRemoveValue},t.prototype.refreshPicCmpt=function(){for(var t=this,e=new Array,o=new Array,n=1;n<this._rows-1;++n)for(var i=1;i<this._colmns-1;++i){var s=this._mapArray[n][i];s&&s!=r.LINK_GAME_EMPTY_ID&&(e.push({x:n,y:i}),o.push(s))}e.sort(function(){return Math.random()>.5?-1:1}),o.sort(function(){return Math.random()>.5?-1:1}),e.forEach(function(e,n){t._mapArray[e.x][e.y]=o[n]}),this.onCheckImpasse()},t.prototype.dropNewPic=function(){for(var t=0,e=1;e<this._rows-1;++e)for(var o=1;o<this._colmns-1;++o)t<this._nextDropPicValue&&0==this._mapArray[e][o]&&(this._mapArray[e][o]=this._dropPicDatas.shift(),t++);this.onCheckImpasse()},t.prototype.onCheckImpasse=function(){return i.AlgorithmSystem.isImpasse(this._mapArray)},t.prototype.updateNextDropPicData=function(){this._nextDropPicValue=s.default.getNextDropPlan(this._curRemoveCnt),this._nextDropRemoveValue+=this._nextDropPicValue},t.prototype.checkPassGame=function(){if(this._dropPicDatas.length>0)return!1;for(var t=1;t<this._rows-1;++t)for(var e=1;e<this._colmns-1;++e){var o=this._mapArray[t][e];if(o!=r.LINK_GAME_OBSTACLE_ID&&o!=r.LINK_GAME_EMPTY_ID&&0!=o)return!1}return this.levelSuccess(),!0},t.prototype.levelSuccess=function(){},t.prototype.levelFail=function(){this._reviveFlag},t.prototype.logRecord=function(){console.log("\u672c\u8f6e\u6d4b\u8bd5\u603b\u901a\u5173\u6b21\u6570\u4e3a= ",t.succMap[0]+t.succMap[1],"\u4e0d\u4f7f\u7528\u590d\u6d3b\u901a\u5173\u6570\u4e3a= ",t.succMap[1]),console.log("\u672c\u8f6e\u6d4b\u8bd5\u590d\u6d3b\u524d\u6d88\u9664\u6570\u91cf\u6837\u672c= ",JSON.stringify(t.firstFailCntMap)),console.log("\u672c\u8f6e\u6d4b\u8bd5\u590d\u6d3b\u540e\u6d88\u9664\u6570\u91cf\u6837\u672c= ",JSON.stringify(t.disReviveCntMap))},t.succMap=((n={})[0]=0,n[1]=0,n),t.firstFailCntMap={},t.sceondFailCntMap={},t.disReviveCntMap={},t}();o.default=new c,cc._RF.pop()},{"../Common/Constant":"Constant","./AlgorithmSystem":"AlgorithmSystem","./DropSystem":"DropSystem","./GamingSystem":"GamingSystem"}],RoundRectMask:[function(t,e,o){"use strict";cc._RF.push(e,"3a425GugcFOVZ21NfIjFoek","RoundRectMask");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=s.executeInEditMode,u=s.disallowMultiple,p=s.requireComponent,f=s.menu;cc.macro.ENABLE_WEBGL_ANTIALIAS=!0;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radius=11,e.mask=null,e}return r(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.updateMask(t)},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.mask=this.getComponent(cc.Mask),this.updateMask(this.radius)},e.prototype.updateMask=function(t){var e=t>=0?t:0;e<1&&(e=Math.min(this.node.width,this.node.height)*e),this.mask.radius=e,this.mask.onDraw=this.onDraw.bind(this.mask),this.mask._updateGraphics=this._updateGraphics.bind(this.mask),this.mask.type=cc.Mask.Type.RECT},e.prototype._updateGraphics=function(){var t=this._graphics;t&&this.onDraw(t)},e.prototype.onDraw=function(t){t.clear(!1);var e=this.node,o=e.width,n=e.height,r=-o*e.anchorX,i=-n*e.anchorY;t.roundRect(r,i,o,n,this.radius||0),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?t.stroke():t.fill()},i([c],e.prototype,"_radius",void 0),i([c({tooltip:"\u5706\u89d2\u534a\u5f84:\n0-1\u4e4b\u95f4\u4e3a\u6700\u5c0f\u8fb9\u957f\u6bd4\u4f8b\u503c, \n>1\u4e3a\u5177\u4f53\u50cf\u7d20\u503c"})],e.prototype,"radius",null),i([a(),l(!0),u(!0),p(cc.Mask),f("Renderer Component/Mask(RoundRect)")],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],SceneBase:[function(t,e,o){"use strict";cc._RF.push(e,"3e1efcHGRBDxbwOEieW6yTB","SceneBase");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Res/ResKeeper"),a=t("../../Define/Define"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneType=a.SceneType.$Start,e}return r(e,t),i([u({type:cc.Enum(a.SceneType),displayName:"\u573a\u666f\u7c7b\u578b"})],e.prototype,"sceneType",void 0),i([l],e)}(s.default);o.default=p,cc._RF.pop()},{"../../Define/Define":"Define","../Res/ResKeeper":"ResKeeper"}],SceneDef:[function(t,e,o){"use strict";cc._RF.push(e,"7e24c8vfn5L1oSlp04O4jsu","SceneDef"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneDataInfo=void 0;var n=t("./Define"),r=function(){function t(t,e,o){void 0===o&&(o=[]),this.extraloadRes=[],this.sceneType=t,this.sceneName=e,this.extraloadRes=o}return t.getSceneData=function(t){for(var e=0;e<this._sceneDataList.length;++e)if(this._sceneDataList[e].sceneType==t)return this._sceneDataList[e];return null},t._sceneDataList=[new t(n.SceneType.Bootstrap,"BootStrap"),new t(n.SceneType.Main,"Main"),new t(n.SceneType.Game,"Game")],t}();o.SceneDataInfo=r,cc._RF.pop()},{"./Define":"Define"}],SceneMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0df942ksWpO84lCpHxevraf","SceneMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},a=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},c=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t};Object.defineProperty(o,"__esModule",{value:!0}),o.SCENE=void 0;var l=t("../UI/UIFacade"),u=t("../UI/UIMgr"),p=t("../../Define/UIDefs"),f=t("../../Define/EventId"),h=t("../../Define/Define"),d=t("../../Define/SceneDef"),_=t("../Event/EventMgr"),y=t("../Utils/Singleton"),v=cc._decorator,m=(v.ccclass,v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastSceneType=h.SceneType.NONE,e._currentSceneType=h.SceneType.NONE,e._loadingSceneType=h.SceneType.NONE,e}return r(e,t),e.prototype.getLastScene=function(){return this._lastSceneType},e.prototype.getCurrentScene=function(){return this._currentSceneType},Object.defineProperty(e.prototype,"sceneParams",{get:function(){return this._sceneParams},enumerable:!1,configurable:!0}),e.prototype.loadScene=function(t,e){void 0===e&&(e={}),this._sceneParams=e,this._loadScene(t)},e.prototype._loadScene=function(t,e){void 0===e&&(e=3),this._loadingSceneType=t;var o=d.SceneDataInfo.getSceneData(t);o?this._doLoadScene(o):cc.error("Scene not registerd, load scene faild!")},e.prototype._doLoadScene=function(t,e){var n=this;void 0===e&&(e=3),o.SCENE.getCurrentScene()!=t.sceneType&&u.default.inst.open(p.UIType.Loading);var r=this;cc.director.preloadScene(t.sceneName,function(t,e){_.EVENT.emit(f.EventId.ON_UPDATE_LOADING_PROGRESS,t,e)},function(o){o?(cc.error("\u573a\u666f\u52a0\u8f7d\u5931\u8d25",o),e>=0?(_.EVENT.emit(f.EventId.ON_UPDATE_LOADING_TTP,"\u7f51\u7edc\u4f3c\u4e4e\u4e0d\u592a\u597d"),setTimeout(function(){n._loadScene(t.sceneType,e-1)},1e3)):(e=3,setTimeout(function(){return i(n,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return u.default.inst.close(p.UIType.Loading),[4,l.UIFacade.showConfirm("\u8bf7\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u8bd5","\u91cd\u8bd5","\u8fd4\u56de")];case 1:return o.sent()?this._loadScene(t.sceneType,e-1):cc.error("\u7528\u6237\u9009\u62e9\u9000\u51fa\u6e38\u620f"),[2]}})})},1e3))):cc.director.loadScene(t.sceneName,function(t){t?cc.error("\u573a\u666f\u5207\u6362\u5931\u8d25",t):(u.default.inst.close(p.UIType.Loading),r._loadSceneEnd())})})},e.prototype._loadSceneEnd=function(){this._lastSceneType=this._currentSceneType,this._currentSceneType=this._loadingSceneType,this._loadingSceneType=h.SceneType.NONE,this.reviveWnd()},e.prototype.pushReviveWnd=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this._reciveInfo||(this._reciveInfo={sceneType:this._currentSceneType,uis:[]}),this._reciveInfo.uis.push({type:t,args:e})},e.prototype.reviveWnd=function(){var t;if(this.needReviveWnds()){for(var e=this._reciveInfo.uis,o=e.length-1;o>=0;--o){var n=e[o];n.args[0]=n.args[0]||{},n.args[0].isReciver=!0,(t=u.default.inst).open.apply(t,c([n.type],n.args))}this._reciveInfo=void 0}},e.prototype.clearReviveWnds=function(){this._reciveInfo=void 0},e.prototype.needReviveWnds=function(){return this._reciveInfo&&this._reciveInfo.sceneType==this._currentSceneType},e}(y.Singleton()));o.SCENE=m.inst,cc._RF.pop()},{"../../Define/Define":"Define","../../Define/EventId":"EventId","../../Define/SceneDef":"SceneDef","../../Define/UIDefs":"UIDefs","../Event/EventMgr":"EventMgr","../UI/UIFacade":"UIFacade","../UI/UIMgr":"UIMgr","../Utils/Singleton":"Singleton"}],ScheduleObject:[function(t,e,o){"use strict";cc._RF.push(e,"ff422WSJtBChJvl3J2plL1s","ScheduleObject");var n=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return s},r=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t};Object.defineProperty(o,"__esModule",{value:!0}),o.ScheduleObject=void 0;var i=function(){},s=function(){function t(){this._scheduleList=new Map}return t.prototype.schedule=function(t,e,o,n,s){void 0===o&&(o=0),void 0===n&&(n=cc.macro.REPEAT_FOREVER),void 0===s&&(s=0);for(var a=[],c=5;c<arguments.length;c++)a[c-5]=arguments[c];o=o||0,n=isNaN(n)?cc.macro.REPEAT_FOREVER:n,s=s||0;var l=cc.director.getScheduler(),u=l.isTargetPaused(this),p=new i;p.callback=t,p.traget=e,p.interval=o,p.repeat=n,p.delay=s,p.args=a,p.realCallback=function(t){var e,o=p.args&&p.args.filter(function(t){return null!=t})||[],n=[t].concat(o);try{p.callback&&(e=p.callback).call.apply(e,r([p.traget],n))}catch(i){cc.error("schedule call back fail")}},this._scheduleList.set(t,p),l.schedule(p.realCallback,this,p.interval,p.repeat,p.delay,u)},t.prototype.scheduleOnce=function(t,e){void 0===e&&(e=0),this.schedule(t,0,0,e)},t.prototype.unschedule=function(t){if(t){var e=this._scheduleList.get(t);e&&(cc.director.getScheduler().unschedule(e.realCallback,this),this._scheduleList.delete(t))}},t.prototype.unscheduleAllCallbacks=function(){this._scheduleList.clear(),cc.director.getScheduler().unscheduleAllForTarget(this)},t}();o.ScheduleObject=s,cc._RF.pop()},{}],ScrollViewOptimizer:[function(t,e,o){"use strict";cc._RF.push(e,"b3b25WFRMhB2p7+ez3BrpHe","ScrollViewOptimizer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemTemplate=null,e.spacing=0,e.visibleRowCount=5,e.extraCahe=2,e.colCount=1,e.cacheRow=0,e.items=[],e.itemHeight=0,e.itemWidth=0,e.spawnCount=0,e.bufferZone=0,e.isInit=!1,e.canUpdateFrame=!0,e.data=[],e}return r(e,t),e.prototype.onLoad=function(){this.cacheRow=this.visibleRowCount+this.extraCahe,this.visibleRowCount=Math.ceil(this.visibleRowCount);var t=cc.instantiate(this.itemTemplate);this.itemHeight=t.height,this.itemWidth=t.width,this.spawnCount=this.cacheRow*this.colCount,this.bufferZone=this.cacheRow*(this.itemHeight+this.spacing)/2,this.scrollView=this.node.getComponent(cc.ScrollView),this.content=this.scrollView.content,this.content.on(cc.Node.EventType.POSITION_CHANGED,this._updateContentView.bind(this))},e.prototype.setData=function(t,e){this.isInit=!1,this.canUpdateFrame=!0,this.isInit=this.initialize(t,e)},e.prototype.initialize=function(t,e){if(!(e&&t&&0!==t.length&&this.itemTemplate&&this.scrollView))return cc.log("\u521d\u59cb\u5316\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6240\u6709\u5fc5\u8981\u53c2\u6570"),t&&0==t.length&&this.content.removeAllChildren(!1),!1;this.data=t,this.itemUpdateFunc=e,this.totalRow=Math.ceil(t.length/this.colCount),this.lastContentPosY=0,this.content.removeAllChildren(!1),this.content.getComponent(cc.Layout)&&this.content.removeComponent(cc.Layout),this.content.height=this.totalRow*(this.itemHeight+this.spacing)+this.spacing,this.content.width=this.colCount*(this.itemWidth+this.spacing)+this.spacing;for(var o=0,n=0;n<this.spawnCount;n+=this.colCount){for(var r=-this.itemHeight*(.5+o)-this.spacing*(o+1),i=0;i<this.colCount;i++){var s=n+i,a=null;s>=this.items.length?(a=cc.instantiate(this.itemTemplate),this.items.push(a)):a=this.items[s],this.content.addChild(a);var c=(i+.5)*this.itemWidth+this.spacing*(i+1)-this.content.width/2;a.setPosition(c,r),a.itemId=s,s>=this.data.length?a.active=!1:(a.active=!0,this.itemUpdateFunc(s,a,this.data[s]))}o++}return!0},e.prototype.getPositionInView=function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.scrollView.node.convertToNodeSpaceAR(e)},e.prototype.getItem=function(t){for(var e=this.content.childrenCount,o=0;o<e;++o){var n=this.content.children[o],r=n.getPosition();if(r=n.parent.convertToWorldSpaceAR(r),r=cc.director.getScene().convertToNodeSpaceAR(r),cc.rect(r.x-n.width/2,r.y-n.height/2,n.width,n.height).contains(t)&&n.itemId<=this.data.length-1)return n}return null},e.prototype._updateContentView=function(){if(this.isInit&&this.canUpdateFrame){this.canUpdateFrame=!1;for(var t=this.items,e=this.scrollView.content.y<this.lastContentPosY,o=(this.itemHeight+this.spacing)*this.cacheRow,n=0,r=0;r<t.length;r+=this.colCount){var i=this.getPositionInView(t[r]);if(e){if(n=t[r].y+o,i.y<-this.bufferZone&&n<0)for(var s=0;s<this.colCount;s++){t[c=s+r].y=n;var a=t[c].itemId-this.spawnCount;t[c].itemId=a,a>=0?(t[c].active=!0,this.itemUpdateFunc(a,t[c],this.data[a])):t[c].active=!1}}else if(n=t[r].y-o,i.y>this.bufferZone&&n>-this.content.height)for(s=0;s<this.colCount;s++){var c;t[c=s+r].y=n,a=t[c].itemId+this.spawnCount,t[c].itemId=a,a<this.data.length?(t[c].active=!0,this.itemUpdateFunc(a,t[c],this.data[a])):t[c].active=!1}}this.lastContentPosY=this.scrollView.content.y,this.canUpdateFrame=!0}},e.prototype.scrollTo=function(t){var e=this,o=Math.floor(t/this.colCount),n=o*this.itemHeight+(o-1)*this.spacing+this.node.height/2;this.scrollView.stopAutoScroll(),this.lastContentPosY,this.content.height,this.items.forEach(function(t,n){var r=Math.floor(n/e.colCount);t.y=0-(o+r+1)*(e.itemHeight+e.spacing)+e.itemHeight/2,t.itemId=o*e.colCount+n}),this.items.forEach(function(t){e.data[t.itemId]?e.itemUpdateFunc(t.itemId,t,e.data[t.itemId]):t.active=!1}),this.content.y=n},i([c(cc.Prefab)],e.prototype,"itemTemplate",void 0),i([c],e.prototype,"spacing",void 0),i([c],e.prototype,"visibleRowCount",void 0),i([c],e.prototype,"extraCahe",void 0),i([c],e.prototype,"colCount",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Setting:[function(t,e,o){"use strict";cc._RF.push(e,"b6490YrqF5IBIUxHn55kUsH","Setting");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Controller/LTrackerMgr"),l=t("../../../Controller/TaskController"),u=t("../../../Controller/WindVaneMgr"),p=t("../../../Define/EventId"),f=t("../../../Define/UIDefs"),h=t("../../../Framework/Event/EventMgr"),d=t("../../../Framework/UI/UIMgr"),_=t("../../../Framework/UIBase"),y=t("../../../Model/TaskModel"),v=t("../../../Network/Net"),m=t("../../../System/ArchiveSystem"),g=t("../../../System/AudioSystem"),b=cc._decorator,I=b.ccclass,w=b.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicList=[],e.soundList=[],e.subList=[],e._isSysSub=!1,e._isNetSub=!1,e._isLoad=!1,e._isDoing=!1,e}return r(e,t),e.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return h.EVENT.on(p.EventId.ON_SHOW,this._reShow,this),this._setMusicSwitch(),this._setSoundSwitch(),[4,this._setSubSwitch()];case 1:return t.sent(),this._isLoad=!0,c.default.inst.expo("cx155931",{}),[2]}})})},e.prototype.onDestroy=function(){h.EVENT.off(p.EventId.ON_SHOW,this._reShow,this)},e.prototype.onSwitchMusic=function(){m.default.switchMusic(),this._setMusicSwitch()},e.prototype.onSwitchSound=function(){m.default.switchSound(),this._setSoundSwitch()},e.prototype.onSwitchSub=function(){return s(this,void 0,void 0,function(){var t=this;return a(this,function(e){switch(e.label){case 0:return this._isLoad?this._isSysSub&&this._isNetSub?(d.default.inst.open(f.UIType.Unsubscribe,{cb:function(){t._setSubSwitch()}}),[3,5]):[3,1]:[2];case 1:return this._isSysSub?(c.default.inst.click("cx155931.dx204451",{}),[4,v.Net.setSubscribe(!0)]):[3,3];case 2:return e.sent(),y.default.inst.setNetSubStauts(!0),[3,4];case 3:u.default.inst.openSettings(),this._isDoing=!0,e.label=4;case 4:this._setSubSwitch(),e.label=5;case 5:return[2]}})})},e.prototype._setMusicSwitch=function(){var t=m.default.localData.music;this.musicList[0].active=t,this.musicList[1].active=!t,t?g.default.playMusic():g.default.stopMusic()},e.prototype._setSoundSwitch=function(){var t=m.default.localData.sound;this.soundList[0].active=t,this.soundList[1].active=!t},e.prototype._setSubSwitch=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return t=this,[4,l.default.inst.getSysSubStauts()];case 1:return t._isSysSub=e.sent(),this._isNetSub=y.default.inst.netSubStauts,this.subList[0].active=this._isSysSub&&this._isNetSub,this.subList[1].active=!this._isSysSub||!this._isNetSub,[2]}})})},e.prototype._reShow=function(){return s(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return this._isDoing?(this._isDoing=!1,t=this,[4,l.default.inst.getSysSubStauts()]):[2];case 1:return t._isSysSub=e.sent(),this._isSysSub?[4,v.Net.setSubscribe(!0)]:[3,3];case 2:e.sent(),y.default.inst.setNetSubStauts(!0),this._setSubSwitch(),e.label=3;case 3:return[2]}})})},e.prototype.onClose=function(){console.log("\u901a\u77e5\u4efb\u52a1\u5b8c\u6210"),h.EVENT.emit(p.EventId.ON_SETTING_END)},i([w({type:cc.Node})],e.prototype,"musicList",void 0),i([w({type:cc.Node})],e.prototype,"soundList",void 0),i([w({type:cc.Node})],e.prototype,"subList",void 0),i([I],e)}(_.default);o.default=T,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/TaskController":"TaskController","../../../Controller/WindVaneMgr":"WindVaneMgr","../../../Define/EventId":"EventId","../../../Define/UIDefs":"UIDefs","../../../Framework/Event/EventMgr":"EventMgr","../../../Framework/UI/UIMgr":"UIMgr","../../../Framework/UIBase":"UIBase","../../../Model/TaskModel":"TaskModel","../../../Network/Net":"Net","../../../System/ArchiveSystem":"ArchiveSystem","../../../System/AudioSystem":"AudioSystem"}],ShareMgr:[function(t,e,o){"use strict";cc._RF.push(e,"a814bxA3/NP4YpxWYBhaEKJ","ShareMgr");var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.ShareTask=o.ShareContent=o.ShareType=void 0;var s,a,c=t("../Define/EventId"),l=t("../Framework/Event/EventMgr"),u=t("../Framework/Net/HttpRequest"),p=t("../Framework/Tools/BaseInfo"),f=t("../Model/PlayerModel"),h=t("./ExLogCtr"),d=t("./MtopMgr"),_=t("./PlatMgr"),y=t("./TableMgr"),v=t("./WindVaneMgr");(function(t){t.sShareTitleIcon="sShareTitleIcon",t.sShareTitle="sShareTitle",t.sTitle="sTitle",t.sText="sText",t.sImage="sImage",t.sUrl="sUrl",t.sHbUrl="sHbUrl",t.sHbBackgroundImage="sHbBackgroundImage",t.sHbHeadImage="sHbHeadImage",t.sHbTextTitle="sHbTextTitle",t.sHbTextDesc="sHbTextDesc",t.sHbTextColor="sHbTextColor"})(s||(s={})),function(t){t.HBWX="weixinhaibao",t.HBPYQ="pengyouquanhaibao",t.HB="haibao",t.DD="dingding"}(o.ShareType||(o.ShareType={})),function(t){t.TONGYONG="TY",t.WANLIU="WL",t.FUHUO="FH",t.FENXIANG="FX",t.ZHULI="ZL"}(a=o.ShareContent||(o.ShareContent={})),(o.ShareTask||(o.ShareTask={})).WANLIU="T004";var m=function(){function t(){this._channels="",this._shareTitleIcon="",this._shareTitle="",this._url="",this._wxUrl="",this._pyqUrl="",this._hbUrl="",this._titleArr=[],this._textArr=[],this._imageArr=[],this._hbBackgroundImageArr=[],this._poster={},this._sucCallback=null,this._failCallback=null,this._isSharing=!1}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){l.EVENT.on(c.EventId.ON_SHOW,this.onShow,this)},t.prototype.share=function(t,e,o){return r(this,void 0,void 0,function(){var r,s,a,c,l,p,f;return i(this,function(i){switch(i.label){case 0:if(u.HttpRequest.isWeb)return e(),[2];this._sucCallback=e,this._failCallback=o,this._isSharing=!0,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this._getBaseInfo(t)];case 2:return i.sent(),[4,d.default.inst.convertUrl(this._url)];case 3:return r=i.sent(),s=this._getRandomStr(this._titleArr),a=this._getRandomStr(this._textArr),c=this._getRandomStr(this._imageArr),this._channels=encodeURIComponent(JSON.stringify([{type:"weixin_session"},{type:"weixin_timeline"},{type:"dingding"},{type:"poster_save"}])),l=n(n({},this._poster),{code:{qrCode:r}}),console.log(l,"posterInfo"),p="eleme://sns_share_v2?channels="+this._channels+"&shareTitleIcon="+this._shareTitleIcon+"&shareTitle="+this._shareTitle+"&title="+s+"&text="+encodeURIComponent(a)+"&url="+encodeURIComponent(r)+"&image="+c+"&posterInfo="+encodeURIComponent(JSON.stringify(l)),v.default.inst.openBrowser(p),[3,5];case 4:return f=i.sent(),this._failCallback&&this._failCallback(),h.default.inst.logJsError(f),[3,5];case 5:return[2]}})})},t.prototype._getBaseInfo=function(t){return r(this,void 0,void 0,function(){var e,o,n;return i(this,function(r){switch(r.label){case 0:return this._shareTitleIcon=y.TABLE.getShareInfoByName(s.sShareTitleIcon+"_"+t),this._shareTitle=y.TABLE.getShareInfoByName(s.sShareTitle+"_"+t),e=t==a.ZHULI?"inviterId="+f.default.inst.getOpenId():"","ONLINE"!=p.default.ENV&&(e+="&env=ppe"),o="/"+p.default.GAME_NAME+"/index.html?"+e,console.log(o,"url"),[4,d.default.inst.genShortLink(o)];case 1:return n=r.sent(),console.log(n,"shortLink"),this._url="https://tb.ele.me/wow/alsc/mod/c1474c7db25accb9ab49ddf3?targetUrl="+encodeURIComponent(n+"?navType=3")+"&elemeJumpUrl="+encodeURIComponent(n+"?navType=3")+"&isAutoCallapp=true&navType=3",this._titleArr=y.TABLE.getShareInfoByName(s.sTitle+"_"+t).split(","),this._textArr=y.TABLE.getShareInfoByName(s.sText+"_"+t).split(","),this._imageArr=y.TABLE.getShareInfoByName(s.sImage+"_"+t).split(","),this._hbBackgroundImageArr=y.TABLE.getShareInfoByName(s.sHbBackgroundImage+"_"+t).split(","),this._poster={templateId:"activity",enableSavePoster:!0,texts:{title:{text:y.TABLE.getShareInfoByName(s.sHbTextTitle+"_"+t),bold:!0},desc:{text:y.TABLE.getShareInfoByName(s.sHbTextDesc+"_"+t),color:y.TABLE.getShareInfoByName(s.sHbTextColor+"_"+t)}},headImage:y.TABLE.getShareInfoByName(s.sHbHeadImage+"_"+t)},[2]}})})},t.prototype._getRandomStr=function(t){return t[t.length*Math.random()|0]},t.prototype.onShow=function(){return r(this,void 0,void 0,function(){var t;return i(this,function(){return t=_.default.inst.browserTime,console.log("\u5206\u4eab\u7528\u65f6",t),this._sucCallback&&this._sucCallback(),this.clear(),[2]})})},t.prototype.clear=function(){this._sucCallback=null,this._failCallback=null,this._isSharing=!1},t}();o.default=m,cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr","../Framework/Net/HttpRequest":"HttpRequest","../Framework/Tools/BaseInfo":"BaseInfo","../Model/PlayerModel":"PlayerModel","./ExLogCtr":"ExLogCtr","./MtopMgr":"MtopMgr","./PlatMgr":"PlatMgr","./TableMgr":"TableMgr","./WindVaneMgr":"WindVaneMgr"}],SingleTouch:[function(t,e,o){"use strict";cc._RF.push(e,"72bd3WwCOlD+5EU/c8g7SEa","SingleTouch");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator.ccclass,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._touchID=null,e}return r(e,t),e.prototype._touchStart=function(t){null!==this._touchID?t.stopPropagation():this._touchID=t.getID()},e.prototype._touchMove=function(t){this._touchID!==t.getID()&&t.stopPropagation()},e.prototype._touchEnd=function(t){this._touchID!==t.getID()?t.stopPropagation():t.simulate||(this._touchID=null)},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStart,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMove,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEnd,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEnd,this,!0)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._touchStart,this,!0),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._touchMove,this,!0),this.node.off(cc.Node.EventType.TOUCH_END,this._touchEnd,this,!0),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._touchEnd,this,!0)},i([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"5206eq0hLtHnra87eJbW17V","Singleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.Singleton=void 0,o.Singleton=function(){return function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==t._inst&&(t._inst=new this),t._inst},enumerable:!1,configurable:!0}),t._inst=null,t}()},cc._RF.pop()},{}],StateMachine:[function(t,e){"use strict";var o;cc._RF.push(e,"c03a7UqzyBOuLDxWrOGeud4","StateMachine"),function(t){(function(t){var e=function(t,e,o){this.onStart=e,this.onStop=o,this.stateName=t};t.State=e;var o=function(){function t(){this._stateDictionary=new Map}return Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState.stateName},set:function(t){this.setState(t)},enumerable:!1,configurable:!0}),t.prototype.addState=function(t,o,n){this._stateDictionary.set(t,new e(t,o,n))},t.prototype.setState=function(t){null!=this._currentState&&null!=this._currentState.onStop&&this._currentState.onStop(),this._currentState=this._stateDictionary.get(t),null!=this._currentState.onStart&&this._currentState.onStart()},t}();t.StateMachine=o})(t.Tools||(t.Tools={}))}(o||(o={})),cc._RF.pop()},{}],SysHook:[function(t,e,o){"use strict";cc._RF.push(e,"4c82cq/9KtKJJAm0sDw5wDM","SysHook"),Object.defineProperty(o,"__esModule",{value:!0}),o.SysHook=void 0;var n=function(){function t(){}return t.setMultiTouchMax=function(t){void 0===t&&(t=1),cc.Node.maxTouchNum=t,cc.Node.touchNum=0;var e=cc.Node.prototype.dispatchEvent;cc.Node.prototype.dispatchEvent=function(t){switch(t.type){case"touchstart":cc.Node.touchNum<cc.Node.maxTouchNum&&(cc.Node.touchNum++,cc.Node.touchNum=cc.Node.touchNum>1?1:cc.Node.touchNum,this._canTouch=!0,e.call(this,t));break;case"touchmove":!this._canTouch&&cc.Node.touchNum<cc.Node.maxTouchNum&&(this._canTouch=!0,cc.Node.touchNum++,cc.Node.touchNum=cc.Node.touchNum>1?1:cc.Node.touchNum),this._canTouch&&e.call(this,t);break;case"touchend":this._canTouch&&(this._canTouch=!1,cc.Node.touchNum--,cc.Node.touchNum=cc.Node.touchNum<0?0:cc.Node.touchNum,e.call(this,t));break;case"touchcancel":this._canTouch&&(this._canTouch=!0,cc.Node.touchNum--,cc.Node.touchNum=cc.Node.touchNum<0?0:cc.Node.touchNum,e.call(this,t));break;default:e.call(this,t)}};var o=cc.Node.prototype._onPostActivated;cc.Node.prototype._onPostActivated=function(t){!t&&this._canTouch&&(this._canTouch=!1,cc.Node.touchNum--,cc.Node.touchNum=cc.Node.touchNum<0?0:cc.Node.touchNum),o.call(this,t)};var n=cc.Node.prototype._onPreDestroy;cc.Node.prototype._onPreDestroy=function(){this._canTouch&&(this._canTouch=!1,cc.Node.touchNum--,cc.Node.touchNum=cc.Node.touchNum<0?0:cc.Node.touchNum),n.call(this)}},t}();o.SysHook=n,cc._RF.pop()},{}],TabControl:[function(t,e,o){"use strict";cc._RF.push(e,"23aecD0apJIarg2fU8DFKfh","TabControl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,l=a.property,u=function(){function t(){this.tab=null,this.select=null,this.unselect=null}return i([l(cc.Sprite)],t.prototype,"tab",void 0),i([l(cc.SpriteFrame)],t.prototype,"select",void 0),i([l(cc.SpriteFrame)],t.prototype,"unselect",void 0),i([c("TabProperty")],t)}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tabs=[],e.clickHandler=null,e.selectIdx=0,e}return r(e,t),e.prototype.onLoad=function(){this.selectIdx>=0&&this.selectIdx<this.tabs.length&&this.setSelect(this.selectIdx)},e.prototype.onEnable=function(){var t,e;try{for(var o=s(this.tabs),n=o.next();!n.done;n=o.next())n.value.tab.node.on(cc.Node.EventType.TOUCH_END,this.onTabClick,this)}catch(r){t={error:r}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.onDisable=function(){var t,e;try{for(var o=s(this.tabs),n=o.next();!n.done;n=o.next())n.value.tab.node.off(cc.Node.EventType.TOUCH_END,this.onTabClick,this)}catch(r){t={error:r}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.start=function(){},e.prototype.setSelect=function(t){for(var e,o,n=0;n<this.tabs.length;++n)if(n==t){this.tabs[n].tab.spriteFrame=this.tabs[n].select;try{for(var r=(e=void 0,s(this.tabs)),i=r.next();!i.done;i=r.next()){var a=i.value;a!=this.tabs[n]&&(a.tab.spriteFrame=a.unselect)}}catch(c){e={error:c}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(e)throw e.error}}break}},e.prototype.getTargetIndex=function(t){for(var e=0;e<this.tabs.length;++e)if(this.tabs[e].tab.node==t)return e;return-1},e.prototype.onTabClick=function(t){var e=this.getTargetIndex(t.target);-1!=e&&(this.setSelect(e),this.clickHandler&&this.clickHandler.emit([e]))},i([l([u])],e.prototype,"tabs",void 0),i([l(cc.Component.EventHandler)],e.prototype,"clickHandler",void 0),i([l()],e.prototype,"selectIdx",void 0),i([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],TableMgr:[function(t,e,o){"use strict";cc._RF.push(e,"5b9f87+sIxAZogt3C6io4uX","TableMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TABLE=void 0;var i=t("../Framework/Res/ResLoader"),s=t("../Framework/Sys/TeMap"),a=t("./ExLogCtr"),c=function(){function t(){this._channelName="",this._all_table_list=[],this._isLoaded=!1,this._iTotalLoad=0,this._iLoadNum=0,this._level=new s.default,this._map=new s.default,this._global=new s.default,this._share=new s.default,this._mark=new s.default,this._task=new s.default,this._alltask=[],this._item=new s.default}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.setChannel=function(t){this._channelName=t},t.prototype.loadTableRes=function(){return n(this,void 0,Promise,function(){var t=this;return r(this,function(){return this._isLoaded?[2]:(this._isLoaded=!0,[2,new Promise(function(e){i.resLoader.loadRes("Config/_filelist_",cc.JsonAsset,function(o,n){t._all_table_list=n.json._files_||[],t._loadTableRes(function(){e()})})})])})})},t.prototype.select_channel_file=function(t){var e=t.lastIndexOf("/"),o=t.slice(e+1)+"_"+this._channelName;return this._all_table_list.indexOf(o+".json")>=0?t.slice(0,e+1)+o:t},t.prototype.loadTable=function(t,e){t=this.select_channel_file(t);var o=this;cc.resources.load(t,cc.JsonAsset,function(n,r){if(n)cc.error("failed to load "+t+": "+n);else if(e)try{e(null,r)}catch(i){cc.error("loadTable->",i+" res:"+t),a.default.inst.logJsError(i)}o._onInitOver()})},t.prototype._onInitOver=function(){this._iLoadNum>=this._iTotalLoad?console.error("\u8d44\u6e90\u52a0\u8f7d\u6570\u91cf\u5bf9\u4e0d\u4e0a\u4e86\uff0c\u6ce8\u610f\u4fee\u6539"):(this._iLoadNum++,this._iLoadNum>=this._iTotalLoad&&this._completeCallback&&this._completeCallback())},t.prototype._loadTableRes=function(t){this._completeCallback=t;var e=[];e.push(this._initLevel),e.push(this._initMap),e.push(this._initGlobal),e.push(this._initTask),e.push(this._initMark),e.push(this._initShare),e.push(this._initItem),this._iTotalLoad=e.length;for(var o=0;o<e.length;o++)e[o].bind(this)()},t.prototype._initLevel=function(){var t=this;this.loadTable("Config/Level",function(e,o){for(var n=Object.keys(o.json),r=0;r<n.length;++r){var i=o.json[n[r]];t._level.set(i.sID,i)}})},t.prototype.getLevel=function(t){return this._level.get(t)},t.prototype._initMap=function(){var t=this;this.loadTable("Config/Map",function(e,o){for(var n=Object.keys(o.json),r=0;r<n.length;++r){var i=o.json[n[r]];t._map.set(i.sID,i)}})},t.prototype.getMap=function(t){return this._map.get(t)},t.prototype._initGlobal=function(){var t=this;this.loadTable("Config/Global",function(e,o){for(var n=Object.keys(o.json),r=0;r<n.length;r++){var i=o.json[n[r]];t._global.set(i.sID,i)}})},t.prototype.getGlobalById=function(t){return this._global.get(t)||null},t.prototype._initShare=function(){var t=this;this.loadTable("Config/Share",function(e,o){for(var n=Object.keys(o.json),r=0;r<n.length;r++){var i=o.json[n[r]];t._share.set(i.sName,i.sData)}})},t.prototype.getShareInfoByName=function(t){return this._share.get(t)||null},t.prototype._initMark=function(){var t=this;this.loadTable("Config/Marketing",function(e,o){for(var n=Object.keys(o.json),r=0;r<n.length;++r){var i=o.json[n[r]];t._mark.set(i.sID,i)}})},t.prototype.getMark=function(t){return this._mark.get(t)},t.prototype._initTask=function(){var t=this;this.loadTable("Config/Task",function(e,o){for(var n=Object.keys(o.json),r=0;r<n.length;++r){var i=o.json[n[r]];t._task.set(i.sID,i)}var s=o.json;t._alltask=s})},t.prototype.getTask=function(){return this._alltask},t.prototype.getTaskInfo=function(t){return this._task.get(t)},t.prototype._initItem=function(){var t=this;this.loadTable("Config/Item",function(e,o){for(var n=Object.keys(o.json),r=0;r<n.length;++r){var i=o.json[n[r]];t._item.set(i.sID,i)}})},t.prototype.getItem=function(t){return this._item.get(t)},t}();o.TABLE=c.inst,cc._RF.pop()},{"../Framework/Res/ResLoader":"ResLoader","../Framework/Sys/TeMap":"TeMap","./ExLogCtr":"ExLogCtr"}],TaskController:[function(t,e,o){"use strict";cc._RF.push(e,"1460dtSjKRDVJUaAO7e82WI","TaskController");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Framework/Platform/Platform"),s=t("../Framework/Tools/BaseInfo"),a=t("../Model/TaskModel"),c=t("./MtopMgr"),l=t("./PlatMgr"),u=t("./TurnTaskController"),p=t("./WindVaneMgr"),f=function(){function t(){this._isClick=!1}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.onOpenTask=function(){return n(this,void 0,void 0,function(){return r(this,function(){return[2]})})},t.prototype.queryTask=function(t,e){return void 0===e&&(e=!0),n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return[4,c.default.inst.querytask({missionCollectionId:t})];case 1:return(o=n.sent())&&o.data?(this._classifyTask(o.data,e),[2]):[2]}})})},t.prototype._classifyTask=function(t,e){a.default.inst.clearList();for(var o=t.mlist?t.mlist.length:0,n=0;n<o;n++){var r=t.mlist[n];if(r.status=this.changeTaskStatus(r),(r.actionConfig.actionType!=a.TaskItemType.OPEN_APP_PUSH||!a.default.inst.netSubAwardStauts)&&r.receiveType!=a.MissionReceiveType.RECEIVE)switch(e||r.missionDefId!=s.default.ENTRY_TASK_ID||r.status!=a.MissionStatusType.RUNNING||i.Platform.getUrlInfo(s.default.ENTRY_TASK_KEY)==s.default.ENTRY_TASK_VALUE&&this.pageTask(r),r.status){case a.MissionStatusType.RUNNING:a.default.inst.setAcceptptTaskList(r),a.TaskItemType.OPEN_APP_PUSH==r.actionConfig.actionType&&this.refreshTaskInfo(r);break;case a.MissionStatusType.FINISH:a.default.inst.setAwardingTaskList(r);break;default:a.default.inst.setCompleteTaskList(r)}}a.default.taskInfo=t,u.default.inst.saveList(t.mlist)},t.prototype.queryTaskItem=function(t,e){return n(this,void 0,void 0,function(){var o,n;return r(this,function(r){switch(r.label){case 0:return o={missionCollectionId:t,missionId:e},[4,c.default.inst.querytask(o)];case 1:return[2,null==(n=r.sent())?void 0:n.data.mlist[0]]}})})},t.prototype.tiggerTask=function(t){return void 0===t&&(t=null),n(this,void 0,void 0,function(){var e;return r(this,function(o){switch(o.label){case 0:return e={collectionId:t.missionCollectionId,missionId:t.missionDefId,missionXId:t.missionXId,pageFrom:t.actionConfig.actionValue?t.actionConfig.actionValue.pageSpm:"",actionCode:t.actionConfig.actionType||"PAGEVIEW",count:t.stage.count,viewTime:"15"},[4,c.default.inst.tigger(e)];case 1:return o.sent(),[2]}})})},t.prototype.pageTask=function(t,e){return void 0===t&&(t=null),void 0===e&&(e="15"),n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return o={collectionId:t.missionCollectionId,missionId:t.missionDefId,missionXId:t.missionXId,pageFrom:t.actionConfig.actionValue.pageSpm?t.actionConfig.actionValue.pageSpm:"",actionCode:t.actionConfig.actionType,viewTime:e,sync:t.receiveType==a.MissionReceiveType.RECEIVE},[4,c.default.inst.pageview(o)];case 1:return n.sent(),[2]}})})},t.prototype.getTask=function(t,e){return n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return o={missionCollectionId:t,missionId:e},[4,c.default.inst.getTask(o)];case 1:return n.sent(),[2]}})})},t.prototype.getAward=function(t,e){var o;return void 0===e&&(e=null),n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return n={missionCollectionId:t.missionCollectionId,missionId:t.missionDefId,count:null===(o=t.stage)||void 0===o?void 0:o.count,extInfo:e?JSON.stringify(e):"",missionXId:t.missionXId,instanceId:t.id,umiToken:"1",ua:"1"},[4,c.default.inst.getAward(n)];case 1:return[2,r.sent()]}})})},t.prototype.goToFinish=function(){return n(this,void 0,void 0,function(){return r(this,function(){return[2]})})},t.prototype.refreshTaskInfo=function(e,o){var c,u;return void 0===o&&(o=null),n(this,void 0,void 0,function(){var n,p;return r(this,function(r){switch(r.label){case 0:switch(e.actionConfig.actionType){case a.TaskItemType.PAGEVIEW:return[3,1];case a.TaskItemType.THIRD:return[3,7];case a.TaskItemType.ORDER:return[3,8];case a.TaskItemType.OPEN_APP_PUSH:return[3,9]}return[3,13];case 1:return e.missionDefId!=s.default.ENTRY_TASK_ID?[3,4]:i.Platform.getUrlInfo(s.default.ENTRY_TASK_KEY)!=s.default.ENTRY_TASK_VALUE?[3,3]:[4,this.pageTask(e)];case 2:return r.sent(),[3,3];case 3:return[3,13];case 4:return(null===(u=null===(c=e.actionConfig)||void 0===c?void 0:c.actionValue)||void 0===u?void 0:u.executeOpportunity)?[4,this.pageTask(e,l.default.inst.browserTime+"")]:[3,6];case 5:r.sent(),r.label=6;case 6:case 7:case 8:return[3,13];case 9:return[4,t.inst.getSysSubStauts()];case 10:return n=r.sent(),p=a.default.inst.netSubStauts,n&&p?[4,this.pageTask(e)]:[3,12];case 11:r.sent(),r.label=12;case 12:return[3,13];case 13:return o&&o(),[2]}})})},t.prototype.getSysSubStauts=function(){return n(this,void 0,void 0,function(){var t,e;return r(this,function(o){switch(o.label){case 0:return[4,p.default.inst.getNotificationSettings()];case 1:return t=o.sent(),e=!1,t&&t.status==a.SubStatus.authorized&&(e=!0),[2,e]}})})},t.prototype.setSub=function(){return n(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,p.default.inst.openSettings()];case 1:return t.sent(),[2]}})})},t.prototype.refreshTask=function(){},t.prototype.changeTaskStatus=function(t){var e=t.status,o=this.getTaskStage(t.missionStageDTOS),n=t.missionStageDTOS[o];return n&&(n?(console.log(n,"changeTaskStatus"),n.status==a.TaskStatus.RUNNING&&(e=a.MissionStatusType.RUNNING,console.log("MissionStatusType.RUNNING")),n.rewardStatus!=a.TaskRewardStatus.SUCCESS&&n.status==a.TaskStatus.FINISH&&(e=a.MissionStatusType.FINISH,console.log("MissionStatusType.FINISH")),n.rewardStatus==a.TaskRewardStatus.SUCCESS&&t.status==a.TaskStatus.FINISH&&(e=a.MissionStatusType.FINISHED,console.log("MissionStatusType.FINISHED"))):n.rewardStatus==a.TaskRewardStatus.SUCCESS&&t.status==a.TaskStatus.FINISH&&(e=a.MissionStatusType.FINISHED,console.log("MissionStatusType.FINISHED"))),e},t.prototype.getGameTaskList=function(){},t.prototype.getGameTaskItem=function(){},t.prototype.toDoGameTask=function(t,e){return void 0===e&&(e=null),n(this,void 0,void 0,function(){return r(this,function(){return[2]})})},t.prototype.getTaskStage=function(t){var e=0;return t.forEach(function(t){t.rewardStatus==a.TaskRewardStatus.SUCCESS&&e++}),e=e==t.length?e-1:e},t}();o.default=f,cc._RF.pop()},{"../Framework/Platform/Platform":"Platform","../Framework/Tools/BaseInfo":"BaseInfo","../Model/TaskModel":"TaskModel","./MtopMgr":"MtopMgr","./PlatMgr":"PlatMgr","./TurnTaskController":"TurnTaskController","./WindVaneMgr":"WindVaneMgr"}],TaskModel:[function(t,e,o){"use strict";cc._RF.push(e,"da43fyLgQJPiJp9BBlwSKwo","TaskModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.InviteHelpResult=o.TaskListType=o.SubStatus=o.TaskRewardStatus=o.MissionCardButtonType=o.MissionStatusType=o.TaskStatus=o.MissionInstanceTriggerType=o.TaskItemType=o.RewardSendType=o.ReceiveStatus=o.MissionReceiveType=void 0;var n,r=t("../Define/EventId"),i=t("../Framework/Event/EventMgr"),s=function(){function t(){this._acceptptTaskList=[],this._awardingTaskList=[],this._completeTaskList=[],this._gameTaskStatus=!1,this._netSubStauts=!1,this._netSubAwardStauts=!1,this._gameTaskPro={}}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.clearList=function(){this._acceptptTaskList=[],this._awardingTaskList=[],this._completeTaskList=[]},t.prototype.setAcceptptTaskList=function(t){this._acceptptTaskList.push(t)},t.prototype.setAwardingTaskList=function(t){this._awardingTaskList.push(t)},t.prototype.setCompleteTaskList=function(t){this._completeTaskList.push(t)},t.prototype.setGameTaskPro=function(t){this._gameTaskPro=t},t.prototype.setFinisheStatus=function(t,e){this._gameTaskPro[t]||(this._gameTaskPro[t]={}),this._gameTaskPro[t].isFinishe=e},t.prototype.setNewTaskInfo=function(t,e){this._gameTaskPro[t]||(this._gameTaskPro[t]={}),this._gameTaskPro[t]=e},Object.defineProperty(t.prototype,"gameTaskPro",{get:function(){return this._gameTaskPro},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"acceptptTaskList",{get:function(){return this._acceptptTaskList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"awardingTaskList",{get:function(){return this._awardingTaskList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completeTaskList",{get:function(){return this._completeTaskList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allTask",{get:function(){return this._awardingTaskList.concat(this._acceptptTaskList,this._completeTaskList)},enumerable:!1,configurable:!0}),t.prototype.setGameTaskStatus=function(t){this._gameTaskStatus=t},t.prototype.mainRedDotStatus=function(){return console.log(this.awardingTaskList,this._gameTaskStatus),this.awardingTaskList.length>0||this._gameTaskStatus},Object.defineProperty(t.prototype,"netSubStauts",{get:function(){return this._netSubStauts},enumerable:!1,configurable:!0}),t.prototype.setNetSubStauts=function(t){this._netSubStauts=t},Object.defineProperty(t.prototype,"netSubAwardStauts",{get:function(){return this._netSubAwardStauts},enumerable:!1,configurable:!0}),t.prototype.setNetSubAwardStauts=function(t){this._netSubAwardStauts=t},t.prototype.reduceTask=function(t,e){for(var o=[],s=(o=e==n.accept?this._acceptptTaskList:this._awardingTaskList).length,a=999,c=0;c<s;c++)if(o[c].missionDefId==t.missionDefId){a=c;break}999!=a&&o.splice(a,1),e==n.accept?(this._acceptptTaskList=o,this.setAwardingTaskList(t)):(this._awardingTaskList=o,this.setCompleteTaskList(t)),i.EVENT.emit(r.EventId.ON_REFRESH_TASK)},t.taskInfo={},t}();o.default=s,function(t){t.RECEIVE="RECEIVE",t.NO_RECEIVE="NORECEIVE"}(o.MissionReceiveType||(o.MissionReceiveType={})),function(t){t.UNKONWN="UNKONWN",t.TORECEIVE="TORECEIVE",t.HAVERECEIVED="HAVERECEIVED"}(o.ReceiveStatus||(o.ReceiveStatus={})),function(t){t.AUTO="REWARD_SEND_AUTO",t.MANUAL="REWARD_SEND_MANUAL",t.LOCK="NOTIFY_REACH_STAGE",t.EXCHANGE_MANUAL="EXCHANGE_MANUAL"}(o.RewardSendType||(o.RewardSendType={})),function(t){t.ORDER="ORDER",t.PAGEVIEW="PAGEVIEW",t.P2P="P2P",t.SHARE="SHARE",t.THIRD="THIRD",t.TIMESIGNIN="TIMESIGNIN",t.COLLECTION="COLLECTION",t.SIMPLESIGNIN="SIMPLESIGNIN",t.EXCHANGE="EXCHANGE",t.FRIEND_GIVE="FRIEND_GIVE",t.OPEN_APP_PUSH="OPEN_APP_PUSH",t.COMB_TASK="COMB_TASK",t.SET_NICKNAME="SET_NICKNAME"}(o.TaskItemType||(o.TaskItemType={})),function(t){t.UNKNONW="UNKNONW",t.ELE_ORDER_TANWAI="ELE_ORDER_TANWAI",t.ELE_ORDER="ELE_ORDER",t.KB_ORDER="KB_ORDER",t.P2P="P2P",t.PAGEVIEW="PAGEVIEW",t.THIRD="THIRD",t.SHARE="SHARE",t.TIMESIGNIN="TIMESIGNIN",t.COLLECTION="COLLECTION",t.SIMPLESIGNIN="SIMPLESIGNIN",t.EXCHANGE="EXCHANGE",t.FRIEND_GIVE="FRIEND_GIVE",t.OPEN_APP_PUSH="OPEN_APP_PUSH",t.COMB_TASK="COMB_TASK",t.SET_NICKNAME="SET_NICKNAME"}(o.MissionInstanceTriggerType||(o.MissionInstanceTriggerType={})),function(t){t.NO_REACH="NO_REACH",t.RUNNING="RUNNING",t.FINISH="FINISH"}(o.TaskStatus||(o.TaskStatus={})),function(t){t.RUNNING="RUNNING",t.FINISH="FINISH",t.FINISHED="FINISHED",t.FINISHPASS="FINISHPASS",t.UNFINISHPASS="UNFINISHPASS"}(o.MissionStatusType||(o.MissionStatusType={})),function(t){t.TAKE="take",t.TODO="todo",t.REWARD="reward",t.FINISH="finish",t.EXCHANGE="exchange"}(o.MissionCardButtonType||(o.MissionCardButtonType={})),function(t){t.TODO="TODO",t.SUCCESS="SUCCESS",t.FAIL="FAIL"}(o.TaskRewardStatus||(o.TaskRewardStatus={})),function(t){t.authorized="authorized",t.denied="denied",t.notDetermined="notDetermined",t.unknown="unknown"}(o.SubStatus||(o.SubStatus={})),function(t){t.accept="accept",t.award="award",t.complete="complete"}(n=o.TaskListType||(o.TaskListType={})),function(t){t[t.NONE=0]="NONE",t[t.SUCCESS=1]="SUCCESS",t[t.FORBID_SELF=2]="FORBID_SELF",t[t.REPEAT=3]="REPEAT",t[t.INVITEED_LIMIT=4]="INVITEED_LIMIT",t[t.INVITER_LIMIT=5]="INVITER_LIMIT"}(o.InviteHelpResult||(o.InviteHelpResult={})),cc._RF.pop()},{"../Define/EventId":"EventId","../Framework/Event/EventMgr":"EventMgr"}],TeMap:[function(t,e,o){"use strict";cc._RF.push(e,"53a3dSI0wxHAoj5dHBzCwcS","TeMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this._data={},t&&(this._data=t)}return t.prototype.has=function(t){return null!=t&&null!=t&&this._data.hasOwnProperty(t.toString())},t.prototype.get=function(t){return null==t||null==t?null:this._data[t.toString()]},t.prototype.set=function(t,e){this._data[t.toString()]=e},Object.defineProperty(t.prototype,"keys",{get:function(){return Object.keys(this._data)},enumerable:!1,configurable:!0}),t.prototype.get_keys=function(){return this.keys},t.prototype.del=function(t){delete this._data[t.toString()]},t.prototype.rand=function(){var t=this.keys,e=t[Math.floor(Math.random()*t.length)];return this.get(e)},t.prototype.clear=function(){this._data={}},t.prototype.getLength=function(){return this.keys.length},t}();o.default=n,cc._RF.pop()},{}],TurnTaskController:[function(t,e,o){"use strict";cc._RF.push(e,"f9d52bw5ipMR4/LJ/ILQANI","TurnTaskController");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Framework/Net/HttpRequest"),s=t("../Framework/Tools/BaseInfo"),a=t("./DoubleAwardController"),c=t("./TaskController"),l=function(){function t(){this._taskIdx=1,this._taskList=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.getTaskList=function(){return n(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,c.default.inst.queryTask(s.default.TASK_GAME_PROP,!1)];case 1:return t.sent(),[2]}})})},t.prototype.saveList=function(t){this._taskList=t,console.log("this._taskList",this._taskList)},t.prototype.getProp=function(t,e,o){return void 0===e&&(e=null),void 0===o&&(o=null),n(this,void 0,void 0,function(){var n,s,c;return r(this,function(r){switch(r.label){case 0:return i.HttpRequest.isWeb?[2,e()]:this._taskList?[3,2]:(n=this,[4,this.getTaskList()]);case 1:return n._taskList=r.sent(),this.getProp(t),[2];case 2:return this._taskIdx>=this._taskList.length&&(this._taskIdx=0),s=this._taskList[this._taskIdx],console.log(this._taskList,this._taskIdx),s?(c={sID:t,sMissionCollectionID:s.missionCollectionId,sMissionID:s.missionDefId},a.default.inst.getNewAction(c,e,o),[2]):[2]}})})},t.prototype.changeIdx=function(){this._taskIdx+=1},t}();o.default=l,cc._RF.pop()},{"../Framework/Net/HttpRequest":"HttpRequest","../Framework/Tools/BaseInfo":"BaseInfo","./DoubleAwardController":"DoubleAwardController","./TaskController":"TaskController"}],UIBase:[function(t,e,o){"use strict";cc._RF.push(e,"e0585CZW5BBgK519LYoyYnN","UIBase");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.UIShowTypes=void 0;var s,a=t("../Define/UIDefs"),c=t("./UI/UIMgr"),l=t("./Utils/Utils"),u=t("./Res/ResKeeper"),p=cc._decorator,f=p.ccclass,h=p.property;(function(t){t[t.UIFullScreen=0]="UIFullScreen",t[t.UIAddition=1]="UIAddition",t[t.UISingle=2]="UISingle"})(s=o.UIShowTypes||(o.UIShowTypes={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showType=s.UISingle,e.quickClose=!0,e.showLayer=a.LayerType.Pop,e.cache=!1,e.maskOpacity=255,e._para=null,e.isPlayOpenAni=!1,e.UIid=0,e}return r(e,t),e.prototype.close=function(){c.default.inst.close(this.uiType)},e.prototype.init=function(t,e){this._para=l.default.clone(t),this.uiType=e},e.prototype.onOpen=function(){},e.prototype.onOpenAniOver=function(){},e.prototype.onClose=function(){},e.prototype.onTop=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o]},i([h({type:cc.Enum(s),displayName:"\u663e\u793a\u7c7b\u578b"})],e.prototype,"showType",void 0),i([h()],e.prototype,"quickClose",void 0),i([h({type:cc.Enum(a.LayerType)})],e.prototype,"showLayer",void 0),i([h()],e.prototype,"cache",void 0),i([h()],e.prototype,"maskOpacity",void 0),i([f],e)}(u.default);o.default=d,cc._RF.pop()},{"../Define/UIDefs":"UIDefs","./Res/ResKeeper":"ResKeeper","./UI/UIMgr":"UIMgr","./Utils/Utils":"Utils"}],UICloseAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"0a83aI6odRAhpOnBMcQ6/en","UICloseAnimation");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a],e)}(cc.Animation));o.default=c,cc._RF.pop()},{}],UIDefs:[function(t,e,o){"use strict";var n;cc._RF.push(e,"cfbd74GR/NOr782467+09nO","UIDefs"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIDataInfo=o.UIType=o.LayerType=void 0,function(t){t[t.GUI=0]="GUI",t[t.Pop=1]="Pop",t[t.Tip=2]="Tip",t[t.Top=3]="Top"}(o.LayerType||(o.LayerType={})),function(t){t[t.$Start=0]="$Start",t[t.Loading=1]="Loading",t[t.ReviveUI=2]="ReviveUI",t[t.WatchAD=3]="WatchAD",t[t.GameGuide=4]="GameGuide",t[t.GameTips=5]="GameTips",t[t.GamePause=6]="GamePause",t[t.GameDrop=7]="GameDrop",t[t.GameSettlement=8]="GameSettlement",t[t.CommonDialog=9]="CommonDialog",t[t.AntiAddiction=10]="AntiAddiction",t[t.Unable=11]="Unable",t[t.ExitGame=12]="ExitGame",t[t.ExitShare=13]="ExitShare",t[t.Set=14]="Set",t[t.Unsubscribe=15]="Unsubscribe",t[t.Rank=16]="Rank",t[t.GetItemLayer=17]="GetItemLayer",t[t.MorePower=18]="MorePower",t[t.GetPower=19]="GetPower",t[t.$End=20]="$End"}(n=o.UIType||(o.UIType={}));var r=function(){function t(t,e,o){void 0===o&&(o=!1),this.preventTouch=!0,this.showWaitMask=!1,this.uiType=t,this.uiPath=e,this.showWaitMask=o}return Object.defineProperty(t.prototype,"fullPath",{get:function(){return"UIPrefab/"+this.uiPath},enumerable:!1,configurable:!0}),t.getUIData=function(t){for(var e=0;e<this._uiDataList.length;++e)if(this._uiDataList[e].uiType==t)return this._uiDataList[e];return null},t._uiDataList=[new t(n.Loading,"Loading",!0),new t(n.ReviveUI,"ReviveUI"),new t(n.WatchAD,"WatchAD"),new t(n.GameGuide,"GameGuide"),new t(n.GamePause,"GamePause"),new t(n.GameDrop,"GameDrop"),new t(n.GameSettlement,"GameSettlement"),new t(n.GameTips,"GameTips"),new t(n.GetItemLayer,"GetItemLayer"),new t(n.ExitGame,"ExitGame"),new t(n.ExitShare,"Detain"),new t(n.AntiAddiction,"PreventAddiction/AntiAddiction"),new t(n.Unsubscribe,"Common/CommonDialog"),new t(n.Set,"Set/Set"),new t(n.Unable,"PreventAddiction/Unable"),new t(n.Rank,"Rank/Rank"),new t(n.MorePower,"Power/Power"),new t(n.GetPower,"Power/PowerNo")],t}();o.UIDataInfo=r,cc._RF.pop()},{}],UIEffectMgr:[function(t,e,o){"use strict";cc._RF.push(e,"649bcq5eVVD6LkHQOcLPWVa","UIEffectMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Sys/TeMap"),a=t("./UIEffectType"),c=t("./UIEffect"),l=t("../Res/ResUtil"),u=t("../Res/NodePool"),p=t("../Sys/Handler"),f=cc._decorator,h=f.ccclass,d=f.property,_=function(){function t(){this.group=null,this.effectTypes=[]}return i([d({type:cc.Node,displayName:"\u7279\u6548\u663e\u793a\u5bb9\u5668(\u5c42\u7ea7)"})],t.prototype,"group",void 0),i([d({type:[cc.Enum(a.UIEffectType)],displayName:"\u52a0\u5165\u6b64\u5bb9\u5668\u7279\u6548\u7c7b\u578b\u5217\u8868"})],t.prototype,"effectTypes",void 0),i([h("EffectGroupType")],t)}(),y=function(){function t(){this.effectType=a.UIEffectType.None,this.prefab=null}return i([d({type:cc.Enum(a.UIEffectType),displayName:"\u7279\u6548\u7c7b\u578b"})],t.prototype,"effectType",void 0),i([d({type:cc.Prefab,displayName:"prefab"})],t.prototype,"prefab",void 0),i([h("EffectPrefab")],t)}(),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectPrefabs=[],e.effectConfigs=[],e._effectPrefabMap=new s.default,e._effectGroupMap=new s.default,e._effectPool=new s.default,e}var o;return r(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return this._inst||cc.error("Effect Manger not load yet!"),this._inst},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._inst=this;for(var t=0;t<this.effectConfigs.length;++t)for(var e=this.effectConfigs[t],n=e.effectTypes,r=0;r<n.length;++r)this._effectGroupMap.set(n[r],e.group);for(t=0;t<this.effectPrefabs.length;++t){var i=this.effectPrefabs[t],s=i.prefab,a=new u.NodePool;a.init(s),this._effectPool.set(i.effectType,a),this._effectPrefabMap.set(i.effectType,s)}},e.prototype.addEffect=function(t,e,o,n){void 0===e&&(e=!0),void 0===n&&(n=!0);var r=this.createEffect(t,e,n);if(!r)return cc.error("add effect fail!"),null;var i=this._effectGroupMap.get(t);return i&&(i.addChild(r),o&&r.setPosition(i.convertToNodeSpaceAR(o))),r.getComponent(c.default)},e.prototype.createEffect=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!0);var n=null,r=this._effectPool.get(t);if(r&&(n=r.getNode()),!n){var i=this._effectPrefabMap.get(t);if(!i)return cc.error("effect prefab not found!"),null;n=l.ResUtil.instantiate(i)}if(n){var s=n.getComponent(c.default);s?(s.effectType=t,o&&s.setCompleteCallback(new p.Handler(this,this.recovery,null,!0)),e&&s.playAni()):cc.error("effect script not found!")}return n},e.prototype.recovery=function(t,e){e&&e.parent&&e.removeFromParent();var o=this._effectPool.get(t);o||(o=new u.NodePool,this._effectPool.set(t,o)),o.freeNode(e)},e.prototype.onDestroy=function(){for(var t=this._effectPool.keys,e=0;e<t.length;++e){var n=this._effectPool.get(t[e]);n&&n.destory()}this._effectPool.clear(),o._inst=null},e._inst=null,i([d({type:[y],displayName:"\u7279\u6548\u5217\u8868"})],e.prototype,"effectPrefabs",void 0),i([d({type:[_],displayName:"\u7279\u6548\u663e\u793a\u5c42\u7ea7\u914d\u7f6e"})],e.prototype,"effectConfigs",void 0),o=i([h],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../Res/NodePool":"NodePool","../Res/ResUtil":"ResUtil","../Sys/Handler":"Handler","../Sys/TeMap":"TeMap","./UIEffect":"UIEffect","./UIEffectType":"UIEffectType"}],UIEffectType:[function(t,e,o){"use strict";cc._RF.push(e,"1da57crPXROAKu2mBh3z0Uw","UIEffectType"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIEffectType=void 0,function(t){t[t.None=0]="None",t[t.ShootStart=1]="ShootStart",t[t.HitBoos=2]="HitBoos",t[t.CardBlingOut=3]="CardBlingOut",t[t.UnitStartSKill=4]="UnitStartSKill",t[t.ComboHitEffect=5]="ComboHitEffect",t[t.PowerFlip=6]="PowerFlip",t[t.PowerFlipScreen=7]="PowerFlipScreen"}(o.UIEffectType||(o.UIEffectType={})),cc._RF.pop()},{}],UIEffect:[function(t,e,o){"use strict";cc._RF.push(e,"49cc1syEbFNZIzE5LScS9YR","UIEffect");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./UIEffectType"),a=cc._decorator,c=a.ccclass,l=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._ani=null,e._completeCallback=null,e._effectType=s.UIEffectType.None,e}var o;return r(e,t),o=e,Object.defineProperty(e.prototype,"ani",{get:function(){return this._ani},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"effectType",{get:function(){return this._effectType},set:function(t){this._effectType=t},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._ani=this.node.getComponent(cc.Animation)},e.prototype.setCompleteCallback=function(t){this._completeCallback=t},e.prototype.onAniComplete=function(){this._completeCallback&&this._completeCallback.runWith([this.effectType,this.node]),this.node.emit(o.EVENT_ANI_COMPLETE)},e.prototype.start=function(){this.playAni()},e.prototype.playAni=function(){this._ani&&this._ani.play().wrapMode!=cc.WrapMode.Loop&&this._ani.once("finished",this.onAniComplete,this)},e.prototype.setPlayTime=function(t){this._ani.defaultClip.speed=t/1e3/this._ani.defaultClip.duration},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this._ani&&this._ani.off("finished",this.onAniComplete,this)},e.EVENT_ANI_COMPLETE="UIEffect.EVENT_ANI_COMPLETE",o=i([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./UIEffectType":"UIEffectType"}],UIFacade:[function(t,e,o){"use strict";cc._RF.push(e,"16e3aBpWmhDeZYUzLRkyJpM","UIFacade");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UIFacade=void 0;var i=t("./UIMgr"),s=t("../../Define/UIDefs"),a=t("../../Define/EventId"),c=t("../Event/EventMgr"),l=t("./FlyTxtPool"),u=function(){function t(){}return t.showToast=function(t){i.default.inst.showToast(t)},t.showConfirm=function(t,e,o){return void 0===e&&(e="\u786e\u8ba4"),void 0===o&&(o="\u53d6\u6d88"),n(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(n){i.default.inst.open(s.UIType.Confirm,{content:t,confirmBtnTxt:e,cancelBtnTxt:o}),c.EVENT.once(a.EventId.EVENT_CONFIRM,function(t){n(t)})})]})})},t.showLoading=function(t){i.default.inst.showSceneLoadUI(t)},t.hideLoading=function(){i.default.inst.hideSceneLoadUI()},t.flyTxt=function(t,e,o){void 0===o&&(o=cc.Color.WHITE),l.FlyTxtPool.flyTxt(t,e,o)},t}();o.UIFacade=u,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../Event/EventMgr":"EventMgr","./FlyTxtPool":"FlyTxtPool","./UIMgr":"UIMgr"}],UIMgr:[function(t,e,o){"use strict";cc._RF.push(e,"e5f7aIPaPFCQK9zX5+7Hh5H","UIMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.eOrientation=void 0;var s=t("../../Define/UIDefs"),a=t("../UIBase"),c=t("./CommonToast"),l=t("../../Define/EventId"),u=t("../Res/ResLoader"),p=t("./UIOpenAnimation"),f=t("./UICloseAnimation"),h=t("../Res/ResUtil"),d=t("../Event/EventMgr"),_=t("../Scene/SceneMgr"),y=cc._decorator,v=y.ccclass,m=y.property;(function(t){t[t.Landscape=0]="Landscape",t[t.Portrait=1]="Portrait"})(o.eOrientation||(o.eOrientation={}));var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.guiLayer=null,e.popLayer=null,e.tipLayer=null,e.topLayer=null,e.uiWaitNode=null,e.waitMask=null,e.sceneWaitNode=null,e.sceneWaitLbl=null,e.tipsNode=null,e.uiBack=null,e._tipComponnet=null,e.BackGroundUI=0,e.isClosing=!1,e.isOpening=!1,e.UICache={},e.UIStack=[],e.UIOpenQueue=[],e.UICloseQueue=[],e.uiOpenBeforeDelegate=null,e.uiOpenDelegate=null,e.uiCloseDelegate=null,e.showWaitMask=!0,e}var o;return r(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return o._inst?o._inst:(cc.error("UIMgr not load yet!","%s"),null)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){console.log("init UIMGR ......................."),this.resetWinSize(),o._inst=this},e.prototype.open=function(t,e,o){var n=this;void 0===o&&(o=null);var r={uiType:t,uiArgs:e,uiView:null};if(this.isOpening||this.isClosing)return cc.log("open <"+s.UIType[t]+"> ui action push into a queue!"),void this.UIOpenQueue.push(r);if(-1==this.getUIIndex(t)){r.zOrder=this.UIStack.length+1,this.UIStack.push(r);var i=s.UIDataInfo.getUIData(t);i.preventTouch&&this.showWaitMask&&(r.preventNode=this.preventTouch(r.zOrder),r.preventNode.opacity=0),this.isOpening=!0,i.showWaitMask&&this.showUIWaitAnim(),this.getOrCreateUI(t,o,function(o){if(n.hideUIWaitAnim(),r.isClose||null==o)return cc.log("getOrCreateUI "+t+" faile! close state : "+r.isClose+" , uiView : "+o,"%s"),n.isOpening=!1,r.preventNode&&(r.preventNode.destroy(),r.preventNode=null),void d.EVENT.emit(l.EventId.ON_UI_OPEN_FAIL,t);n.onUIOpen(t,o,r,e),n.isOpening=!1,n.autoExecNextUI()},e)}else this.closeToUI(t,e)},e.prototype.closeToUI=function(t,e,o){void 0===o&&(o=!0);var n=this.getUIIndex(t);if(-1!=n){n=o?n:n+1;for(var r=this.UIStack.length-1;r>=n;--r){var i=this.UIStack.pop(),s=i.uiType,a=i.uiView;i.isClose=!0,i.preventNode&&(i.preventNode.destroy(),i.preventNode=null),this.uiCloseDelegate&&this.uiCloseDelegate(s),a&&(a.onClose(),a.cache?(this.UICache[s]=a,a.node.removeFromParent(!1)):a.node.destroy())}this.updateUI(),this.UIOpenQueue=[],this.UICloseQueue=[],o&&this.open(t,e)}},e.prototype.resetWinSize=function(){this._winSize=cc.view.getVisibleSize()},e.prototype.getLayer=function(t){var e=null;switch(t){case s.LayerType.GUI:e=this.guiLayer;break;case s.LayerType.Pop:e=this.popLayer;break;case s.LayerType.Tip:e=this.tipLayer;break;case s.LayerType.Top:e=this.topLayer;break;default:cc.error("Unkonw layer type!","%s")}return e},e.prototype.add2Layer=function(t,e){if(e){var o=this.getLayer(t);o?o.addChild(e):cc.error("add to layer is not found!","%s")}else cc.error("node is not valid!","%s")},e.prototype.closeAll=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=s.UIType.Loading);for(var o=this.UIStack.length-1;o>=0;--o){var n=this.UIStack[o];n.uiType!=e&&(t&&_.SCENE.pushReviveWnd(n.uiType,n.uiArgs),this.close(n.uiType,!1))}this.UIOpenQueue=[],this.UICloseQueue=[],this.isOpening=!1,this.isClosing=!1},e.prototype.clearCache=function(){for(var t in this.UICache){var e=this.UICache[t];cc.isValid(e.node)&&e.node.destroy()}this.UICache={}},e.prototype.isTopUI=function(t){return 0!=this.UIStack.length&&this.UIStack[this.UIStack.length-1].uiType==t},e.prototype.getUI=function(t){for(var e=0;e<this.UIStack.length;e++){var o=this.UIStack[e];if(t==o.uiType)return o.uiView}return null},e.prototype.isUIOpen=function(t){return null!=this.getUI(t)},e.prototype.getTopUI=function(){return this.UIStack.length>0?this.UIStack[this.UIStack.length-1].uiView:null},e.prototype.showUIWaitAnim=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=15),this.showWaitMask&&(this.uiWaitNode&&(this.uiWaitNode.active=!0),this.waitMask&&(this.waitMask.active=!0),t?this.waitMask&&(this.waitMask.opacity=30):this.waitMask&&(this.waitMask.opacity=0))},e.prototype.hideUIWaitAnim=function(){this.uiWaitNode&&(this.uiWaitNode.active=!1),this.waitMask&&(this.waitMask.active=!1)},e.prototype.showSceneLoadUI=function(t){this.sceneWaitNode&&(this.sceneWaitNode.active=!0,this.sceneWaitLbl.string=t)},e.prototype.hideSceneLoadUI=function(){this.sceneWaitNode&&(this.sceneWaitNode.active=!1)},e.prototype.showToast=function(t){if(null!=t&&null!=t){if(!this._tipComponnet){var e=cc.instantiate(this.tipsNode).getComponent(c.default);e.node.parent=this.getLayer(s.LayerType.Tip),e.node.name="_tip_",this._tipComponnet=e}this._tipComponnet.showTips(t)}},Object.defineProperty(e.prototype,"winSize",{get:function(){return this._winSize},enumerable:!1,configurable:!0}),e.prototype.close=function(t,e){var o=this;void 0===e&&(e=!0),cc.log("close ui <"+s.UIType[t]+">");var n,r=this.UIStack.length;if(t>s.UIType.$Start&&t<s.UIType.$End){if(r<1||this.isClosing||this.isOpening||!this.isUIOpen(t))return cc.log("<"+s.UIType[t]+"> can not be close in this period of time"),void(this.isUIOpen(t)&&this.UICloseQueue.push(t));for(var i=this.UIStack.length-1;i>=0;i--){var a=this.UIStack[i];if(a.uiType===t){n=a,this.UIStack.splice(i,1);break}}if(void 0!==n){this.isClosing=!0;var c=n.uiType,u=n.uiView;if(n.isClose=!0,n.preventNode&&(n.preventNode.destroy(),n.preventNode=null),null!=u){var p=this.UIStack[r-2];this.updateUI();var h=function(){p&&p.uiView&&o.isTopUI(p.uiType)?(p.uiView.node.active=!0,p.uiView.onTop(c,u.onClose())):u.onClose(),o.uiCloseDelegate&&o.uiCloseDelegate(c),u.cache?(o.UICache[c]=u,u.node.removeFromParent(!1),cc.log("uiView removeFromParent "+n.uiType)):(u.node.destroy(),cc.log("uiView destroy <"+s.UIType[n.uiType]+">")),o.isClosing=!1,o.autoExecNextUI(),d.EVENT.emit(l.EventId.ON_UI_CLOSE,t)},_=u.node.getComponent(f.default);e&&_?(u.isPlayOpenAni=!0,_.play().wrapMode==cc.WrapMode.Loop&&cc.error("UI close animation should be a loop animation!","%s"),_.on("finished",function(){h()},this,!1).call(function(){})):h()}else this.isClosing=!1}}else cc.error("unknown ui type to close!","%s")},e.prototype.getOpenUICount=function(){return this.UIStack.length},e.prototype.replace=function(t,e){this.close(this.UIStack[this.UIStack.length-1].uiType),this.open(t,e)},e.prototype.getUIIndex=function(t){for(var e=0;e<this.UIStack.length;e++)if(t==this.UIStack[e].uiType)return e;return-1},e.prototype.preventTouch=function(t){var e=h.ResUtil.instantiate(this.uiBack);return e.name="preventTouch",e.on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation()},e),this.getLayer(s.LayerType.Pop).addChild(e,t),e},e.prototype.autoExecNextUI=function(){if(this.UICloseQueue.length>0){var t=this.UICloseQueue[0];this.UICloseQueue.splice(0,1),this.close(t)}else if(this.UIOpenQueue.length>0){var e=this.UIOpenQueue[0];this.UIOpenQueue.splice(0,1),this.open(e.uiType,e.uiArgs)}},e.prototype.updateUI=function(){for(var t=0,e=this.UIStack.length-1;e>=0;--e){var o=this.UIStack[e].uiView.showType;if(this.UIStack[e].uiView.node.active=!0,a.UIShowTypes.UIFullScreen==o)break;if(a.UIShowTypes.UISingle==o){for(var n=0;n<this.BackGroundUI;++n)this.UIStack[n]&&(this.UIStack[n].uiView.node.active=!0);t=this.BackGroundUI;break}}for(var r=t;r<e;++r)this.UIStack[r].uiView.node.active=!1},e.prototype.getOrCreateUI=function(t,e,n,r){var i=this.UICache[t];if(i)n(i);else{var c=s.UIDataInfo.getUIData(t);if(!c||!c.fullPath)return cc.log("getOrCreateUI "+t+" faile, prefab conf not found!"),void n(null);var l=c.fullPath;u.resLoader.loadRes(l,e,function(e,s){if(e){cc.log("getOrCreateUI loadRes "+t+" faile, path: "+l),n(null);try{cc.error(e)}catch(y){}}else{var c=cc.instantiate(s);if(null==c)return cc.log("getOrCreateUI instantiate "+t+" faile, path: "+l),n(null),void u.resLoader.releaseAsset(s);if(null==(i=c.getComponent(a.default)))return cc.log("getOrCreateUI getComponent "+t+" faile, path: "+l),c.destroy(),n(null),void u.resLoader.releaseAsset(s);var p=o.inst.getCanvasSize();i.node.width=p.width,i.node.height=p.height,i.__prefab__=s,s.addRef(),i.init(r,t),n(i)}})}},e.prototype.getCanvasSize=function(){return new cc.Size(this.node.width,this.node.height)},e.prototype.onUIOpen=function(t,e,o,n){var r=this;if(null!=e){if(o.uiView=e,e.node.active=!0,e.node.zIndex=o.zOrder||this.UIStack.length,o.preventNode&&(o.preventNode.opacity=e.maskOpacity),e.quickClose){var i=e.node.getChildByName("background");i||((i=new cc.Node).name="background",i.setContentSize(cc.winSize),i.x=(.5-e.node.anchorX)*cc.winSize.width,i.y=(.5-e.node.anchorY)*cc.winSize.height,e.node.addChild(i,-1)),i.targetOff(cc.Node.EventType.TOUCH_START),i.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation(),cc.log("touch close <"+s.UIType[t]+">"),r.close(t)},i)}this.add2Layer(e.showLayer,e.node),this.updateUI();var a=0;this.UIStack.length>1&&(a=this.UIStack[this.UIStack.length-2].uiType),this.uiOpenBeforeDelegate&&this.uiOpenBeforeDelegate(t,a),e.onOpen(a,n);var c=function(){e.isPlayOpenAni=!1,e.onOpenAniOver(),r.uiOpenDelegate&&r.uiOpenDelegate(t,a),d.EVENT.emit(l.EventId.ON_UI_OPEN,t)},u=e.node.getComponent(p.default);u?(e.isPlayOpenAni=!0,u.play().wrapMode==cc.WrapMode.Loop&&cc.error("UI open animation should not be a loop animation!"),u.once("finished",function(){c()},this)):c()}},e.prototype.getOpenQueueCount=function(){return this.UIOpenQueue.length},i([m(cc.Node)],e.prototype,"guiLayer",void 0),i([m(cc.Node)],e.prototype,"popLayer",void 0),i([m(cc.Node)],e.prototype,"tipLayer",void 0),i([m(cc.Node)],e.prototype,"topLayer",void 0),i([m(cc.Node)],e.prototype,"uiWaitNode",void 0),i([m(cc.Node)],e.prototype,"waitMask",void 0),i([m(cc.Node)],e.prototype,"sceneWaitNode",void 0),i([m(cc.Label)],e.prototype,"sceneWaitLbl",void 0),i([m(cc.Prefab)],e.prototype,"tipsNode",void 0),i([m(cc.Prefab)],e.prototype,"uiBack",void 0),o=i([v],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../Define/EventId":"EventId","../../Define/UIDefs":"UIDefs","../Event/EventMgr":"EventMgr","../Res/ResLoader":"ResLoader","../Res/ResUtil":"ResUtil","../Scene/SceneMgr":"SceneMgr","../UIBase":"UIBase","./CommonToast":"CommonToast","./UICloseAnimation":"UICloseAnimation","./UIOpenAnimation":"UIOpenAnimation"}],UIOpenAnimation:[function(t,e,o){"use strict";cc._RF.push(e,"2f4fe0wTRVJ/6kG1ktMX+6i","UIOpenAnimation");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a],e)}(cc.Animation));o.default=c,cc._RF.pop()},{}],UnAdult:[function(t,e,o){"use strict";cc._RF.push(e,"bd872dR+0NHzLc3e6gNXUfq","UnAdult");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Controller/LTrackerMgr"),a=t("../../../Controller/WindVaneMgr"),c=t("../../../Framework/UIBase"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){s.default.inst.expo("cx156059",{})},e.prototype.onCloseGame=function(){a.default.inst.closeWindow()},i([u],e)}(c.default));o.default=p,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/WindVaneMgr":"WindVaneMgr","../../../Framework/UIBase":"UIBase"}],Unsubscribe:[function(t,e,o){"use strict";cc._RF.push(e,"3bda4tf9wxLNL23lQM2v9Eo","Unsubscribe");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Controller/LTrackerMgr"),l=t("../../../Framework/UIBase"),u=t("../../../Model/TaskModel"),p=t("../../../Network/Net"),f=cc._decorator,h=f.ccclass,d=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._callback=null,e}return r(e,t),e.prototype.onLoad=function(){this._callback=this._para.cb,c.default.inst.expo("cx155939",{})},e.prototype.ouSure=function(){return s(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,p.Net.setSubscribe(!1)];case 1:return t.sent(),u.default.inst.setNetSubStauts(!1),this._callback&&this._callback(),c.default.inst.click("cx155939.dx204459",{}),this.close(),[2]}})})},e.prototype.onContinueGame=function(){c.default.inst.click("cx155939.dx204475",{}),this.close()},i([h],e)}(l.default));o.default=d,cc._RF.pop()},{"../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Framework/UIBase":"UIBase","../../../Model/TaskModel":"TaskModel","../../../Network/Net":"Net"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"6917a72WWFM9ZEwVneeYPE1","Utils");var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../Define/UIDefs"),i=function(){function t(){}return t.verifyNode=function(t){return null!=t&&t.isValid},t.verifyComponent=function(t){return null!=t&&!!t.isValid&&!!t.node&&!!t.node.isValid},t.isComponentLive=function(t){return!!(t&&t.node&&t.node.isValid&&t.isValid)},t.getUrlParams=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(e);return null!=o?decodeURIComponent(o[2]):null},t.containsPointPolygon=function(t,e,o){for(var n=t,r=t.length,i=r-2,s=!1,a=0;a<r;a+=2){var c=n[a+1],l=n[i+1];if(c<o&&l>=o||l<o&&c>=o){var u=n[a];u+(o-c)/(l-c)*(n[i]-u)<e&&(s=!s)}i=a}return s},t.getBoundingBoxAMPolygon=function(t,e,o){var n,r=e.findSlot(o);if(r){var i=r.getAttachment();if(i&&i instanceof sp.spine.BoundingBoxAttachment){var s=i;n=sp.spine.Utils.newFloatArray(s.worldVerticesLength),s.computeWorldVertices(r,0,s.worldVerticesLength,n,0,2);for(var a=n.length,c=0;c<a;c+=2){var l=t.convertToWorldSpaceAR(new cc.Vec2(n[c],n[c+1]));n[c]=l.x,n[c+1]=l.y}}}return n},t.stopSpineAtFrame=function(t,e,o){if(t&&e&&t.findAnimation(e)){t.paused=!1;var n=t.setAnimation(0,e,!1);n&&(t.timeScale=0,n.trackTime=o)}},t.deepCopy=function(t){var e,o,r={};try{for(var i=n(Object.keys(t)),s=i.next();!s.done;s=i.next()){var a=s.value;r[a]="object"==typeof t[a]?this.deepCopy(t[a]):t[a]}}catch(c){e={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}return r},t.formatDate=function(t,e){var o=new Date(t),n={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),S:o.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},t.getFormatTime=function(t){if(t>0)return(t=((new Date).getTime()-t)/1e3)<0?"\u521a\u521a":t>=0&&t<60?Math.floor(t)+"\u79d2\u524d":t<3600?Math.floor(t/60)+"\u5206\u949f\u524d":t<86400?Math.floor(t/60/60)+"\u5c0f\u65f6\u524d":t<31536e3?Math.floor(t/60/60/24)+"\u5929\u524d":Math.floor(t/60/60/24/365)+"\u5e74\u524d"},t.overAddArr=function(t){if(!t||t.length<=0)return[];for(var e=[],o=0;o<t.length;o++)e[o]=0==o?t[o]:e[o-1]+t[o];return e},t.getRandomIndex=function(t,e){var o=0;if(t<=e[0])return 0;if(t>=e[e.length-1])return e.length-1;for(var n=0;n<e.length;n++)if(t<=e[n])o=n;else{if(t>e[n]&&t<=e[n+1]){o=n+1;break}if(t>e[n]&&t<=e[n+1]){o=n+1;break}}return o},t.getRandWeightIndex=function(t){var e=(t=this.overAddArr(t))[t.length-1],o=Math.random()*e;return this.getRandomIndex(o,t)},t.formatCNY=function(t,e){var o,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"},{value:1e21,symbol:"Z"},{value:1e24,symbol:"Y"}];for(o=n.length-1;o>0&&!(t>=n[o].value);o--);return(t/n[o].value).toFixed(e).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[o].symbol},t.initServerTime=function(t){this._initServerTime=t,this._initLocalTime=Date.now()},t.getServerTime=function(){return this._initServerTime+(Date.now()-this._initLocalTime)},t.clone=function(t){var e;if("object"==typeof t)if(null===t)e=null;else if(t instanceof Array){e=[];for(var o=0,n=t.length;o<n;o++)e.push(this.clone(t[o]))}else for(var r in e={},t)e[r]=this.clone(t[r]);else e=t;return e},t.getViewType=function(t){for(var e=r.UIType.$Start+1;e<r.UIType.$End;++e)if(r.UIType[e]==t)return e},t.createMatrix=function(t,e,o){void 0===o&&(o=0);for(var n=new Array,r=0;r<t;++r){n[r]=new Array;for(var i=0;i<e;++i)n[r][i]=o}return n},t.map2Obj=function(t){var e=Object.create(null);return t.forEach(function(t,o){e[o]=t}),e},t.obj2map=function(t){var e,o,r=new Map;try{for(var i=n(Object.keys(t)),s=i.next();!s.done;s=i.next()){var a=s.value;r.set(a,t[a])}}catch(c){e={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}return r},t.arab2char=function(t){var e=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],o=["","\u5341","\u767e","\u5343","\u4e07"],n=function(t){for(var n=t.toString().split("").reverse(),r="",i=0;i<n.length;i++)r=(0==i&&0==n[i]?"":i>0&&0==n[i]&&0==n[i-1]?"":e[n[i]]+(0==n[i]?o[0]:o[i]))+r;return r},r=Math.floor(t/1e4),i=t%1e4,s="";return i.toString().length<4&&(s="0"+i),r?n(r)+"\u4e07"+n(s):n(t)},t.updatePolygonCollider=function(t,e){var o=t.points,n=t.world.points;n.length=o.length;for(var r=cc.v2(),i=1e6,s=1e6,a=-1e6,c=-1e6,l=0,u=o.length;l<u;l++){n[l]||(n[l]=cc.v2()),r.x=o[l].x+e.x,r.y=o[l].y+e.y;var p=r.x,f=r.y;n[l].x=p,n[l].y=f,p>a&&(a=p),p<i&&(i=p),f>c&&(c=f),f<s&&(s=f)}},t.loadSpriteFrame=function(t,e,o){var n=this;cc.resources.load(t,cc.SpriteFrame,function(t,r){n.isComponentLive(e)&&(e.spriteFrame=r,o&&o())})},t.loadNetWork=function(t,e){t&&cc.assetManager.loadRemote(t,{ext:".png"},function(o,n){if(o)console.error("loadRemote error: ",t);else{var r=new cc.SpriteFrame(n);e&&e(r)}})},t.judDay=function(t){var e=new Date(Number(t)),o=new Date((new Date).getTime());return e.setHours(0,0,0,0)==o.setHours(0,0,0,0)},t.getFormatingTimeStr=function(t){var e=Math.floor(t/1e3/60),o=t-6e4*e,n=Math.floor(o/1e3);return this.getFormatingNum(e,2)+"\u5206"+this.getFormatingNum(n,2)+"\u79d2"},t.getFormatingNum=function(t,e){var o=t.toString(),n=o.length;if(n<e)for(var r=n;r<e;r++)o="0"+o;return o},t.playFlying=function(t,e,o,n){var r={x:t.x,y:t.y};try{cc.tween(r).to(1,{y:e.y},{progress:function(e,o,n,i){return n=e+(o-e)*i,t.y=r.y,n},easing:"quadInOut"}).call(function(){t.y=r.y,n&&n()}).start(),cc.tween(r).to(1,{x:e.x},{progress:function(e,o,n,i){return n=e+(o-e)*i+100*Math.sin(i*Math.PI)*-1,t.x=r.x,n}}).call(function(){t.x=r.x,n&&n()}).start(),cc.tween(t).to(1,{scale:.1}).start()}catch(i){n&&n()}},t._initServerTime=0,t._initLocalTime=0,t}();o.default=i,cc._RF.pop()},{"../../Define/UIDefs":"UIDefs"}],VXPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"ee146sIO9xNR45WHQhStezV","VXPlatform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.MessageType=o.VXPlatform=void 0;var i,s=t("../../Define/EventId"),a=t("../Event/EventMgr"),c=t("./MoxiHelper"),l=t("./MoxiModel"),u=t("./Platform"),p=function(){function t(){}return t.wxLogin=function(){return n(this,void 0,Promise,function(){return r(this,function(){return u.Platform.getPlatType()!=u.PlatformType.WeiXin?[2]:[2,new Promise(function(e){wx.login({success:function(o){o.code?e(o.code):t.wxToast("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25~")}})})]})})},t.initShare=function(){var t=this;window.WX_SHARE_INIT||(window.WX_SHARE_INIT="WX_SHARE_INIT",wx.onShareAppMessage(function(){return{title:t.shareInfo.title,imageUrl:t.shareInfo.imgUrl,query:"inviterId="+l.default.inst.getUserId()}}))},t.setSahreStr=function(){var e=99*Math.random()|0,o=99*Math.random()|0;return t.SHARE_STR="SHARE_STR"+e+o,t.SHARE_STR},t.share=function(){wx.shareAppMessage({title:this.shareInfo.title,imageUrl:this.shareInfo.imgUrl,query:"inviterId="+l.default.inst.getUserId()})},t.wxToast=function(t,e){if(void 0===e&&(e=i.toast),u.Platform.getPlatType()==u.PlatformType.WeiXin)switch(e){case i.toast:wx.showToast({title:t,duration:2e3,icon:"none"})}},t.openCustomerServiceConversation=function(){wx.openCustomerServiceConversation()},t.copy=function(t){if(u.Platform.getPlatType()==u.PlatformType.WeiXin)return new Promise(function(e){wx.setClipboardData({data:t,success:function(){wx.getClipboardData({success:function(){e(!0)}})}})})},t.onShow=function(){u.Platform.getPlatType()==u.PlatformType.WeiXin&&(window.WX_SHOW_INIT||(window.WX_SHOW_INIT="WX_SHOW_INIT",wx.onShow(function(e){if(console.log(e,"onShowonShowonShow"),t.setSahreStr(),console.log("\u8fd4\u56de\u524d\u53f0 needCheckBuyInfo",t.needCheckBuyInfo),t.needCheckBuyInfo)return console.log("\u8c03\u7528\u8ba2\u5355\u67e5\u8be2"),c.MoxiHelper.checkBuyInfo(),void(t.needCheckBuyInfo=!1)})))},t.onHide=function(){u.Platform.getPlatType()==u.PlatformType.WeiXin&&wx.onHide(function(){a.EVENT.emit(s.EventId.ON_HIDE)})},t.navigateToMiniProgram=function(t){u.Platform.getPlatType()==u.PlatformType.WeiXin&&wx.navigateToMiniProgram({appId:t.appid?t.appid:"wx8a6bf4f18d1b5d0b",path:t.path?t.path:"page/index/index",envVersion:"trial",success:function(){t.cb&&t.cb()}})},t.getUserInfo=function(){wx.getUserInfo({success:function(t){console.error(t,"success")},fail:function(e){console.error(e,"fail"),t.getAuthorize(function(){t.getUserInfo()})}})},t.getAuthorize=function(t){wx.authorize({scope:"scope.userInfo",success:function(){t&&t()},fail:function(t){console.error(t,"authorizefail")}})},t.getEnterOptionsSync=function(){return wx.getEnterOptionsSync()},t.ON_HIDE_PATH="",t.SHARE_STR="SHARE_STR",t.isTask=!1,t.isReload=!1,t.shareInfo={imgUrl:"",title:""},t.needCheckBuyInfo=!1,t}();o.VXPlatform=p,function(t){t[t.toast=1]="toast"}(i=o.MessageType||(o.MessageType={})),cc._RF.pop()},{"../../Define/EventId":"EventId","../Event/EventMgr":"EventMgr","./MoxiHelper":"MoxiHelper","./MoxiModel":"MoxiModel","./Platform":"Platform"}],WatchAD:[function(t,e,o){"use strict";cc._RF.push(e,"7a00bGB4cJNoJsPjIFlWv4f","WatchAD");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Common/Constant"),a=t("../../../Controller/LTrackerMgr"),c=t("../../../Controller/TableMgr"),l=t("../../../Framework/UIBase"),u=t("../../../System/GamingSystem"),p=t("../../../System/PlayerSystem"),f=cc._decorator,h=f.ccclass,d=f.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propSpr=null,e.lblName=null,e.lblDes=null,e.spriteFrames=[],e._propId=null,e}return r(e,t),e.prototype.start=function(){u.default.setPause(!0),this._propId=this._para;var t=c.TABLE.getItem(this._propId);this.propSpr.spriteFrame=this._propId==s.PROP_ID.Hint?this.spriteFrames[0]:this.spriteFrames[1],this.lblName.string=t.sName,this.lblDes.string=t.sExplain,a.default.inst.expo("cx155963",{sitemname:t.sName})},e.prototype.onClickWatchBtn=function(){if(!this._propId)return u.default.backGame(),void this.close();this.close(),p.default.addItemByWatchAd(this._propId);var t=c.TABLE.getItem(this._propId);a.default.inst.click("cx155963.dx204539",{sitemname:t.sName})},e.prototype.onClickCloseBtn=function(){a.default.inst.click("cx155963.dx204547",{}),u.default.backGame(),this.close()},i([d(cc.Sprite)],e.prototype,"propSpr",void 0),i([d(cc.Label)],e.prototype,"lblName",void 0),i([d(cc.Label)],e.prototype,"lblDes",void 0),i([d([cc.SpriteFrame])],e.prototype,"spriteFrames",void 0),i([h],e)}(l.default);o.default=_,cc._RF.pop()},{"../../../Common/Constant":"Constant","../../../Controller/LTrackerMgr":"LTrackerMgr","../../../Controller/TableMgr":"TableMgr","../../../Framework/UIBase":"UIBase","../../../System/GamingSystem":"GamingSystem","../../../System/PlayerSystem":"PlayerSystem"}],WindVaneMgr:[function(t,e,o){"use strict";cc._RF.push(e,"39fd0FUj55NIoekuQH03gqd","WindVaneMgr");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(e){i(e)}}function a(t){try{c(n.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){this._sdkWind=null,this._sdkBrid=null}return Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.init=function(){return n(this,void 0,void 0,function(){return r(this,function(){return this._sdkWind=window.WindVane,this._sdkBrid=window.ebridge,[2]})})},t.prototype.getUserID=function(){var t=this;if(this._sdkWind)return new Promise(function(e){t._sdkWind.call("EleWVHybridAPI","getUserID",{},function(t){console.log("getUserID success",t),e(t.responseData)},function(t){console.error("getUserID failure",t),e("")})});console.error("NO WindVane")},t.prototype.getLocation=function(){var t=this;if(this._sdkWind)return new Promise(function(e){t._sdkWind.call("WVLocation","getLocation",{enableHighAcuracy:!0,address:!0},function(t){e([JSON.stringify({lng:t.coords.longitude,lat:t.coords.latitude})])},function(t){console.error("getLocation failure:",t),e([])})});console.error("NO WindVane")},t.prototype.getDeviceIds=function(){var t=this;if(this._sdkWind)return new Promise(function(e){t._sdkWind.call("ELMWVDeviceId","getDeviceIds","",function(t){console.log("getDeviceIds  success:",t),e({deviceId:t.deviceUUID,ttid:t.ttid})},function(t){console.error("getDeviceIds  failure:",t),e({})})});console.error("NO WindVane")},t.prototype.getDevice=function(){var t=this;if(this._sdkWind)return new Promise(function(e){t._sdkWind.call("EleWVHybridAPI","getDevice","",function(t){console.log("getDevice  success:",t),t=t.responseData,e({platform:t.model,prodVersion:t.os,product:"eleme"})},function(t){console.error("getDevice  failure:",t),e({})})});console.error("NO WindVane")},t.prototype.getNotificationSettings=function(){var t=this;if(this._sdkWind)return new Promise(function(e){t._sdkWind.call("WVApplication","getNotificationSettings",{},function(t){console.log("success: ",t),e(t)},function(t){console.error("failure: ",t),e(null)})});console.error("NO WindVane")},t.prototype.openSettings=function(){var t=this;if(this._sdkWind)return new Promise(function(e){t._sdkWind.call("WVApplication","openSettings",{},function(t){console.log("success: ",t),e(t)},function(t){console.error("failure: ",t),e()})});console.error("NO WindVane")},t.prototype.openTaskBrowser=function(t,e){var o="&";-1==t.indexOf("?")&&(o="?"),t+=o;var n=[];n.push("missioncollectid="+e.missionCollectionId),n.push("missionid="+e.missionDefId),n.push("taskfrom="+(e.actionConfig.actionValue?e.actionConfig.actionValue.pageSpm:"")),n.push("bizscene=FOOD_ELIMINATE"),n.length>0&&(t+=n.join("&")),this.openBrowser(t)},t.prototype.openBrowser=function(t){if(this._sdkBrid)if(t){console.error(t);var e={url:t};this._sdkBrid.openWindow(e)}else console.error("no url");else console.error("NO ebridge")},t.prototype.closeWindow=function(){this._sdkBrid?this._sdkBrid.closeWindow():console.error("NO ebridge")},t.prototype.getFullLocation=function(){var t=this;if(this._sdkWind)return new Promise(function(e){t._sdkWind.call("EWVLocation","getFullLocation",{},function(t){console.log("success: ",{lng:t.longitude,lat:t.latitude,city:t.cityAdcode}),e([JSON.stringify({lng:t.longitude,lat:t.latitude,city:t.cityAdcode})])},function(t){console.error("failure: ",t),e([])})});console.error("NO WindVane")},t}();o.default=i,cc._RF.pop()},{}],Wrapper:[function(t,e,o){"use strict";cc._RF.push(e,"1ffa6kcKxBJeIlJCGwN2ab1","Wrapper"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){this.repeatCur=0},r=function(){function t(){}return t.callFunc=function(t,e,o){return cc.callFunc(function(o){try{e?t&&t.call(e,o):t&&t(o)}catch(n){console.error(n)}},null,o)},t.scheduleFunction=function(t,e,o,r,i){var s=this;if(t&&t.isLive()&&e){var a=new n;a.target=t,a.name=t.getName(),a.cb=e,a.repeat=r,a.tempCb=function(e){try{a.cb&&a.target.isLive()&&a.cb.call(a.target,e),a.repeat!==cc.macro.REPEAT_FOREVER&&(++a.repeatCur,a.repeatCur>=a.repeat&&s.unscheduleFunction(a.cb))}catch(c){var n=t.getError(c,"scheduleFunction");n.customInfo="interval?: "+o+", repeat?: "+r+", delay?: "+i,console.error(n)}},t.schedule(a.tempCb,o,r,i),this._scheduleList.push(a)}else console.error()},t.unscheduleFunction=function(t){for(var e=0;e<this._scheduleList.length;e++){var o=this._scheduleList[e];if(o.cb==t)return o.target.isLive()&&o.target.unschedule(o.tempCb),void this._scheduleList.splice(e,1)}},t._scheduleList=[],t}();o.default=r,cc._RF.pop()},{}],i18nLabel:[function(t,e,o){"use strict";cc._RF.push(e,"036d842BjxEIa9PYFUJdeZ+","i18nLabel");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nLabel=void 0;var s=t("./i18nMgr"),a=cc._decorator,c=a.ccclass,l=a.property,u=a.executeInEditMode,p=a.disallowMultiple,f=a.requireComponent,h=a.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.i18n_string="",e.i18n_params=[],e}return r(e,t),e.prototype.start=function(){s.i18nMgr.addOrDelLabel(this,!0),this._resetValue()},Object.defineProperty(e.prototype,"lanID",{get:function(){return this.i18n_string},set:function(t){this.i18n_string=t,this.setEndValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this.i18n_params},set:function(t){this.i18n_params=t,this.setEndValue()},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){this.i18n_string=t,this.i18n_params=e,this.setEndValue()},e.prototype.setEndValue=function(){var t=this.getComponent(cc.Label);cc.isValid(t)&&(t.string=s.i18nMgr.getLan(this.i18n_string,this.i18n_params))},e.prototype._resetValue=function(){this.lanID=this.i18n_string},e.prototype.onDestroy=function(){s.i18nMgr.addOrDelLabel(this,!1)},i([l({visible:!1})],e.prototype,"i18n_string",void 0),i([l({visible:!1})],e.prototype,"i18n_params",void 0),i([l({type:cc.String})],e.prototype,"lanID",null),i([l({type:[cc.String]})],e.prototype,"params",null),i([c,u,f(cc.Label),p,h("\u591a\u8bed\u8a00/i18nLabel")],e)}(cc.Component);o.i18nLabel=d,cc._RF.pop()},{"./i18nMgr":"i18nMgr"}],i18nMgr:[function(t,e,o){"use strict";cc._RF.push(e,"1195b1f9m9Oq7CT+UZ9DGic","i18nMgr");var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nMgr=void 0;var r=function(){function t(){}return t.checkInit=function(){this.language||this.setLanguage("ZH")},t.setLanguage=function(t){this.language!==t&&(this.language=t,this.reloadLabel(),this.reloadSprite())},t.addOrDelLabel=function(t,e){if(e)this.labelArr.push(t);else{var o=this.labelArr.indexOf(t);-1!==o&&this.labelArr.splice(o,1)}},t.getLan=function(t,e){if(this.checkInit(),!e||e.length<=0){var o=this.labelData[t];if(o)return o.sText;cc.warn(t+" lan not found!")}var n=this.labelData[t]||t;if(n.sText&&(n=n.sText),e)for(var r=0;r<e.length;r++){var i=new RegExp("#"+r,"g");n=n.replace(i,e[r])}return n},t.addOrDelSprite=function(t,e){if(e)this.spriteArr.push(t);else{var o=this.spriteArr.indexOf(t);-1!==o&&this.spriteArr.splice(o,1)}},t.reloadLabel=function(){var t=this,e="Config/"+this.language;cc.resources.load(e,function(e,o){var r,i;e?(console.error(e),t.labelData={}):t.labelData=o.json;try{for(var s=n(t.labelArr),a=s.next();!a.done;a=s.next())a.value._resetValue()}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}})},t.reloadSprite=function(){var t,e;try{for(var o=n(this.spriteArr),r=o.next();!r.done;r=o.next())r.value._resetValue()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.language="",t.labelArr=[],t.labelData={},t.spriteArr=[],t}();o.i18nMgr=r,cc._RF.pop()},{}],i18nSprite:[function(t,e,o){"use strict";cc._RF.push(e,"c7c24R00kxAda0J0T28JffC","i18nSprite");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.i18nSprite=void 0;var s=t("../Res/ResKeeper"),a=t("./i18nMgr"),c=cc._decorator,l=c.ccclass,u=c.property,p=c.executeInEditMode,f=c.disallowMultiple,h=c.requireComponent,d=c.menu,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.i18n_string="",e}return r(e,t),e.prototype.start=function(){a.i18nMgr.addOrDelSprite(this,!0),this._resetValue()},Object.defineProperty(e.prototype,"lanPic",{get:function(){return this.i18n_string},set:function(t){this.i18n_string=t;var e=this.getComponent(cc.Sprite);if(cc.isValid(e)&&(a.i18nMgr.checkInit(),t)){var o="i18n/sprite/"+a.i18nMgr.language+"/"+t;this.loadRes(o,cc.SpriteFrame,function(t,n){t?cc.error("i18n load :"+o+" fail!"):cc.isValid(e)&&(e.spriteFrame=n)})}},enumerable:!1,configurable:!0}),e.prototype._resetValue=function(){this.lanPic=this.i18n_string},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),a.i18nMgr.addOrDelSprite(this,!1)},i([u({visible:!1})],e.prototype,"i18n_string",void 0),i([u({type:cc.String})],e.prototype,"lanPic",null),i([l,p,h(cc.Sprite),f,d("\u591a\u8bed\u8a00/i18nSprite")],e)}(s.default);o.i18nSprite=_,cc._RF.pop()},{"../Res/ResKeeper":"ResKeeper","./i18nMgr":"i18nMgr"}],interface:[function(t,e,o){"use strict";cc._RF.push(e,"83f85DoJyxFOoxuWgEH9OPK","interface"),Object.defineProperty(o,"__esModule",{value:!0}),o.SeEnumTaskeIsDisplay=o.SeEnumTaskeTaskType=o.SeEnumItemeItemType=o.SeEnumItemeType=void 0,function(t){t[t.YouXiNaDaoJu=1]="YouXiNaDaoJu",t[t.YouXiWaiDaoJu=2]="YouXiWaiDaoJu"}(o.SeEnumItemeType||(o.SeEnumItemeType={})),function(t){t[t.YouXiDaoJu=1]="YouXiDaoJu",t[t.PingTaiDaoJu=2]="PingTaiDaoJu"}(o.SeEnumItemeItemType||(o.SeEnumItemeItemType={})),function(t){t[t.WanLiuDanChuangFenXiang=1]="WanLiuDanChuangFenXiang"}(o.SeEnumTaskeTaskType||(o.SeEnumTaskeTaskType={})),function(t){t[t.XianShi=1]="XianShi",t[t.BuXianShi=2]="BuXianShi"}(o.SeEnumTaskeIsDisplay||(o.SeEnumTaskeIsDisplay={})),cc._RF.pop()},{}],wxConfig:[function(t,e,o){"use strict";cc._RF.push(e,"19d01HsvttL7rrT1fCCuNNw","wxConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.WX_CONFIG=void 0,o.WX_CONFIG={AD_ID:{banner:"adunit-a0fc9fa65a444676",video:"adunit-1c33fc3f67356508",interstitial:"adunit-901f8025c608f3e6",grid:"adunit-004d566406f94f06",custom:"adunit-b6f287054c384104"}},cc._RF.pop()},{}]},{},["Archive","AudioConfig","Constant","Helper","AfunRiskSDKController","AntiAddictionController","DoubleAwardController","ExLogCtr","ExitController","LTrackerMgr","MtopApi","MtopMgr","PlatMgr","RankController","Request","ShareMgr","TableMgr","TaskController","TurnTaskController","WindVaneMgr","Define","EventId","LocalKey","SceneDef","UIDefs","ParticleActvator","RTParticle","RTSimulator","RTTextureAnimation","RTTextureParticleSystem","UIEffect","UIEffectMgr","UIEffectType","EventMgr","EventObject","HttpRequest","MoxiHelper","MoxiModel","Platform","VXPlatform","RTCounter","RTPerfCounter","RTProfiler","NodePool","ResKeeper","ResLeakChecker","ResLoader","ResUtil","SceneBase","SceneMgr","LocalStorageMgr","ComponetBase","Handler","HashMap","ICallbackOwner","ScheduleObject","SysHook","TeMap","BaseInfo","StateMachine","UIBase","ButtonClickLimiter","CommonToast","ConfirmView","FlyTxt","FlyTxtPool","GuideAbility","GuideEvent","ListViewOptimizer","MeshPolygonSprite","PageViewOptimizer","RoundRectMask","ScrollViewOptimizer","SingleTouch","TabControl","UICloseAnimation","UIFacade","UIMgr","UIOpenAnimation","LogUtil","MD5","ObjectUtils","Singleton","Utils","Wrapper","i18nLabel","i18nMgr","i18nSprite","PlayerModel","RankModel","TaskModel","Net","NetApi","NetBase","PlatformDefault","PlatformSystem","PlatformWX","wxConfig","AlgorithmSystem","ArchiveSystem","AudioSystem","ButtonAudio","DropSystem","GamingSystem","PicSystem","PlayerSystem","RobotSystem","interface","Bootstrap","Game","Main","AntiAddiction","UnAdult","CommonDialog","ExitGame","EffectLayerController","FlyResMgr","GameDrop","GameFail","GameGuide","GamePause","GameSettlement","GameTips","MapController","Picitem","ProgressController","PropItemController","WatchAD","GetItemLayer","Loading","GetPower","LifeShowController","LifeSystem","MorePower","Rank","RankItem","ReviveUI","Setting","Unsubscribe","Detain"]);
